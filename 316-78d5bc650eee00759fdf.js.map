{"version":3,"file":"316-78d5bc650eee00759fdf.js","mappings":"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","sources":["webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/core-js/date/now.js","webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/core-js/number/is-integer.js","webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/core-js/object/assign.js","webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/core-js/object/create.js","webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/core-js/object/keys.js","webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/core-js/object/set-prototype-of.js","webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/core-js/object/values.js","webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/helpers/esm/extends.js","webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/helpers/esm/setPrototypeOf.js","webpack://vienna-hotels/./node_modules/@babel/runtime-corejs2/helpers/esm/inheritsLoose.js","webpack://vienna-hotels/./node_modules/@react-icons/all-files/hi/HiCloudUpload.js","webpack://vienna-hotels/./node_modules/memoize-one/dist/memoize-one.esm.js","webpack://vienna-hotels/./node_modules/raf-schd/dist/raf-schd.esm.js","webpack://vienna-hotels/./node_modules/use-memo-one/dist/use-memo-one.esm.js","webpack://vienna-hotels/./node_modules/core-js/library/fn/date/now.js","webpack://vienna-hotels/./node_modules/core-js/library/fn/number/is-integer.js","webpack://vienna-hotels/./node_modules/core-js/library/fn/object/assign.js","webpack://vienna-hotels/./node_modules/core-js/library/fn/object/create.js","webpack://vienna-hotels/./node_modules/core-js/library/fn/object/keys.js","webpack://vienna-hotels/./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack://vienna-hotels/./node_modules/core-js/library/fn/object/values.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_a-function.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_an-object.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_array-includes.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_cof.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_core.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_ctx.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_defined.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_descriptors.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_dom-create.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_export.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_fails.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_global.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_has.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_hide.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_html.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_iobject.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_is-integer.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_is-object.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_library.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-assign.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-create.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-dp.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-dps.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-gopd.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-gops.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-keys-internal.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-keys.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-pie.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-sap.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_object-to-array.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_property-desc.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_set-proto.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_shared-key.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_shared.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_to-absolute-index.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_to-integer.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_to-iobject.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_to-length.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_to-object.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_to-primitive.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/_uid.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/es6.date.now.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/es6.number.is-integer.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/es6.object.assign.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/es6.object.create.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/es6.object.keys.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack://vienna-hotels/./node_modules/core-js/library/modules/es7.object.values.js","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/src/internal-plugins/pages/ui/components/tabs/Pages/PageContent/index.tsx","webpack://vienna-hotels/./node_modules/@atlaskit/tree/dist/esm/utils/path.js","webpack://vienna-hotels/./node_modules/@atlaskit/tree/dist/esm/utils/tree.js","webpack://vienna-hotels/./node_modules/@atlaskit/tree/dist/esm/utils/handy.js","webpack://vienna-hotels/./node_modules/@atlaskit/tree/dist/esm/utils/flat-tree.js","webpack://vienna-hotels/./node_modules/@atlaskit/tree/dist/esm/components/Tree/Tree-utils.js","webpack://vienna-hotels/./node_modules/@atlaskit/tree/dist/esm/components/TreeItem/TreeItem.js","webpack://vienna-hotels/./node_modules/@atlaskit/tree/dist/esm/utils/react.js","webpack://vienna-hotels/./node_modules/@atlaskit/tree/dist/esm/utils/delayed-function.js","webpack://vienna-hotels/./node_modules/@atlaskit/tree/dist/esm/components/Tree/Tree.js","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/definitions.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/context/LazyContext.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/use-features.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/context/MotionConfigContext.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/context/MotionContext/index.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/context/PresenceContext.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/is-browser.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/utils/use-visual-element.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/is-ref-object.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/utils/variants.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/context/MotionContext/create.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/context/MotionContext/utils.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/use-constant.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framesync/dist/es/on-next-frame.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framesync/dist/es/index.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framesync/dist/es/create-render-step.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/array.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/subscription-manager.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/value/index.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/value/utils/is-motion-value.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/time-conversion.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/animation/utils/easing.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/animation/utils/is-animatable.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/animation/utils/is-keyframes-target.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/animation/utils/default-transitions.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/value-types/type-int.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/value-types/number.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/value-types/defaults.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/value-types/animatable-none.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/use-instant-transition-state.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/resolve-value.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/animation/utils/transitions.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/animation/mix-values.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/geometry/copy.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/utils/has-transform.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/geometry/delta-apply.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/geometry/delta-calc.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/geometry/delta-remove.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/geometry/utils.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/shared/stack.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/styles/scale-correction.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/styles/transform.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/utils/each-axis.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/html/utils/transform.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/utils/compare-by-depth.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/utils/flat-tree.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/value/utils/resolve-motion-value.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/node/create-projection-node.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/geometry/models.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/animation/animate.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/node/id.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/context/LayoutGroupContext.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/context/SwitchLayoutGroupContext.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/utils/VisualElementHandler.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/index.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/use-projection.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/utils/use-motion-ref.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/motion-proxy.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/lowercase-elements.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/utils/is-svg-component.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/utils/is-forced-motion-value.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/html/utils/build-transform.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/utils/is-css-variable.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/value-types/get-as-type.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/html/utils/build-styles.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/html/utils/create-render-state.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/html/use-props.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/utils/valid-prop.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/utils/filter-props.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/utils/transform-origin.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/utils/path.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/utils/build-attrs.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/utils/create-render-state.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/use-props.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/use-render.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/utils/camel-to-dash.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/html/utils/render.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/utils/camel-case-attrs.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/utils/render.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/html/utils/scrape-motion-values.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/utils/scrape-motion-values.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/animation/utils/is-animation-controls.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/utils/use-visual-state.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/config-motion.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/utils/types.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/html/config-motion.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/events/use-dom-event.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/utils/event-type.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/events/event-info.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/events/use-pointer-event.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/events/utils.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/drag/utils/lock.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/use-hover-gesture.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/use-unmount-effect.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/viewport/observers.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/viewport/use-viewport.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/utils/make-renderless-component.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/gestures.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/use-tap-gesture.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/use-focus-gesture.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/shallow-compare.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/is-numerical-string.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/utils/is-zero-value-string.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/value-types/test.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/value-types/dimensions.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/value-types/type-auto.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/value-types/find.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/utils/setters.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/utils/animation.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/utils/animation-state.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/animations.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/PanSession.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/geometry/conversion.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/utils/measure.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/drag.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/use-pan-gesture.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/gestures/drag/use-drag.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/utils/lifecycles.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/index.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/utils/motion-values.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/utils/parse-dom-variant.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/html/visual-element.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/svg/visual-element.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/create-visual-element.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/styles/scale-border-radius.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/styles/scale-box-shadow.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/layout/MeasureLayout.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/motion/features/layout/index.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/node/DocumentProjectionNode.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/projection/node/HTMLProjectionNode.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/motion.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/node_modules/framer-motion/dist/es/render/dom/utils/create-config.mjs","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/src/internal-plugins/pages/ui/components/ContextMenu.tsx","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/src/internal-plugins/pages/ui/components/tabs/Pages/PageCreator/index.tsx","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/src/internal-plugins/pages/ui/components/tabs/Pages/PageTree/treeconverter.ts","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/src/internal-plugins/pages/ui/components/tabs/Pages/PageTree/index.tsx","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/src/internal-plugins/pages/ui/components/tabs/Pages/index.tsx","webpack://vienna-hotels/./node_modules/@jaenjs/jaen/src/internal-plugins/pages/ui/tabs/Pages.tsx"],"sourcesContent":["module.exports = require(\"core-js/library/fn/date/now\");","module.exports = require(\"core-js/library/fn/number/is-integer\");","module.exports = require(\"core-js/library/fn/object/assign\");","module.exports = require(\"core-js/library/fn/object/create\");","module.exports = require(\"core-js/library/fn/object/keys\");","module.exports = require(\"core-js/library/fn/object/set-prototype-of\");","module.exports = require(\"core-js/library/fn/object/values\");","import _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nexport default function _extends() {\n  _extends = _Object$assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import _Object$setPrototypeOf from \"@babel/runtime-corejs2/core-js/object/set-prototype-of\";\nexport default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = _Object$setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import _Object$create from \"@babel/runtime-corejs2/core-js/object/create\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = _Object$create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","// THIS FILE IS AUTO GENERATED\nvar GenIcon = require('../lib').GenIcon;\n\nmodule.exports.HiCloudUpload = function HiCloudUpload(props) {\n  return GenIcon({\n    \"tag\": \"svg\",\n    \"attr\": {\n      \"viewBox\": \"0 0 20 20\",\n      \"fill\": \"currentColor\"\n    },\n    \"child\": [{\n      \"tag\": \"path\",\n      \"attr\": {\n        \"fillRule\": \"evenodd\",\n        \"d\": \"M2 10a4 4 0 004 4h3v3a1 1 0 102 0v-3h3a4 4 0 000-8 4 4 0 00-8 0 4 4 0 00-4 4zm9 4H9V9.414l-1.293 1.293a1 1 0 01-1.414-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 9.414V14z\",\n        \"clipRule\": \"evenodd\"\n      }\n    }]\n  })(props);\n};","var safeIsNaN = Number.isNaN || function ponyfill(value) {\n  return typeof value === 'number' && value !== value;\n};\n\nfunction isEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n\n  if (safeIsNaN(first) && safeIsNaN(second)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction areInputsEqual(newInputs, lastInputs) {\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  for (var i = 0; i < newInputs.length; i++) {\n    if (!isEqual(newInputs[i], lastInputs[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n  if (isEqual === void 0) {\n    isEqual = areInputsEqual;\n  }\n\n  var lastThis;\n  var lastArgs = [];\n  var lastResult;\n  var calledOnce = false;\n\n  function memoized() {\n    var newArgs = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      newArgs[_i] = arguments[_i];\n    }\n\n    if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n      return lastResult;\n    }\n\n    lastResult = resultFn.apply(this, newArgs);\n    calledOnce = true;\n    lastThis = this;\n    lastArgs = newArgs;\n    return lastResult;\n  }\n\n  return memoized;\n}\n\nexport default memoizeOne;","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;","import { useState, useRef, useEffect } from 'react';\n\nfunction areInputsEqual(newInputs, lastInputs) {\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  for (var i = 0; i < newInputs.length; i++) {\n    if (newInputs[i] !== lastInputs[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction useMemoOne(getResult, inputs) {\n  var initial = useState(function () {\n    return {\n      inputs: inputs,\n      result: getResult()\n    };\n  })[0];\n  var isFirstRun = useRef(true);\n  var committed = useRef(initial);\n  var useCache = isFirstRun.current || Boolean(inputs && committed.current.inputs && areInputsEqual(inputs, committed.current.inputs));\n  var cache = useCache ? committed.current : {\n    inputs: inputs,\n    result: getResult()\n  };\n  useEffect(function () {\n    isFirstRun.current = false;\n    committed.current = cache;\n  }, [cache]);\n  return cache.result;\n}\n\nfunction useCallbackOne(callback, inputs) {\n  return useMemoOne(function () {\n    return callback;\n  }, inputs);\n}\n\nvar useMemo = useMemoOne;\nvar useCallback = useCallbackOne;\nexport { useCallback, useCallbackOne, useMemo, useMemoOne };","require('../../modules/es6.date.now');\nmodule.exports = require('../../modules/_core').Date.now;\n","require('../../modules/es6.number.is-integer');\nmodule.exports = require('../../modules/_core').Number.isInteger;\n","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var core = module.exports = { version: '2.6.12' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","module.exports = true;\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = {}.propertyIsEnumerable;\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","import {\n  Accordion,\n  AccordionButton,\n  AccordionIcon,\n  AccordionItem,\n  AccordionPanel,\n  Avatar,\n  Badge,\n  Box,\n  Button,\n  ButtonGroup,\n  Checkbox,\n  Flex,\n  FormControl,\n  FormErrorMessage,\n  FormHelperText,\n  FormLabel,\n  Heading,\n  HStack,\n  Img,\n  Input,\n  Skeleton,\n  Spacer,\n  Stack,\n  Text,\n  Textarea,\n  useToast\n} from '@chakra-ui/react'\nimport {useSnekFinder} from '@jaenjs/snek-finder'\nimport * as React from 'react'\nimport {Controller, useForm} from 'react-hook-form'\nimport {IFormProps, IJaenTemplate} from '../../../../../types'\n\nimport {HiCloudUpload} from '@react-icons/all-files/hi/HiCloudUpload'\n\nexport type ContentValues = {\n  title: string\n  slug: string\n  image?: string\n  description?: string\n  excludedFromIndex?: boolean\n}\n\nexport interface PageContentProps extends IFormProps<ContentValues> {\n  template: IJaenTemplate | null\n}\n\n/**\n * Component for displaying a page content.\n *\n * It includes Accordion that can be used to expand/collapse the page content.\n */\nexport const PageContent = (props: PageContentProps) => {\n  const toast = useToast()\n\n  const [defaultValues, setDefaultValues] = React.useState<ContentValues>(\n    props.values\n  )\n\n  React.useEffect(() => {\n    setDefaultValues(props.values)\n  }, [props.values])\n\n  const {\n    register,\n    reset,\n    handleSubmit,\n    setValue,\n    control,\n    formState: {errors, isSubmitting, isDirty, isValid}\n  } = useForm<ContentValues>({\n    defaultValues\n  })\n\n  const finder = useSnekFinder({\n    mode: 'selector',\n    onAction: action => {\n      if (action.type === 'SELECTOR_SELECT') {\n        const image = action.payload.item.src\n\n        setValue('image', image, {\n          shouldDirty: true\n        })\n      }\n    }\n  })\n\n  const onSubmit = (values: ContentValues) => {\n    const vs = {\n      ...defaultValues,\n      ...values\n    }\n\n    props.onSubmit(vs)\n\n    setDefaultValues(vs)\n    reset(vs)\n\n    toast({\n      title: 'Saved',\n      description: 'Your changes have been saved.',\n      status: 'success',\n      duration: 5000\n    })\n  }\n\n  const onReset = () => {\n    reset(defaultValues)\n  }\n\n  const handleImageUpload = () => {\n    finder.toggleSelector()\n  }\n\n  const handleImageRemove = () => {\n    setValue('image', '', {\n      shouldDirty: true\n    })\n  }\n\n  return (\n    <>\n      {finder.finderElement}\n      <Flex flexDirection={'column'}>\n        <Heading as={'h3'} size={'lg'} mb=\"4\">\n          Content{' '}\n          {props.template && <Badge>{props.template.displayName}</Badge>}\n        </Heading>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <Box h=\"70vh\" overflowY=\"scroll\">\n            <Accordion defaultIndex={0}>\n              <AccordionItem>\n                <h2>\n                  <AccordionButton>\n                    <Box flex=\"1\" textAlign=\"left\">\n                      General\n                    </Box>\n                    <AccordionIcon />\n                  </AccordionButton>\n                </h2>\n                <AccordionPanel pb={4}>\n                  <Box>\n                    <FormControl isInvalid={!!errors.title}>\n                      <FormLabel>Title</FormLabel>\n                      <Input\n                        // id=\"title\"\n                        placeholder=\"Title\"\n                        {...register('title', {\n                          required: 'This is required',\n                          minLength: {\n                            value: 4,\n                            message: 'Minimum length should be 4'\n                          }\n                        })}\n                      />\n                      <FormErrorMessage>\n                        {errors.title?.message}\n                      </FormErrorMessage>\n                    </FormControl>\n                    <FormControl mt={4} isInvalid={!!errors.slug}>\n                      <FormLabel>Slug</FormLabel>\n                      <Input\n                        // id=\"slug\"\n                        placeholder=\"the-slug\"\n                        disabled={!props.template}\n                        {...register('slug', {\n                          required: 'This is required',\n                          minLength: {\n                            value: 4,\n                            message: 'Minimum length should be 4'\n                          },\n                          pattern: {\n                            value: /^[a-z0-9-]+$/,\n                            message:\n                              'Only lowercase letters, numbers and hyphens are allowed'\n                          },\n                          validate: (value: string) => {\n                            const {externalValidation} = props\n\n                            if (externalValidation) {\n                              const validation = externalValidation(\n                                'slug',\n                                value\n                              )\n\n                              if (validation) {\n                                return validation\n                              }\n                            }\n                          }\n                        })}\n                      />\n                      {!errors.slug && (\n                        <FormHelperText>\n                          Make sure the slug is unique between siblings.\n                        </FormHelperText>\n                      )}\n                      <FormErrorMessage>\n                        {errors.slug?.message}\n                      </FormErrorMessage>\n                    </FormControl>\n                    <FormControl mt={4}>\n                      <FormLabel>Description</FormLabel>\n                      <Textarea\n                        // id=\"description\"\n                        placeholder=\"This is a sample description used for this page.\"\n                        {...register('description', {})}\n                      />\n                    </FormControl>\n                    <FormControl mt={4}>\n                      <FormLabel>Image</FormLabel>\n\n                      <Controller\n                        control={control}\n                        name=\"image\"\n                        render={({field: {value}}) => (\n                          <Stack\n                            direction=\"row\"\n                            spacing=\"6\"\n                            align=\"center\"\n                            width=\"full\">\n                            <Avatar size=\"xl\" name=\"Page\" src={value} />\n                            <Box>\n                              <HStack spacing=\"5\">\n                                <Button\n                                  leftIcon={<HiCloudUpload />}\n                                  onClick={handleImageUpload}>\n                                  Change photo\n                                </Button>\n                                <Button\n                                  variant=\"ghost\"\n                                  colorScheme=\"red\"\n                                  onClick={handleImageRemove}>\n                                  Delete\n                                </Button>\n                              </HStack>\n                              <Text fontSize=\"sm\" mt=\"3\" color=\"gray.500\">\n                                Upload a photo to represent this page.\n                              </Text>\n                            </Box>\n                          </Stack>\n                        )}\n                      />\n                    </FormControl>\n                    <FormControl mt={4}>\n                      <FormLabel>Settings</FormLabel>\n                      <Checkbox {...register('excludedFromIndex')}>\n                        Exclude form index\n                      </Checkbox>\n                    </FormControl>\n                  </Box>\n                </AccordionPanel>\n              </AccordionItem>\n\n              <AccordionItem>\n                <h2>\n                  <AccordionButton>\n                    <Box flex=\"1\" textAlign=\"left\">\n                      Fields\n                    </Box>\n                    <AccordionIcon />\n                  </AccordionButton>\n                </h2>\n                <AccordionPanel pb={4}>\n                  <Skeleton h=\"200\"></Skeleton>\n                </AccordionPanel>\n              </AccordionItem>\n            </Accordion>\n          </Box>\n\n          <Spacer flex=\"1\" />\n          <ButtonGroup isDisabled={!isDirty} mt=\"4\">\n            <Button\n              colorScheme=\"blue\"\n              mr={4}\n              isLoading={isSubmitting}\n              type=\"submit\">\n              Save\n            </Button>\n            <Button onClick={onReset}>Cancel</Button>\n          </ButtonGroup>\n        </form>\n      </Flex>\n    </>\n  )\n}\n","import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\n/*\n  Checking if two given path are equal\n */\n\nexport var isSamePath = function isSamePath(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  return a.length === b.length && a.every(function (v, i) {\n    return v === b[i];\n  });\n};\n/*\n  Checks if the two paths have the same parent\n */\n\nexport var hasSameParent = function hasSameParent(a, b) {\n  return isSamePath(getParentPath(a), getParentPath(b));\n};\n/*\n  Calculates the parent path for a path\n*/\n\nexport var getParentPath = function getParentPath(child) {\n  return child.slice(0, child.length - 1);\n};\n/*\n  It checks if the item is on top of a sub tree based on the two neighboring items, which are above or below the item.\n*/\n\nexport var isTopOfSubtree = function isTopOfSubtree(belowPath, abovePath) {\n  return !abovePath || isParentOf(abovePath, belowPath);\n};\n\nvar isParentOf = function isParentOf(parent, child) {\n  return isSamePath(parent, getParentPath(child));\n};\n\nexport var getIndexAmongSiblings = function getIndexAmongSiblings(path) {\n  var lastIndex = path[path.length - 1];\n  return lastIndex;\n};\nexport var getPathOnLevel = function getPathOnLevel(path, level) {\n  return path.slice(0, level);\n};\nexport var moveAfterPath = function moveAfterPath(after, from) {\n  var newPath = _toConsumableArray(after);\n\n  var movedDownOnTheSameLevel = isLowerSibling(newPath, from);\n\n  if (!movedDownOnTheSameLevel) {\n    // not moved within the same subtree\n    newPath[newPath.length - 1] += 1;\n  }\n\n  return newPath;\n};\nexport var isLowerSibling = function isLowerSibling(a, other) {\n  return hasSameParent(a, other) && getIndexAmongSiblings(a) > getIndexAmongSiblings(other);\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nimport { getParentPath, getIndexAmongSiblings } from './path';\n/*\n  Transforms tree structure into flat list of items for rendering purposes.\n  We recursively go through all the elements and its children first on each level\n */\n\nexport var flattenTree = function flattenTree(tree) {\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return tree.items[tree.rootId] ? tree.items[tree.rootId].children.reduce(function (accum, itemId, index) {\n    // iterating through all the children on the given level\n    var item = tree.items[itemId];\n    var currentPath = [].concat(_toConsumableArray(path), [index]); // we create a flattened item for the current item\n\n    var currentItem = createFlattenedItem(item, currentPath); // we flatten its children\n\n    var children = flattenChildren(tree, item, currentPath); // append to the accumulator\n\n    return [].concat(_toConsumableArray(accum), [currentItem], _toConsumableArray(children));\n  }, []) : [];\n};\n/*\n  Constructs a new FlattenedItem\n */\n\nvar createFlattenedItem = function createFlattenedItem(item, currentPath) {\n  return {\n    item: item,\n    path: currentPath\n  };\n};\n/*\n  Flatten the children of the given subtree\n*/\n\n\nvar flattenChildren = function flattenChildren(tree, item, currentPath) {\n  return item.isExpanded ? flattenTree({\n    rootId: item.id,\n    items: tree.items\n  }, currentPath) : [];\n};\n/*\n  Changes the tree data structure with minimal reference changes.\n */\n\n\nexport var mutateTree = function mutateTree(tree, itemId, mutation) {\n  var itemToChange = tree.items[itemId];\n\n  if (!itemToChange) {\n    // Item not found\n    return tree;\n  } // Returning a clone of the tree structure and overwriting the field coming in mutation\n\n\n  return {\n    // rootId should not change\n    rootId: tree.rootId,\n    items: _objectSpread(_objectSpread({}, tree.items), {}, _defineProperty({}, itemId, _objectSpread(_objectSpread({}, itemToChange), mutation)))\n  };\n};\nexport var getItem = function getItem(tree, path) {\n  var cursor = tree.items[tree.rootId];\n\n  var _iterator = _createForOfIteratorHelper(path),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var i = _step.value;\n      cursor = tree.items[cursor.children[i]];\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return cursor;\n};\nexport var getParent = function getParent(tree, path) {\n  var parentPath = getParentPath(path);\n  return getItem(tree, parentPath);\n};\nexport var getTreePosition = function getTreePosition(tree, path) {\n  var parent = getParent(tree, path);\n  var index = getIndexAmongSiblings(path);\n  return {\n    parentId: parent.id,\n    index: index\n  };\n};\n\nvar hasLoadedChildren = function hasLoadedChildren(item) {\n  return !!item.hasChildren && item.children.length > 0;\n};\n\nvar isLeafItem = function isLeafItem(item) {\n  return !item.hasChildren;\n};\n\nvar removeItemFromTree = function removeItemFromTree(tree, position) {\n  var sourceParent = tree.items[position.parentId];\n\n  var newSourceChildren = _toConsumableArray(sourceParent.children);\n\n  var itemRemoved = newSourceChildren.splice(position.index, 1)[0];\n  var newTree = mutateTree(tree, position.parentId, {\n    children: newSourceChildren,\n    hasChildren: newSourceChildren.length > 0,\n    isExpanded: newSourceChildren.length > 0 && sourceParent.isExpanded\n  });\n  return {\n    tree: newTree,\n    itemRemoved: itemRemoved\n  };\n};\n\nvar addItemToTree = function addItemToTree(tree, position, item) {\n  var destinationParent = tree.items[position.parentId];\n\n  var newDestinationChildren = _toConsumableArray(destinationParent.children);\n\n  if (typeof position.index === 'undefined') {\n    if (hasLoadedChildren(destinationParent) || isLeafItem(destinationParent)) {\n      newDestinationChildren.push(item);\n    }\n  } else {\n    newDestinationChildren.splice(position.index, 0, item);\n  }\n\n  return mutateTree(tree, position.parentId, {\n    children: newDestinationChildren,\n    hasChildren: true\n  });\n};\n\nexport var moveItemOnTree = function moveItemOnTree(tree, from, to) {\n  var _removeItemFromTree = removeItemFromTree(tree, from),\n      treeWithoutSource = _removeItemFromTree.tree,\n      itemRemoved = _removeItemFromTree.itemRemoved;\n\n  return addItemToTree(treeWithoutSource, to, itemRemoved);\n};","export var noop = function noop() {};\nexport var range = function range(n) {\n  return Array.from({\n    length: n\n  }, function (v, i) {\n    return i;\n  });\n};\nexport var between = function between(min, max, number) {\n  return Math.min(max, Math.max(min, number));\n};\nexport var oneOf = function oneOf(a, b) {\n  return typeof a !== 'undefined' ? a : b;\n};","import { isTopOfSubtree, hasSameParent, getPathOnLevel, moveAfterPath } from './path';\nimport { between } from './handy';\nexport var getFlatItemPath = function getFlatItemPath(flattenedTree, sourceIndex) {\n  return flattenedTree[sourceIndex].path;\n};\n/*\n  Calculates the source path after drag&drop ends\n */\n\nexport var getSourcePath = getFlatItemPath;\n/*\n    Calculates the destination path after drag&drop ends\n\n    During dragging the items are displaced based on the location of the dragged item.\n    Displacement depends on which direction the item is coming from.\n\n    index\n          -----------        -----------\n    0     | item 0           | item 1 (displaced)\n          -----------        -----------\n    1     | item 1           | item 2 (displaced)\n          -----------  --->  -----------      -----------\n    2     | item 2                            | item 0 (dragged)\n          -----------        -----------      -----------\n    3     | item 3           | item 3\n          -----------        -----------\n\n   */\n\nexport var getDestinationPath = function getDestinationPath(flattenedTree, sourceIndex, destinationIndex, level) {\n  // Moving down\n  var down = destinationIndex > sourceIndex; // Path of the source location\n\n  var sourcePath = getSourcePath(flattenedTree, sourceIndex); // Stayed at the same place\n\n  var sameIndex = destinationIndex === sourceIndex; // Path of the upper item where the item was dropped\n\n  var upperPath = down ? flattenedTree[destinationIndex].path : flattenedTree[destinationIndex - 1] && flattenedTree[destinationIndex - 1].path; // Path of the lower item where the item was dropped\n\n  var lowerPath = down || sameIndex ? flattenedTree[destinationIndex + 1] && flattenedTree[destinationIndex + 1].path : flattenedTree[destinationIndex].path;\n  /*\n    We are going to differentiate 4 cases:\n      - item didn't change position, only moved horizontally\n      - item moved to the top of a list\n      - item moved between two items on the same level\n      - item moved to the end of list. This is an ambiguous case.\n  */\n  // Stayed in place, might moved horizontally\n\n  if (sameIndex) {\n    if (typeof level !== 'number') {\n      return sourcePath;\n    }\n\n    if (!upperPath) {\n      // Not possible to move\n      return sourcePath;\n    }\n\n    var minLevel = lowerPath ? lowerPath.length : 1;\n    var maxLevel = Math.max(sourcePath.length, upperPath.length);\n    var finalLevel = between(minLevel, maxLevel, level);\n    var sameLevel = finalLevel === sourcePath.length;\n\n    if (sameLevel) {\n      // Didn't change level\n      return sourcePath;\n    }\n\n    var previousPathOnTheFinalLevel = getPathOnLevel(upperPath, finalLevel);\n    return moveAfterPath(previousPathOnTheFinalLevel, sourcePath);\n  } // Moved to top of the list\n\n\n  if (lowerPath && isTopOfSubtree(lowerPath, upperPath)) {\n    return lowerPath;\n  } // Moved between two items on the same level\n\n\n  if (upperPath && lowerPath && hasSameParent(upperPath, lowerPath)) {\n    if (down && hasSameParent(upperPath, sourcePath)) {\n      // if item was moved down within the list, it will replace the displaced item\n      return upperPath;\n    }\n\n    return lowerPath;\n  } // Moved to end of list\n\n\n  if (upperPath) {\n    // this means that the upper item is deeper in the tree.\n    var _finalLevel = calculateFinalLevel(sourcePath, upperPath, lowerPath, level); // Insert to higher levels\n\n\n    var _previousPathOnTheFinalLevel = getPathOnLevel(upperPath, _finalLevel);\n\n    return moveAfterPath(_previousPathOnTheFinalLevel, sourcePath);\n  } // In case of any other impossible case\n\n\n  return sourcePath;\n};\n\nvar calculateFinalLevel = function calculateFinalLevel(sourcePath, upperPath, lowerPath, level) {\n  var upperLevel = upperPath.length;\n  var lowerLevel = lowerPath ? lowerPath.length : 1;\n  var sourceLevel = sourcePath.length;\n\n  if (typeof level === 'number') {\n    // Explicit disambiguation based on level\n    // Final level has to be between the levels of bounding items, inclusive\n    return between(lowerLevel, upperLevel, level);\n  } // Automatic disambiguation based on the initial level\n\n\n  return sourceLevel <= lowerLevel ? lowerLevel : upperLevel;\n};\n\nexport var getItemById = function getItemById(flattenedTree, id) {\n  return flattenedTree.find(function (item) {\n    return item.item.id === id;\n  });\n};\nexport var getIndexById = function getIndexById(flattenedTree, id) {\n  return flattenedTree.findIndex(function (item) {\n    return item.item.id === id;\n  });\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nimport { getTreePosition } from '../../utils/tree';\nimport { getDestinationPath, getSourcePath } from '../../utils/flat-tree';\n/*\n    Translates a drag&drop movement from an index based position to a relative (parent, index) position\n*/\n\nexport var calculateFinalDropPositions = function calculateFinalDropPositions(tree, flattenedTree, dragState) {\n  var source = dragState.source,\n      destination = dragState.destination,\n      combine = dragState.combine,\n      horizontalLevel = dragState.horizontalLevel;\n  var sourcePath = getSourcePath(flattenedTree, source.index);\n  var sourcePosition = getTreePosition(tree, sourcePath);\n\n  if (combine) {\n    return {\n      sourcePosition: sourcePosition,\n      destinationPosition: {\n        parentId: combine.draggableId\n      }\n    };\n  }\n\n  if (!destination) {\n    return {\n      sourcePosition: sourcePosition,\n      destinationPosition: undefined\n    };\n  }\n\n  var destinationPath = getDestinationPath(flattenedTree, source.index, destination.index, horizontalLevel);\n\n  var destinationPosition = _objectSpread({}, getTreePosition(tree, destinationPath));\n\n  return {\n    sourcePosition: sourcePosition,\n    destinationPosition: destinationPosition\n  };\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport { Component } from 'react';\nimport { isSamePath } from '../../utils/path';\nimport { sameProps } from '../../utils/react';\n\nvar TreeItem = /*#__PURE__*/function (_Component) {\n  _inherits(TreeItem, _Component);\n\n  var _super = _createSuper(TreeItem);\n\n  function TreeItem() {\n    var _this;\n\n    _classCallCheck(this, TreeItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"patchDraggableProps\", function (draggableProps, snapshot) {\n      var _this$props = _this.props,\n          path = _this$props.path,\n          offsetPerLevel = _this$props.offsetPerLevel;\n      var transitions = draggableProps.style && draggableProps.style.transition ? [draggableProps.style.transition] : [];\n\n      if (snapshot.dropAnimation) {\n        transitions.push( // @ts-ignore\n        \"padding-left \".concat(snapshot.dropAnimation.duration, \"s \").concat(snapshot.dropAnimation.curve));\n      }\n\n      var transition = transitions.join(', ');\n      return _objectSpread(_objectSpread({}, draggableProps), {}, {\n        style: _objectSpread(_objectSpread({}, draggableProps.style), {}, {\n          paddingLeft: (path.length - 1) * offsetPerLevel,\n          // @ts-ignore\n          transition: transition\n        })\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(TreeItem, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return !sameProps(this.props, nextProps, ['item', 'provided', 'snapshot', 'onCollapse', 'onExpand']) || !isSamePath(this.props.path, nextProps.path) || // also rerender tree item even if the item is not draggable, this allows draggable/nondraggable items to behave the same\n      this.props.provided.dragHandleProps === null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          item = _this$props2.item,\n          path = _this$props2.path,\n          _onExpand = _this$props2.onExpand,\n          _onCollapse = _this$props2.onCollapse,\n          renderItem = _this$props2.renderItem,\n          provided = _this$props2.provided,\n          snapshot = _this$props2.snapshot,\n          itemRef = _this$props2.itemRef;\n\n      var innerRef = function innerRef(el) {\n        itemRef(item.id, el);\n        provided.innerRef(el);\n      };\n\n      var finalProvided = {\n        draggableProps: this.patchDraggableProps(provided.draggableProps, snapshot),\n        dragHandleProps: provided.dragHandleProps,\n        innerRef: innerRef\n      };\n      return renderItem({\n        item: item,\n        depth: path.length - 1,\n        onExpand: function onExpand(itemId) {\n          return _onExpand(itemId, path);\n        },\n        onCollapse: function onCollapse(itemId) {\n          return _onCollapse(itemId, path);\n        },\n        provided: finalProvided,\n        snapshot: snapshot\n      });\n    }\n  }]);\n\n  return TreeItem;\n}(Component);\n\nexport { TreeItem as default };","export var sameProps = function sameProps(oldProps, newProps, props) {\n  return props.find(function (p) {\n    return oldProps[p] !== newProps[p];\n  }) === undefined;\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nvar DelayedFunction = /*#__PURE__*/function () {\n  function DelayedFunction(delay) {\n    _classCallCheck(this, DelayedFunction);\n\n    this.delay = delay;\n  }\n\n  _createClass(DelayedFunction, [{\n    key: \"start\",\n    value: function start(fn) {\n      this.stop();\n      this.timeoutId = window.setTimeout(fn, this.delay);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.timeoutId) {\n        clearTimeout(this.timeoutId);\n        this.timeoutId = undefined;\n      }\n    }\n  }]);\n\n  return DelayedFunction;\n}();\n\nexport { DelayedFunction as default };","import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component } from 'react';\nimport { Draggable, Droppable, DragDropContext } from 'react-beautiful-dnd-next';\nimport { getBox } from 'css-box-model';\nimport { calculateFinalDropPositions } from './Tree-utils';\nimport { noop } from '../../utils/handy';\nimport { flattenTree, mutateTree } from '../../utils/tree';\nimport TreeItem from '../TreeItem';\nimport { getDestinationPath, getItemById, getIndexById } from '../../utils/flat-tree';\nimport DelayedFunction from '../../utils/delayed-function';\n\nvar Tree = /*#__PURE__*/function (_Component) {\n  _inherits(Tree, _Component);\n\n  var _super = _createSuper(Tree);\n\n  function Tree() {\n    var _this;\n\n    _classCallCheck(this, Tree);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      flattenedTree: [],\n      draggedItemId: undefined\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"itemsElement\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"expandTimer\", new DelayedFunction(500));\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragStart\", function (result) {\n      var onDragStart = _this.props.onDragStart;\n      _this.dragState = {\n        source: result.source,\n        destination: result.source,\n        mode: result.mode\n      };\n\n      _this.setState({\n        draggedItemId: result.draggableId\n      });\n\n      if (onDragStart) {\n        onDragStart(result.draggableId);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragUpdate\", function (update) {\n      var onExpand = _this.props.onExpand;\n      var flattenedTree = _this.state.flattenedTree;\n\n      if (!_this.dragState) {\n        return;\n      }\n\n      _this.expandTimer.stop();\n\n      if (update.combine) {\n        var draggableId = update.combine.draggableId;\n        var item = getItemById(flattenedTree, draggableId);\n\n        if (item && _this.isExpandable(item)) {\n          _this.expandTimer.start(function () {\n            return onExpand(draggableId, item.path);\n          });\n        }\n      }\n\n      _this.dragState = _objectSpread(_objectSpread({}, _this.dragState), {}, {\n        destination: update.destination,\n        combine: update.combine\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDropAnimating\", function () {\n      _this.expandTimer.stop();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragEnd\", function (result) {\n      var _this$props = _this.props,\n          onDragEnd = _this$props.onDragEnd,\n          tree = _this$props.tree;\n      var flattenedTree = _this.state.flattenedTree;\n\n      _this.expandTimer.stop();\n\n      var finalDragState = _objectSpread(_objectSpread({}, _this.dragState), {}, {\n        source: result.source,\n        destination: result.destination,\n        combine: result.combine\n      });\n\n      _this.setState({\n        draggedItemId: undefined\n      });\n\n      var _calculateFinalDropPo = calculateFinalDropPositions(tree, flattenedTree, finalDragState),\n          sourcePosition = _calculateFinalDropPo.sourcePosition,\n          destinationPosition = _calculateFinalDropPo.destinationPosition;\n\n      onDragEnd(sourcePosition, destinationPosition);\n      _this.dragState = undefined;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onPointerMove\", function () {\n      if (_this.dragState) {\n        _this.dragState = _objectSpread(_objectSpread({}, _this.dragState), {}, {\n          horizontalLevel: _this.getDroppedLevel()\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"calculateEffectivePath\", function (flatItem, snapshot) {\n      var _this$state = _this.state,\n          flattenedTree = _this$state.flattenedTree,\n          draggedItemId = _this$state.draggedItemId;\n\n      if (_this.dragState && draggedItemId === flatItem.item.id && (_this.dragState.destination || _this.dragState.combine)) {\n        var _this$dragState = _this.dragState,\n            source = _this$dragState.source,\n            destination = _this$dragState.destination,\n            combine = _this$dragState.combine,\n            horizontalLevel = _this$dragState.horizontalLevel,\n            mode = _this$dragState.mode; // We only update the path when it's dragged by keyboard or drop is animated\n\n        if (mode === 'SNAP' || snapshot.isDropAnimating) {\n          if (destination) {\n            // Between two items\n            return getDestinationPath(flattenedTree, source.index, destination.index, horizontalLevel);\n          }\n\n          if (combine) {\n            // Hover on other item while dragging\n            return getDestinationPath(flattenedTree, source.index, getIndexById(flattenedTree, combine.draggableId), horizontalLevel);\n          }\n        }\n      }\n\n      return flatItem.path;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isExpandable\", function (item) {\n      return !!item.item.hasChildren && !item.item.isExpanded;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getDroppedLevel\", function () {\n      var offsetPerLevel = _this.props.offsetPerLevel;\n      var draggedItemId = _this.state.draggedItemId;\n\n      if (!_this.dragState || !_this.containerElement) {\n        return undefined;\n      }\n\n      var containerLeft = getBox(_this.containerElement).contentBox.left;\n      var itemElement = _this.itemsElement[draggedItemId];\n\n      if (itemElement) {\n        var currentLeft = getBox(itemElement).contentBox.left;\n        var relativeLeft = Math.max(currentLeft - containerLeft, 0);\n        return Math.floor((relativeLeft + offsetPerLevel / 2) / offsetPerLevel) + 1;\n      }\n\n      return undefined;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"patchDroppableProvided\", function (provided) {\n      return _objectSpread(_objectSpread({}, provided), {}, {\n        innerRef: function innerRef(el) {\n          _this.containerElement = el;\n          provided.innerRef(el);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setItemRef\", function (itemId, el) {\n      if (!!el) {\n        _this.itemsElement[itemId] = el;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderItems\", function () {\n      var flattenedTree = _this.state.flattenedTree;\n      return flattenedTree.map(_this.renderItem);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderItem\", function (flatItem, index) {\n      var isDragEnabled = _this.props.isDragEnabled; // If drag and drop is explicitly disabled for all items, render TreeItem directly with stubbed provided and snapshot\n\n      if (isDragEnabled === false) {\n        return _this.renderTreeItem({\n          flatItem: flatItem,\n          path: flatItem.path,\n          provided: {\n            draggableProps: {\n              'data-react-beautiful-dnd-draggable': ''\n            },\n            innerRef: function innerRef() {},\n            dragHandleProps: null\n          },\n          snapshot: {\n            isDragging: false,\n            isDropAnimating: false\n          }\n        });\n      }\n\n      var isDragDisabled = typeof isDragEnabled === 'function' ? !isDragEnabled(flatItem.item) : !isDragEnabled;\n      return /*#__PURE__*/React.createElement(Draggable, {\n        key: flatItem.item.id,\n        draggableId: flatItem.item.id.toString(),\n        index: index,\n        isDragDisabled: isDragDisabled\n      }, _this.renderDraggableItem(flatItem));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderDraggableItem\", function (flatItem) {\n      return function (provided, snapshot) {\n        var currentPath = _this.calculateEffectivePath(flatItem, snapshot);\n\n        if (snapshot.isDropAnimating) {\n          _this.onDropAnimating();\n        }\n\n        return _this.renderTreeItem({\n          flatItem: flatItem,\n          path: currentPath,\n          provided: provided,\n          snapshot: snapshot\n        });\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderTreeItem\", function (_ref) {\n      var flatItem = _ref.flatItem,\n          path = _ref.path,\n          provided = _ref.provided,\n          snapshot = _ref.snapshot;\n      var _this$props2 = _this.props,\n          renderItem = _this$props2.renderItem,\n          onExpand = _this$props2.onExpand,\n          onCollapse = _this$props2.onCollapse,\n          offsetPerLevel = _this$props2.offsetPerLevel;\n      return /*#__PURE__*/React.createElement(TreeItem, {\n        key: flatItem.item.id,\n        item: flatItem.item,\n        path: path,\n        onExpand: onExpand,\n        onCollapse: onCollapse,\n        renderItem: renderItem,\n        provided: provided,\n        snapshot: snapshot,\n        itemRef: _this.setItemRef,\n        offsetPerLevel: offsetPerLevel\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Tree, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var isNestingEnabled = this.props.isNestingEnabled;\n      var renderedItems = this.renderItems();\n      return /*#__PURE__*/React.createElement(DragDropContext, {\n        onDragStart: this.onDragStart,\n        onDragEnd: this.onDragEnd,\n        onDragUpdate: this.onDragUpdate\n      }, /*#__PURE__*/React.createElement(Droppable, {\n        droppableId: \"tree\",\n        isCombineEnabled: isNestingEnabled,\n        ignoreContainerClipping: true\n      }, function (provided) {\n        var finalProvided = _this2.patchDroppableProvided(provided);\n\n        return /*#__PURE__*/React.createElement(\"div\", _extends({\n          ref: finalProvided.innerRef,\n          style: {\n            pointerEvents: 'auto'\n          },\n          onTouchMove: _this2.onPointerMove,\n          onMouseMove: _this2.onPointerMove\n        }, finalProvided.droppableProps), renderedItems, provided.placeholder);\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var draggedItemId = state.draggedItemId;\n      var tree = props.tree;\n      var finalTree = Tree.closeParentIfNeeded(tree, draggedItemId);\n      var flattenedTree = flattenTree(finalTree);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        flattenedTree: flattenedTree\n      });\n    }\n  }, {\n    key: \"closeParentIfNeeded\",\n    value: function closeParentIfNeeded(tree, draggedItemId) {\n      if (!!draggedItemId) {\n        // Closing parent internally during dragging, because visually we can only move one item not a subtree\n        return mutateTree(tree, draggedItemId, {\n          isExpanded: false\n        });\n      }\n\n      return tree;\n    }\n  }]);\n\n  return Tree;\n}(Component);\n\n_defineProperty(Tree, \"defaultProps\", {\n  tree: {\n    children: []\n  },\n  onExpand: noop,\n  onCollapse: noop,\n  onDragStart: noop,\n  onDragEnd: noop,\n  renderItem: noop,\n  offsetPerLevel: 35,\n  isDragEnabled: false,\n  isNestingEnabled: false\n});\n\nexport { Tree as default };","var createDefinition = function createDefinition(propNames) {\n  return {\n    isEnabled: function isEnabled(props) {\n      return propNames.some(function (name) {\n        return !!props[name];\n      });\n    }\n  };\n};\n\nvar featureDefinitions = {\n  measureLayout: createDefinition([\"layout\", \"layoutId\", \"drag\"]),\n  animation: createDefinition([\"animate\", \"exit\", \"variants\", \"whileHover\", \"whileTap\", \"whileFocus\", \"whileDrag\", \"whileInView\"]),\n  exit: createDefinition([\"exit\"]),\n  drag: createDefinition([\"drag\", \"dragControls\"]),\n  focus: createDefinition([\"whileFocus\"]),\n  hover: createDefinition([\"whileHover\", \"onHoverStart\", \"onHoverEnd\"]),\n  tap: createDefinition([\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"]),\n  pan: createDefinition([\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"]),\n  inView: createDefinition([\"whileInView\", \"onViewportEnter\", \"onViewportLeave\"])\n};\n\nfunction loadFeatures(features) {\n  for (var key in features) {\n    if (features[key] === null) continue;\n\n    if (key === \"projectionNodeConstructor\") {\n      featureDefinitions.projectionNodeConstructor = features[key];\n    } else {\n      featureDefinitions[key].Component = features[key];\n    }\n  }\n}\n\nexport { featureDefinitions, loadFeatures };","import { createContext } from 'react';\nvar LazyContext = createContext({\n  strict: false\n});\nexport { LazyContext };","import { __assign } from 'tslib';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { featureDefinitions } from './definitions.mjs';\nimport { invariant } from 'hey-listen';\nimport { LazyContext } from '../../context/LazyContext.mjs';\nvar featureNames = Object.keys(featureDefinitions);\nvar numFeatures = featureNames.length;\n/**\n * Load features via renderless components based on the provided MotionProps.\n */\n\nfunction useFeatures(props, visualElement, preloadedFeatures) {\n  var features = [];\n  var lazyContext = useContext(LazyContext);\n  if (!visualElement) return null;\n  /**\n   * If we're in development mode, check to make sure we're not rendering a motion component\n   * as a child of LazyMotion, as this will break the file-size benefits of using it.\n   */\n\n  if (process.env.NODE_ENV !== \"production\" && preloadedFeatures && lazyContext.strict) {\n    invariant(false, \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\");\n  }\n\n  for (var i = 0; i < numFeatures; i++) {\n    var name_1 = featureNames[i];\n    var _a = featureDefinitions[name_1],\n        isEnabled = _a.isEnabled,\n        Component = _a.Component;\n    /**\n     * It might be possible in the future to use this moment to\n     * dynamically request functionality. In initial tests this\n     * was producing a lot of duplication amongst bundles.\n     */\n\n    if (isEnabled(props) && Component) {\n      features.push(React.createElement(Component, __assign({\n        key: name_1\n      }, props, {\n        visualElement: visualElement\n      })));\n    }\n  }\n\n  return features;\n}\n\nexport { useFeatures };","import { createContext } from 'react';\n/**\n * @public\n */\n\nvar MotionConfigContext = createContext({\n  transformPagePoint: function transformPagePoint(p) {\n    return p;\n  },\n  isStatic: false\n});\nexport { MotionConfigContext };","import { createContext, useContext } from 'react';\nvar MotionContext = createContext({});\n\nfunction useVisualElementContext() {\n  return useContext(MotionContext).visualElement;\n}\n\nexport { MotionContext, useVisualElementContext };","import { createContext } from 'react';\n/**\n * @public\n */\n\nvar PresenceContext = createContext(null);\nexport { PresenceContext };","var isBrowser = typeof window !== \"undefined\";\nexport { isBrowser };","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.mjs';\nvar useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\nexport { useIsomorphicLayoutEffect };","import { useContext, useRef, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useVisualElementContext } from '../../context/MotionContext/index.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { LazyContext } from '../../context/LazyContext.mjs';\n\nfunction useVisualElement(Component, visualState, props, createVisualElement) {\n  var lazyContext = useContext(LazyContext);\n  var parent = useVisualElementContext();\n  var presenceContext = useContext(PresenceContext);\n  var visualElementRef = useRef(undefined);\n  /**\n   * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n   */\n\n  if (!createVisualElement) createVisualElement = lazyContext.renderer;\n\n  if (!visualElementRef.current && createVisualElement) {\n    visualElementRef.current = createVisualElement(Component, {\n      visualState: visualState,\n      parent: parent,\n      props: props,\n      presenceId: presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id,\n      blockInitialAnimation: (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false\n    });\n  }\n\n  var visualElement = visualElementRef.current;\n  useIsomorphicLayoutEffect(function () {\n    visualElement === null || visualElement === void 0 ? void 0 : visualElement.syncRender();\n  });\n  useEffect(function () {\n    var _a;\n\n    (_a = visualElement === null || visualElement === void 0 ? void 0 : visualElement.animationState) === null || _a === void 0 ? void 0 : _a.animateChanges();\n  });\n  useIsomorphicLayoutEffect(function () {\n    return function () {\n      return visualElement === null || visualElement === void 0 ? void 0 : visualElement.notifyUnmount();\n    };\n  }, []);\n  return visualElement;\n}\n\nexport { useVisualElement };","function isRefObject(ref) {\n  return typeof ref === \"object\" && Object.prototype.hasOwnProperty.call(ref, \"current\");\n}\n\nexport { isRefObject };","/**\n * Decides if the supplied variable is an array of variant labels\n */\nfunction isVariantLabels(v) {\n  return Array.isArray(v);\n}\n/**\n * Decides if the supplied variable is variant label\n */\n\n\nfunction isVariantLabel(v) {\n  return typeof v === \"string\" || isVariantLabels(v);\n}\n/**\n * Creates an object containing the latest state of every MotionValue on a VisualElement\n */\n\n\nfunction getCurrent(visualElement) {\n  var current = {};\n  visualElement.forEachValue(function (value, key) {\n    return current[key] = value.get();\n  });\n  return current;\n}\n/**\n * Creates an object containing the latest velocity of every MotionValue on a VisualElement\n */\n\n\nfunction getVelocity(visualElement) {\n  var velocity = {};\n  visualElement.forEachValue(function (value, key) {\n    return velocity[key] = value.getVelocity();\n  });\n  return velocity;\n}\n\nfunction resolveVariantFromProps(props, definition, custom, currentValues, currentVelocity) {\n  var _a;\n\n  if (currentValues === void 0) {\n    currentValues = {};\n  }\n\n  if (currentVelocity === void 0) {\n    currentVelocity = {};\n  }\n  /**\n   * If the variant definition is a function, resolve.\n   */\n\n\n  if (typeof definition === \"function\") {\n    definition = definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity);\n  }\n  /**\n   * If the variant definition is a variant label, or\n   * the function returned a variant label, resolve.\n   */\n\n\n  if (typeof definition === \"string\") {\n    definition = (_a = props.variants) === null || _a === void 0 ? void 0 : _a[definition];\n  }\n  /**\n   * At this point we've resolved both functions and variant labels,\n   * but the resolved variant label might itself have been a function.\n   * If so, resolve. This can only have returned a valid target object.\n   */\n\n\n  if (typeof definition === \"function\") {\n    definition = definition(custom !== null && custom !== void 0 ? custom : props.custom, currentValues, currentVelocity);\n  }\n\n  return definition;\n}\n\nfunction resolveVariant(visualElement, definition, custom) {\n  var props = visualElement.getProps();\n  return resolveVariantFromProps(props, definition, custom !== null && custom !== void 0 ? custom : props.custom, getCurrent(visualElement), getVelocity(visualElement));\n}\n\nfunction checkIfControllingVariants(props) {\n  var _a;\n\n  return typeof ((_a = props.animate) === null || _a === void 0 ? void 0 : _a.start) === \"function\" || isVariantLabel(props.initial) || isVariantLabel(props.animate) || isVariantLabel(props.whileHover) || isVariantLabel(props.whileDrag) || isVariantLabel(props.whileTap) || isVariantLabel(props.whileFocus) || isVariantLabel(props.exit);\n}\n\nfunction checkIfVariantNode(props) {\n  return Boolean(checkIfControllingVariants(props) || props.variants);\n}\n\nexport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel, isVariantLabels, resolveVariant, resolveVariantFromProps };","import { useMemo, useContext } from 'react';\nimport { MotionContext } from './index.mjs';\nimport { getCurrentTreeVariants } from './utils.mjs';\n\nfunction useCreateMotionContext(props) {\n  var _a = getCurrentTreeVariants(props, useContext(MotionContext)),\n      initial = _a.initial,\n      animate = _a.animate;\n\n  return useMemo(function () {\n    return {\n      initial: initial,\n      animate: animate\n    };\n  }, [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)]);\n}\n\nfunction variantLabelsAsDependency(prop) {\n  return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\nexport { useCreateMotionContext };","import { checkIfControllingVariants, isVariantLabel } from '../../render/utils/variants.mjs';\n\nfunction getCurrentTreeVariants(props, context) {\n  if (checkIfControllingVariants(props)) {\n    var initial = props.initial,\n        animate = props.animate;\n    return {\n      initial: initial === false || isVariantLabel(initial) ? initial : undefined,\n      animate: isVariantLabel(animate) ? animate : undefined\n    };\n  }\n\n  return props.inherit !== false ? context : {};\n}\n\nexport { getCurrentTreeVariants };","import { useRef } from 'react';\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\n\nfunction useConstant(init) {\n  var ref = useRef(null);\n\n  if (ref.current === null) {\n    ref.current = init();\n  }\n\n  return ref.current;\n}\n\nexport { useConstant };","var defaultTimestep = 1 / 60 * 1000;\nvar getCurrentTime = typeof performance !== \"undefined\" ? function () {\n  return performance.now();\n} : function () {\n  return Date.now();\n};\nvar onNextFrame = typeof window !== \"undefined\" ? function (callback) {\n  return window.requestAnimationFrame(callback);\n} : function (callback) {\n  return setTimeout(function () {\n    return callback(getCurrentTime());\n  }, defaultTimestep);\n};\nexport { defaultTimestep, onNextFrame };","import { onNextFrame, defaultTimestep } from './on-next-frame.mjs';\nimport { createRenderStep } from './create-render-step.mjs';\nvar maxElapsed = 40;\nvar useDefaultElapsed = true;\nvar runNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n  delta: 0,\n  timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar steps = stepsOrder.reduce(function (acc, key) {\n  acc[key] = createRenderStep(function () {\n    return runNextFrame = true;\n  });\n  return acc;\n}, {});\nvar sync = stepsOrder.reduce(function (acc, key) {\n  var step = steps[key];\n\n  acc[key] = function (process) {\n    var keepAlive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (!runNextFrame) startLoop();\n    return step.schedule(process, keepAlive, immediate);\n  };\n\n  return acc;\n}, {});\nvar cancelSync = stepsOrder.reduce(function (acc, key) {\n  acc[key] = steps[key].cancel;\n  return acc;\n}, {});\nvar flushSync = stepsOrder.reduce(function (acc, key) {\n  acc[key] = function () {\n    return steps[key].process(frame);\n  };\n\n  return acc;\n}, {});\n\nvar processStep = function processStep(stepId) {\n  return steps[stepId].process(frame);\n};\n\nvar processFrame = function processFrame(timestamp) {\n  runNextFrame = false;\n  frame.delta = useDefaultElapsed ? defaultTimestep : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n  frame.timestamp = timestamp;\n  isProcessing = true;\n  stepsOrder.forEach(processStep);\n  isProcessing = false;\n\n  if (runNextFrame) {\n    useDefaultElapsed = false;\n    onNextFrame(processFrame);\n  }\n};\n\nvar startLoop = function startLoop() {\n  runNextFrame = true;\n  useDefaultElapsed = true;\n  if (!isProcessing) onNextFrame(processFrame);\n};\n\nvar getFrameData = function getFrameData() {\n  return frame;\n};\n\nexport default sync;\nexport { cancelSync, flushSync, getFrameData };","function createRenderStep(runNextFrame) {\n  var toRun = [];\n  var toRunNextFrame = [];\n  var numToRun = 0;\n  var isProcessing = false;\n  var flushNextFrame = false;\n  var toKeepAlive = new WeakSet();\n  var step = {\n    schedule: function schedule(callback) {\n      var keepAlive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var addToCurrentFrame = immediate && isProcessing;\n      var buffer = addToCurrentFrame ? toRun : toRunNextFrame;\n      if (keepAlive) toKeepAlive.add(callback);\n\n      if (buffer.indexOf(callback) === -1) {\n        buffer.push(callback);\n        if (addToCurrentFrame && isProcessing) numToRun = toRun.length;\n      }\n\n      return callback;\n    },\n    cancel: function cancel(callback) {\n      var index = toRunNextFrame.indexOf(callback);\n      if (index !== -1) toRunNextFrame.splice(index, 1);\n      toKeepAlive.delete(callback);\n    },\n    process: function process(frameData) {\n      if (isProcessing) {\n        flushNextFrame = true;\n        return;\n      }\n\n      isProcessing = true;\n      var _ref = [toRunNextFrame, toRun];\n      toRun = _ref[0];\n      toRunNextFrame = _ref[1];\n      toRunNextFrame.length = 0;\n      numToRun = toRun.length;\n\n      if (numToRun) {\n        for (var i = 0; i < numToRun; i++) {\n          var callback = toRun[i];\n          callback(frameData);\n\n          if (toKeepAlive.has(callback)) {\n            step.schedule(callback);\n            runNextFrame();\n          }\n        }\n      }\n\n      isProcessing = false;\n\n      if (flushNextFrame) {\n        flushNextFrame = false;\n        step.process(frameData);\n      }\n    }\n  };\n  return step;\n}\n\nexport { createRenderStep };","import { __read } from 'tslib';\n\nfunction addUniqueItem(arr, item) {\n  arr.indexOf(item) === -1 && arr.push(item);\n}\n\nfunction removeItem(arr, item) {\n  var index = arr.indexOf(item);\n  index > -1 && arr.splice(index, 1);\n} // Adapted from array-move\n\n\nfunction moveItem(_a, fromIndex, toIndex) {\n  var _b = __read(_a),\n      arr = _b.slice(0);\n\n  var startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\n\n  if (startIndex >= 0 && startIndex < arr.length) {\n    var endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\n\n    var _c = __read(arr.splice(fromIndex, 1), 1),\n        item = _c[0];\n\n    arr.splice(endIndex, 0, item);\n  }\n\n  return arr;\n}\n\nexport { addUniqueItem, moveItem, removeItem };","import { addUniqueItem, removeItem } from './array.mjs';\n\nvar SubscriptionManager =\n/** @class */\nfunction () {\n  function SubscriptionManager() {\n    this.subscriptions = [];\n  }\n\n  SubscriptionManager.prototype.add = function (handler) {\n    var _this = this;\n\n    addUniqueItem(this.subscriptions, handler);\n    return function () {\n      return removeItem(_this.subscriptions, handler);\n    };\n  };\n\n  SubscriptionManager.prototype.notify = function (a, b, c) {\n    var numSubscriptions = this.subscriptions.length;\n    if (!numSubscriptions) return;\n\n    if (numSubscriptions === 1) {\n      /**\n       * If there's only a single handler we can just call it without invoking a loop.\n       */\n      this.subscriptions[0](a, b, c);\n    } else {\n      for (var i = 0; i < numSubscriptions; i++) {\n        /**\n         * Check whether the handler exists before firing as it's possible\n         * the subscriptions were modified during this loop running.\n         */\n        var handler = this.subscriptions[i];\n        handler && handler(a, b, c);\n      }\n    }\n  };\n\n  SubscriptionManager.prototype.getSize = function () {\n    return this.subscriptions.length;\n  };\n\n  SubscriptionManager.prototype.clear = function () {\n    this.subscriptions.length = 0;\n  };\n\n  return SubscriptionManager;\n}();\n\nexport { SubscriptionManager };","import sync, { getFrameData } from 'framesync';\nimport { velocityPerSecond } from 'popmotion';\nimport { SubscriptionManager } from '../utils/subscription-manager.mjs';\n\nvar isFloat = function isFloat(value) {\n  return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\n\n\nvar MotionValue =\n/** @class */\nfunction () {\n  /**\n   * @param init - The initiating value\n   * @param config - Optional configuration options\n   *\n   * -  `transformer`: A function to transform incoming values with.\n   *\n   * @internal\n   */\n  function MotionValue(init) {\n    var _this = this;\n    /**\n     * Duration, in milliseconds, since last updating frame.\n     *\n     * @internal\n     */\n\n\n    this.timeDelta = 0;\n    /**\n     * Timestamp of the last time this `MotionValue` was updated.\n     *\n     * @internal\n     */\n\n    this.lastUpdated = 0;\n    /**\n     * Functions to notify when the `MotionValue` updates.\n     *\n     * @internal\n     */\n\n    this.updateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the velocity updates.\n     *\n     * @internal\n     */\n\n    this.velocityUpdateSubscribers = new SubscriptionManager();\n    /**\n     * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n     *\n     * @internal\n     */\n\n    this.renderSubscribers = new SubscriptionManager();\n    /**\n     * Tracks whether this value can output a velocity. Currently this is only true\n     * if the value is numerical, but we might be able to widen the scope here and support\n     * other value types.\n     *\n     * @internal\n     */\n\n    this.canTrackVelocity = false;\n\n    this.updateAndNotify = function (v, render) {\n      if (render === void 0) {\n        render = true;\n      }\n\n      _this.prev = _this.current;\n      _this.current = v; // Update timestamp\n\n      var _a = getFrameData(),\n          delta = _a.delta,\n          timestamp = _a.timestamp;\n\n      if (_this.lastUpdated !== timestamp) {\n        _this.timeDelta = delta;\n        _this.lastUpdated = timestamp;\n        sync.postRender(_this.scheduleVelocityCheck);\n      } // Update update subscribers\n\n\n      if (_this.prev !== _this.current) {\n        _this.updateSubscribers.notify(_this.current);\n      } // Update velocity subscribers\n\n\n      if (_this.velocityUpdateSubscribers.getSize()) {\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      } // Update render subscribers\n\n\n      if (render) {\n        _this.renderSubscribers.notify(_this.current);\n      }\n    };\n    /**\n     * Schedule a velocity check for the next frame.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n\n\n    this.scheduleVelocityCheck = function () {\n      return sync.postRender(_this.velocityCheck);\n    };\n    /**\n     * Updates `prev` with `current` if the value hasn't been updated this frame.\n     * This ensures velocity calculations return `0`.\n     *\n     * This is an instanced and bound function to prevent generating a new\n     * function once per frame.\n     *\n     * @internal\n     */\n\n\n    this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n\n        _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n      }\n    };\n\n    this.hasAnimated = false;\n    this.prev = this.current = init;\n    this.canTrackVelocity = isFloat(this.current);\n  }\n  /**\n   * Adds a function that will be notified when the `MotionValue` is updated.\n   *\n   * It returns a function that, when called, will cancel the subscription.\n   *\n   * When calling `onChange` inside a React component, it should be wrapped with the\n   * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n   * from the `useEffect` function to ensure you don't add duplicate subscribers..\n   *\n   * ```jsx\n   * export const MyComponent = () => {\n   *   const x = useMotionValue(0)\n   *   const y = useMotionValue(0)\n   *   const opacity = useMotionValue(1)\n   *\n   *   useEffect(() => {\n   *     function updateOpacity() {\n   *       const maxXY = Math.max(x.get(), y.get())\n   *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n   *       opacity.set(newOpacity)\n   *     }\n   *\n   *     const unsubscribeX = x.onChange(updateOpacity)\n   *     const unsubscribeY = y.onChange(updateOpacity)\n   *\n   *     return () => {\n   *       unsubscribeX()\n   *       unsubscribeY()\n   *     }\n   *   }, [])\n   *\n   *   return <motion.div style={{ x }} />\n   * }\n   * ```\n   *\n   * @internalremarks\n   *\n   * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n   *\n   * ```jsx\n   * useOnChange(x, () => {})\n   * ```\n   *\n   * @param subscriber - A function that receives the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.onChange = function (subscription) {\n    return this.updateSubscribers.add(subscription);\n  };\n\n  MotionValue.prototype.clearListeners = function () {\n    this.updateSubscribers.clear();\n  };\n  /**\n   * Adds a function that will be notified when the `MotionValue` requests a render.\n   *\n   * @param subscriber - A function that's provided the latest value.\n   * @returns A function that, when called, will cancel this subscription.\n   *\n   * @internal\n   */\n\n\n  MotionValue.prototype.onRenderRequest = function (subscription) {\n    // Render immediately\n    subscription(this.get());\n    return this.renderSubscribers.add(subscription);\n  };\n  /**\n   * Attaches a passive effect to the `MotionValue`.\n   *\n   * @internal\n   */\n\n\n  MotionValue.prototype.attach = function (passiveEffect) {\n    this.passiveEffect = passiveEffect;\n  };\n  /**\n   * Sets the state of the `MotionValue`.\n   *\n   * @remarks\n   *\n   * ```jsx\n   * const x = useMotionValue(0)\n   * x.set(10)\n   * ```\n   *\n   * @param latest - Latest value to set.\n   * @param render - Whether to notify render subscribers. Defaults to `true`\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.set = function (v, render) {\n    if (render === void 0) {\n      render = true;\n    }\n\n    if (!render || !this.passiveEffect) {\n      this.updateAndNotify(v, render);\n    } else {\n      this.passiveEffect(v, this.updateAndNotify);\n    }\n  };\n  /**\n   * Returns the latest state of `MotionValue`\n   *\n   * @returns - The latest state of `MotionValue`\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.get = function () {\n    return this.current;\n  };\n  /**\n   * @public\n   */\n\n\n  MotionValue.prototype.getPrevious = function () {\n    return this.prev;\n  };\n  /**\n   * Returns the latest velocity of `MotionValue`\n   *\n   * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.getVelocity = function () {\n    // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n    return this.canTrackVelocity ? // These casts could be avoided if parseFloat would be typed better\n    velocityPerSecond(parseFloat(this.current) - parseFloat(this.prev), this.timeDelta) : 0;\n  };\n  /**\n   * Registers a new animation to control this `MotionValue`. Only one\n   * animation can drive a `MotionValue` at one time.\n   *\n   * ```jsx\n   * value.start()\n   * ```\n   *\n   * @param animation - A function that starts the provided animation\n   *\n   * @internal\n   */\n\n\n  MotionValue.prototype.start = function (animation) {\n    var _this = this;\n\n    this.stop();\n    return new Promise(function (resolve) {\n      _this.hasAnimated = true;\n      _this.stopAnimation = animation(resolve);\n    }).then(function () {\n      return _this.clearAnimation();\n    });\n  };\n  /**\n   * Stop the currently active animation.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.stop = function () {\n    if (this.stopAnimation) this.stopAnimation();\n    this.clearAnimation();\n  };\n  /**\n   * Returns `true` if this value is currently animating.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.isAnimating = function () {\n    return !!this.stopAnimation;\n  };\n\n  MotionValue.prototype.clearAnimation = function () {\n    this.stopAnimation = null;\n  };\n  /**\n   * Destroy and clean up subscribers to this `MotionValue`.\n   *\n   * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n   * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n   * created a `MotionValue` via the `motionValue` function.\n   *\n   * @public\n   */\n\n\n  MotionValue.prototype.destroy = function () {\n    this.updateSubscribers.clear();\n    this.renderSubscribers.clear();\n    this.stop();\n  };\n\n  return MotionValue;\n}();\n/**\n * @internal\n */\n\n\nfunction motionValue(init) {\n  return new MotionValue(init);\n}\n\nexport { MotionValue, motionValue };","var isMotionValue = function isMotionValue(value) {\n  return Boolean(value !== null && typeof value === \"object\" && value.getVelocity);\n};\n\nexport { isMotionValue };","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nvar secondsToMilliseconds = function secondsToMilliseconds(seconds) {\n  return seconds * 1000;\n};\n\nexport { secondsToMilliseconds };","import { __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { cubicBezier, linear, easeIn, easeInOut, easeOut, circIn, circInOut, circOut, backIn, backInOut, backOut, anticipate, bounceIn, bounceInOut, bounceOut } from 'popmotion';\nvar easingLookup = {\n  linear: linear,\n  easeIn: easeIn,\n  easeInOut: easeInOut,\n  easeOut: easeOut,\n  circIn: circIn,\n  circInOut: circInOut,\n  circOut: circOut,\n  backIn: backIn,\n  backInOut: backInOut,\n  backOut: backOut,\n  anticipate: anticipate,\n  bounceIn: bounceIn,\n  bounceInOut: bounceInOut,\n  bounceOut: bounceOut\n};\n\nvar easingDefinitionToFunction = function easingDefinitionToFunction(definition) {\n  if (Array.isArray(definition)) {\n    // If cubic bezier definition, create bezier curve\n    invariant(definition.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n\n    var _a = __read(definition, 4),\n        x1 = _a[0],\n        y1 = _a[1],\n        x2 = _a[2],\n        y2 = _a[3];\n\n    return cubicBezier(x1, y1, x2, y2);\n  } else if (typeof definition === \"string\") {\n    // Else lookup from table\n    invariant(easingLookup[definition] !== undefined, \"Invalid easing type '\".concat(definition, \"'\"));\n    return easingLookup[definition];\n  }\n\n  return definition;\n};\n\nvar isEasingArray = function isEasingArray(ease) {\n  return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { easingDefinitionToFunction, isEasingArray };","import { complex } from 'style-value-types';\n/**\n * Check if a value is animatable. Examples:\n *\n * ✅: 100, \"100px\", \"#fff\"\n * ❌: \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\n\nvar isAnimatable = function isAnimatable(key, value) {\n  // If the list of keys tat might be non-animatable grows, replace with Set\n  if (key === \"zIndex\") return false; // If it's a number or a keyframes array, we can animate it. We might at some point\n  // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n  // but for now lets leave it like this for performance reasons\n\n  if (typeof value === \"number\" || Array.isArray(value)) return true;\n\n  if (typeof value === \"string\" && // It's animatable if we have a string\n  complex.test(value) && // And it contains numbers and/or colors\n  !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n  ) {\n    return true;\n  }\n\n  return false;\n};\n\nexport { isAnimatable };","var isKeyframesTarget = function isKeyframesTarget(v) {\n  return Array.isArray(v);\n};\n\nexport { isKeyframesTarget };","import { __assign } from 'tslib';\nimport { isKeyframesTarget } from './is-keyframes-target.mjs';\n\nvar underDampedSpring = function underDampedSpring() {\n  return {\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restSpeed: 10\n  };\n};\n\nvar criticallyDampedSpring = function criticallyDampedSpring(to) {\n  return {\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 2 * Math.sqrt(550) : 30,\n    restSpeed: 10\n  };\n};\n\nvar linearTween = function linearTween() {\n  return {\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3\n  };\n};\n\nvar keyframes = function keyframes(values) {\n  return {\n    type: \"keyframes\",\n    duration: 0.8,\n    values: values\n  };\n};\n\nvar defaultTransitions = {\n  x: underDampedSpring,\n  y: underDampedSpring,\n  z: underDampedSpring,\n  rotate: underDampedSpring,\n  rotateX: underDampedSpring,\n  rotateY: underDampedSpring,\n  rotateZ: underDampedSpring,\n  scaleX: criticallyDampedSpring,\n  scaleY: criticallyDampedSpring,\n  scale: criticallyDampedSpring,\n  opacity: linearTween,\n  backgroundColor: linearTween,\n  color: linearTween,\n  default: criticallyDampedSpring\n};\n\nvar getDefaultTransition = function getDefaultTransition(valueKey, to) {\n  var transitionFactory;\n\n  if (isKeyframesTarget(to)) {\n    transitionFactory = keyframes;\n  } else {\n    transitionFactory = defaultTransitions[valueKey] || defaultTransitions.default;\n  }\n\n  return __assign({\n    to: to\n  }, transitionFactory(to));\n};\n\nexport { criticallyDampedSpring, getDefaultTransition, linearTween, underDampedSpring };","import { __assign } from 'tslib';\nimport { number } from 'style-value-types';\n\nvar int = __assign(__assign({}, number), {\n  transform: Math.round\n});\n\nexport { int };","import { px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { int } from './type-int.mjs';\nvar numberValueTypes = {\n  // Border props\n  borderWidth: px,\n  borderTopWidth: px,\n  borderRightWidth: px,\n  borderBottomWidth: px,\n  borderLeftWidth: px,\n  borderRadius: px,\n  radius: px,\n  borderTopLeftRadius: px,\n  borderTopRightRadius: px,\n  borderBottomRightRadius: px,\n  borderBottomLeftRadius: px,\n  // Positioning props\n  width: px,\n  maxWidth: px,\n  height: px,\n  maxHeight: px,\n  size: px,\n  top: px,\n  right: px,\n  bottom: px,\n  left: px,\n  // Spacing props\n  padding: px,\n  paddingTop: px,\n  paddingRight: px,\n  paddingBottom: px,\n  paddingLeft: px,\n  margin: px,\n  marginTop: px,\n  marginRight: px,\n  marginBottom: px,\n  marginLeft: px,\n  // Transform props\n  rotate: degrees,\n  rotateX: degrees,\n  rotateY: degrees,\n  rotateZ: degrees,\n  scale: scale,\n  scaleX: scale,\n  scaleY: scale,\n  scaleZ: scale,\n  skew: degrees,\n  skewX: degrees,\n  skewY: degrees,\n  distance: px,\n  translateX: px,\n  translateY: px,\n  translateZ: px,\n  x: px,\n  y: px,\n  z: px,\n  perspective: px,\n  transformPerspective: px,\n  opacity: alpha,\n  originX: progressPercentage,\n  originY: progressPercentage,\n  originZ: px,\n  // Misc\n  zIndex: int,\n  // SVG\n  fillOpacity: alpha,\n  strokeOpacity: alpha,\n  numOctaves: int\n};\nexport { numberValueTypes };","import { __assign } from 'tslib';\nimport { color, filter } from 'style-value-types';\nimport { numberValueTypes } from './number.mjs';\n/**\n * A map of default value types for common values\n */\n\nvar defaultValueTypes = __assign(__assign({}, numberValueTypes), {\n  // Color props\n  color: color,\n  backgroundColor: color,\n  outlineColor: color,\n  fill: color,\n  stroke: color,\n  // Border props\n  borderColor: color,\n  borderTopColor: color,\n  borderRightColor: color,\n  borderBottomColor: color,\n  borderLeftColor: color,\n  filter: filter,\n  WebkitFilter: filter\n});\n/**\n * Gets the default ValueType for the provided value key\n */\n\n\nvar getDefaultValueType = function getDefaultValueType(key) {\n  return defaultValueTypes[key];\n};\n\nexport { defaultValueTypes, getDefaultValueType };","import { filter, complex } from 'style-value-types';\nimport { getDefaultValueType } from './defaults.mjs';\n\nfunction getAnimatableNone(key, value) {\n  var _a;\n\n  var defaultValueType = getDefaultValueType(key);\n  if (defaultValueType !== filter) defaultValueType = complex; // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n\n  return (_a = defaultValueType.getAnimatableNone) === null || _a === void 0 ? void 0 : _a.call(defaultValueType, value);\n}\n\nexport { getAnimatableNone };","var instantAnimationState = {\n  current: false\n};\nexport { instantAnimationState };","import { isKeyframesTarget } from '../animation/utils/is-keyframes-target.mjs';\n\nvar isCustomValue = function isCustomValue(v) {\n  return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\n\nvar resolveFinalValueInKeyframes = function resolveFinalValueInKeyframes(v) {\n  // TODO maybe throw if v.length - 1 is placeholder token?\n  return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\nexport { isCustomValue, resolveFinalValueInKeyframes };","import { __assign, __rest, __spreadArray, __read } from 'tslib';\nimport { inertia, animate } from 'popmotion';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.mjs';\nimport { isEasingArray, easingDefinitionToFunction } from './easing.mjs';\nimport { isAnimatable } from './is-animatable.mjs';\nimport { getDefaultTransition } from './default-transitions.mjs';\nimport { warning } from 'hey-listen';\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.mjs';\nimport { instantAnimationState } from '../../utils/use-instant-transition-state.mjs';\nimport { resolveFinalValueInKeyframes } from '../../utils/resolve-value.mjs';\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\n\nfunction isTransitionDefined(_a) {\n  _a.when;\n  _a.delay;\n  _a.delayChildren;\n  _a.staggerChildren;\n  _a.staggerDirection;\n  _a.repeat;\n  _a.repeatType;\n  _a.repeatDelay;\n  _a.from;\n\n  var transition = __rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n\n  return !!Object.keys(transition).length;\n}\n\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\n\nfunction convertTransitionToAnimationOptions(_a) {\n  var ease = _a.ease,\n      times = _a.times,\n      yoyo = _a.yoyo,\n      flip = _a.flip,\n      loop = _a.loop,\n      transition = __rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n\n  var options = __assign({}, transition);\n\n  if (times) options[\"offset\"] = times;\n  /**\n   * Convert any existing durations from seconds to milliseconds\n   */\n\n  if (transition.duration) options[\"duration\"] = secondsToMilliseconds(transition.duration);\n  if (transition.repeatDelay) options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n  /**\n   * Map easing names to Popmotion's easing functions\n   */\n\n  if (ease) {\n    options[\"ease\"] = isEasingArray(ease) ? ease.map(easingDefinitionToFunction) : easingDefinitionToFunction(ease);\n  }\n  /**\n   * Support legacy transition API\n   */\n\n\n  if (transition.type === \"tween\") options.type = \"keyframes\";\n  /**\n   * TODO: These options are officially removed from the API.\n   */\n\n  if (yoyo || loop || flip) {\n    warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n    legacyRepeatWarning = true;\n\n    if (yoyo) {\n      options.repeatType = \"reverse\";\n    } else if (loop) {\n      options.repeatType = \"loop\";\n    } else if (flip) {\n      options.repeatType = \"mirror\";\n    }\n\n    options.repeat = loop || yoyo || flip || transition.repeat;\n  }\n  /**\n   * TODO: Popmotion 9 has the ability to automatically detect whether to use\n   * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n   * It'd be good to introduce a similar thing here.\n   */\n\n\n  if (transition.type !== \"spring\") options.type = \"keyframes\";\n  return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\n\n\nfunction getDelayFromTransition(transition, key) {\n  var _a, _b;\n\n  var valueTransition = getValueTransition(transition, key) || {};\n  return (_b = (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : transition.delay) !== null && _b !== void 0 ? _b : 0;\n}\n\nfunction hydrateKeyframes(options) {\n  if (Array.isArray(options.to) && options.to[0] === null) {\n    options.to = __spreadArray([], __read(options.to), false);\n    options.to[0] = options.from;\n  }\n\n  return options;\n}\n\nfunction getPopmotionAnimationOptions(transition, options, key) {\n  var _a;\n\n  if (Array.isArray(options.to)) {\n    (_a = transition.duration) !== null && _a !== void 0 ? _a : transition.duration = 0.8;\n  }\n\n  hydrateKeyframes(options);\n  /**\n   * Get a default transition if none is determined to be defined.\n   */\n\n  if (!isTransitionDefined(transition)) {\n    transition = __assign(__assign({}, transition), getDefaultTransition(key, options.to));\n  }\n\n  return __assign(__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\n\n\nfunction getAnimation(key, value, target, transition, onComplete) {\n  var _a;\n\n  var valueTransition = getValueTransition(transition, key);\n  var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n  var isTargetAnimatable = isAnimatable(key, target);\n\n  if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n    /**\n     * If we're trying to animate from \"none\", try and get an animatable version\n     * of the target. This could be improved to work both ways.\n     */\n    origin = getAnimatableNone(key, target);\n  } else if (isZero(origin) && typeof target === \"string\") {\n    origin = getZeroUnit(target);\n  } else if (!Array.isArray(target) && isZero(target) && typeof origin === \"string\") {\n    target = getZeroUnit(origin);\n  }\n\n  var isOriginAnimatable = isAnimatable(key, origin);\n  warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \".concat(key, \" from \\\"\").concat(origin, \"\\\" to \\\"\").concat(target, \"\\\". \").concat(origin, \" is not an animatable value - to enable this animation set \").concat(origin, \" to a value animatable to \").concat(target, \" via the `style` property.\"));\n\n  function start() {\n    var options = {\n      from: origin,\n      to: target,\n      velocity: value.getVelocity(),\n      onComplete: onComplete,\n      onUpdate: function onUpdate(v) {\n        return value.set(v);\n      }\n    };\n    return valueTransition.type === \"inertia\" || valueTransition.type === \"decay\" ? inertia(__assign(__assign({}, options), valueTransition)) : animate(__assign(__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), {\n      onUpdate: function onUpdate(v) {\n        var _a;\n\n        options.onUpdate(v);\n        (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n      },\n      onComplete: function onComplete() {\n        var _a;\n\n        options.onComplete();\n        (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n      }\n    }));\n  }\n\n  function set() {\n    var _a, _b;\n\n    var finalTarget = resolveFinalValueInKeyframes(target);\n    value.set(finalTarget);\n    onComplete();\n    (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, finalTarget);\n    (_b = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _b === void 0 ? void 0 : _b.call(valueTransition);\n    return {\n      stop: function stop() {}\n    };\n  }\n\n  return !isOriginAnimatable || !isTargetAnimatable || valueTransition.type === false ? set : start;\n}\n\nfunction isZero(value) {\n  return value === 0 || typeof value === \"string\" && parseFloat(value) === 0 && value.indexOf(\" \") === -1;\n}\n\nfunction getZeroUnit(potentialUnitType) {\n  return typeof potentialUnitType === \"number\" ? 0 : getAnimatableNone(\"\", potentialUnitType);\n}\n\nfunction getValueTransition(transition, key) {\n  return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\n\n\nfunction startAnimation(key, value, target, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n\n  if (instantAnimationState.current) {\n    transition = {\n      type: false\n    };\n  }\n\n  return value.start(function (onComplete) {\n    var delayTimer;\n    var controls;\n    var animation = getAnimation(key, value, target, transition, onComplete);\n    var delay = getDelayFromTransition(transition, key);\n\n    var start = function start() {\n      return controls = animation();\n    };\n\n    if (delay) {\n      delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n    } else {\n      start();\n    }\n\n    return function () {\n      clearTimeout(delayTimer);\n      controls === null || controls === void 0 ? void 0 : controls.stop();\n    };\n  });\n}\n\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };","import { mix, progress, linear, circOut } from 'popmotion';\nimport { px, percent } from 'style-value-types';\nvar borders = [\"TopLeft\", \"TopRight\", \"BottomLeft\", \"BottomRight\"];\nvar numBorders = borders.length;\n\nvar asNumber = function asNumber(value) {\n  return typeof value === \"string\" ? parseFloat(value) : value;\n};\n\nvar isPx = function isPx(value) {\n  return typeof value === \"number\" || px.test(value);\n};\n\nfunction mixValues(target, follow, lead, progress, shouldCrossfadeOpacity, isOnlyMember) {\n  var _a, _b, _c, _d;\n\n  if (shouldCrossfadeOpacity) {\n    target.opacity = mix(0, // (follow?.opacity as number) ?? 0,\n    // TODO Reinstate this if only child\n    (_a = lead.opacity) !== null && _a !== void 0 ? _a : 1, easeCrossfadeIn(progress));\n    target.opacityExit = mix((_b = follow.opacity) !== null && _b !== void 0 ? _b : 1, 0, easeCrossfadeOut(progress));\n  } else if (isOnlyMember) {\n    target.opacity = mix((_c = follow.opacity) !== null && _c !== void 0 ? _c : 1, (_d = lead.opacity) !== null && _d !== void 0 ? _d : 1, progress);\n  }\n  /**\n   * Mix border radius\n   */\n\n\n  for (var i = 0; i < numBorders; i++) {\n    var borderLabel = \"border\".concat(borders[i], \"Radius\");\n    var followRadius = getRadius(follow, borderLabel);\n    var leadRadius = getRadius(lead, borderLabel);\n    if (followRadius === undefined && leadRadius === undefined) continue;\n    followRadius || (followRadius = 0);\n    leadRadius || (leadRadius = 0);\n    var canMix = followRadius === 0 || leadRadius === 0 || isPx(followRadius) === isPx(leadRadius);\n\n    if (canMix) {\n      target[borderLabel] = Math.max(mix(asNumber(followRadius), asNumber(leadRadius), progress), 0);\n\n      if (percent.test(leadRadius) || percent.test(followRadius)) {\n        target[borderLabel] += \"%\";\n      }\n    } else {\n      target[borderLabel] = leadRadius;\n    }\n  }\n  /**\n   * Mix rotation\n   */\n\n\n  if (follow.rotate || lead.rotate) {\n    target.rotate = mix(follow.rotate || 0, lead.rotate || 0, progress);\n  }\n}\n\nfunction getRadius(values, radiusName) {\n  var _a;\n\n  return (_a = values[radiusName]) !== null && _a !== void 0 ? _a : values.borderRadius;\n} // /**\n//  * We only want to mix the background color if there's a follow element\n//  * that we're not crossfading opacity between. For instance with switch\n//  * AnimateSharedLayout animations, this helps the illusion of a continuous\n//  * element being animated but also cuts down on the number of paints triggered\n//  * for elements where opacity is doing that work for us.\n//  */\n// if (\n//     !hasFollowElement &&\n//     latestLeadValues.backgroundColor &&\n//     latestFollowValues.backgroundColor\n// ) {\n//     /**\n//      * This isn't ideal performance-wise as mixColor is creating a new function every frame.\n//      * We could probably create a mixer that runs at the start of the animation but\n//      * the idea behind the crossfader is that it runs dynamically between two potentially\n//      * changing targets (ie opacity or borderRadius may be animating independently via variants)\n//      */\n//     leadState.backgroundColor = followState.backgroundColor = mixColor(\n//         latestFollowValues.backgroundColor as string,\n//         latestLeadValues.backgroundColor as string\n//     )(p)\n// }\n\n\nvar easeCrossfadeIn = compress(0, 0.5, circOut);\nvar easeCrossfadeOut = compress(0.5, 0.95, linear);\n\nfunction compress(min, max, easing) {\n  return function (p) {\n    // Could replace ifs with clamp\n    if (p < min) return 0;\n    if (p > max) return 1;\n    return easing(progress(min, max, p));\n  };\n}\n\nexport { mixValues };","/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction copyAxisInto(axis, originAxis) {\n  axis.min = originAxis.min;\n  axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\n\n\nfunction copyBoxInto(box, originBox) {\n  copyAxisInto(box.x, originBox.x);\n  copyAxisInto(box.y, originBox.y);\n}\n\nexport { copyAxisInto, copyBoxInto };","function isIdentityScale(scale) {\n  return scale === undefined || scale === 1;\n}\n\nfunction hasScale(_a) {\n  var scale = _a.scale,\n      scaleX = _a.scaleX,\n      scaleY = _a.scaleY;\n  return !isIdentityScale(scale) || !isIdentityScale(scaleX) || !isIdentityScale(scaleY);\n}\n\nfunction hasTransform(values) {\n  return hasScale(values) || hasTranslate(values.x) || hasTranslate(values.y) || values.z || values.rotate || values.rotateX || values.rotateY;\n}\n\nfunction hasTranslate(value) {\n  return value && value !== \"0%\";\n}\n\nexport { hasScale, hasTransform };","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\nimport { hasTransform } from '../utils/has-transform.mjs';\n/**\n * Scales a point based on a factor and an originPoint\n */\n\nfunction scalePoint(point, scale, originPoint) {\n  var distanceFromOrigin = point - originPoint;\n  var scaled = scale * distanceFromOrigin;\n  return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\n\n\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n  if (boxScale !== undefined) {\n    point = scalePoint(point, boxScale, originPoint);\n  }\n\n  return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\n\n\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\n\n\nfunction applyBoxDelta(box, _a) {\n  var x = _a.x,\n      y = _a.y;\n  applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n  applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\n\n\nfunction applyTreeDeltas(box, treeScale, treePath, isSharedTransition) {\n  var _a, _b;\n\n  if (isSharedTransition === void 0) {\n    isSharedTransition = false;\n  }\n\n  var treeLength = treePath.length;\n  if (!treeLength) return; // Reset the treeScale\n\n  treeScale.x = treeScale.y = 1;\n  var node;\n  var delta;\n\n  for (var i = 0; i < treeLength; i++) {\n    node = treePath[i];\n    delta = node.projectionDelta;\n    if (((_b = (_a = node.instance) === null || _a === void 0 ? void 0 : _a.style) === null || _b === void 0 ? void 0 : _b.display) === \"contents\") continue;\n\n    if (isSharedTransition && node.options.layoutScroll && node.scroll && node !== node.root) {\n      transformBox(box, {\n        x: -node.scroll.x,\n        y: -node.scroll.y\n      });\n    }\n\n    if (delta) {\n      // Incoporate each ancestor's scale into a culmulative treeScale for this component\n      treeScale.x *= delta.x.scale;\n      treeScale.y *= delta.y.scale; // Apply each ancestor's calculated delta into this component's recorded layout box\n\n      applyBoxDelta(box, delta);\n    }\n\n    if (isSharedTransition && hasTransform(node.latestValues)) {\n      transformBox(box, node.latestValues);\n    }\n  }\n}\n\nfunction translateAxis(axis, distance) {\n  axis.min = axis.min + distance;\n  axis.max = axis.max + distance;\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\n\n\nfunction transformAxis(axis, transforms, _a) {\n  var _b = __read(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2];\n\n  var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n  var originPoint = mix(axis.min, axis.max, axisOrigin); // Apply the axis delta to the final axis\n\n  applyAxisDelta(axis, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\n\n\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\n\nfunction transformBox(box, transform) {\n  transformAxis(box.x, transform, xKeys);\n  transformAxis(box.y, transform, yKeys);\n}\n\nexport { applyAxisDelta, applyBoxDelta, applyPointDelta, applyTreeDeltas, scalePoint, transformAxis, transformBox, translateAxis };","import { mix, distance } from 'popmotion';\n\nfunction calcLength(axis) {\n  return axis.max - axis.min;\n}\n\nfunction isNear(value, target, maxDistance) {\n  if (target === void 0) {\n    target = 0;\n  }\n\n  if (maxDistance === void 0) {\n    maxDistance = 0.01;\n  }\n\n  return distance(value, target) < maxDistance;\n}\n\nfunction calcAxisDelta(delta, source, target, origin) {\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  delta.origin = origin;\n  delta.originPoint = mix(source.min, source.max, delta.origin);\n  delta.scale = calcLength(target) / calcLength(source);\n  if (isNear(delta.scale, 1, 0.0001) || isNaN(delta.scale)) delta.scale = 1;\n  delta.translate = mix(target.min, target.max, delta.origin) - delta.originPoint;\n  if (isNear(delta.translate) || isNaN(delta.translate)) delta.translate = 0;\n}\n\nfunction calcBoxDelta(delta, source, target, origin) {\n  calcAxisDelta(delta.x, source.x, target.x, origin === null || origin === void 0 ? void 0 : origin.originX);\n  calcAxisDelta(delta.y, source.y, target.y, origin === null || origin === void 0 ? void 0 : origin.originY);\n}\n\nfunction calcRelativeAxis(target, relative, parent) {\n  target.min = parent.min + relative.min;\n  target.max = target.min + calcLength(relative);\n}\n\nfunction calcRelativeBox(target, relative, parent) {\n  calcRelativeAxis(target.x, relative.x, parent.x);\n  calcRelativeAxis(target.y, relative.y, parent.y);\n}\n\nfunction calcRelativeAxisPosition(target, layout, parent) {\n  target.min = layout.min - parent.min;\n  target.max = target.min + calcLength(layout);\n}\n\nfunction calcRelativePosition(target, layout, parent) {\n  calcRelativeAxisPosition(target.x, layout.x, parent.x);\n  calcRelativeAxisPosition(target.y, layout.y, parent.y);\n}\n\nexport { calcAxisDelta, calcBoxDelta, calcLength, calcRelativeAxis, calcRelativeAxisPosition, calcRelativeBox, calcRelativePosition, isNear };","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\nimport { percent } from 'style-value-types';\nimport { scalePoint } from './delta-apply.mjs';\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\n\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n  point -= translate;\n  point = scalePoint(point, 1 / scale, originPoint);\n\n  if (boxScale !== undefined) {\n    point = scalePoint(point, 1 / boxScale, originPoint);\n  }\n\n  return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\n\n\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale, originAxis, sourceAxis) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  if (originAxis === void 0) {\n    originAxis = axis;\n  }\n\n  if (sourceAxis === void 0) {\n    sourceAxis = axis;\n  }\n\n  if (percent.test(translate)) {\n    translate = parseFloat(translate);\n    var relativeProgress = mix(sourceAxis.min, sourceAxis.max, translate / 100);\n    translate = relativeProgress - sourceAxis.min;\n  }\n\n  if (typeof translate !== \"number\") return;\n  var originPoint = mix(originAxis.min, originAxis.max, origin);\n  if (axis === originAxis) originPoint -= translate;\n  axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\n\nfunction removeAxisTransforms(axis, transforms, _a, origin, sourceAxis) {\n  var _b = __read(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2];\n\n  removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale, origin, sourceAxis);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\n\n\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\nfunction removeBoxTransforms(box, transforms, originBox, sourceBox) {\n  removeAxisTransforms(box.x, transforms, xKeys, originBox === null || originBox === void 0 ? void 0 : originBox.x, sourceBox === null || sourceBox === void 0 ? void 0 : sourceBox.x);\n  removeAxisTransforms(box.y, transforms, yKeys, originBox === null || originBox === void 0 ? void 0 : originBox.y, sourceBox === null || sourceBox === void 0 ? void 0 : sourceBox.y);\n}\n\nexport { removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta };","function isAxisDeltaZero(delta) {\n  return delta.translate === 0 && delta.scale === 1;\n}\n\nfunction isDeltaZero(delta) {\n  return isAxisDeltaZero(delta.x) && isAxisDeltaZero(delta.y);\n}\n\nfunction boxEquals(a, b) {\n  return a.x.min === b.x.min && a.x.max === b.x.max && a.y.min === b.y.min && a.y.max === b.y.max;\n}\n\nexport { boxEquals, isDeltaZero };","import { addUniqueItem, removeItem } from '../../utils/array.mjs';\n\nvar NodeStack =\n/** @class */\nfunction () {\n  function NodeStack() {\n    this.members = [];\n  }\n\n  NodeStack.prototype.add = function (node) {\n    addUniqueItem(this.members, node);\n    node.scheduleRender();\n  };\n\n  NodeStack.prototype.remove = function (node) {\n    removeItem(this.members, node);\n\n    if (node === this.prevLead) {\n      this.prevLead = undefined;\n    }\n\n    if (node === this.lead) {\n      var prevLead = this.members[this.members.length - 1];\n\n      if (prevLead) {\n        this.promote(prevLead);\n      }\n    }\n  };\n\n  NodeStack.prototype.relegate = function (node) {\n    var indexOfNode = this.members.findIndex(function (member) {\n      return node === member;\n    });\n    if (indexOfNode === 0) return false;\n    /**\n     * Find the next projection node that is present\n     */\n\n    var prevLead;\n\n    for (var i = indexOfNode; i >= 0; i--) {\n      var member = this.members[i];\n\n      if (member.isPresent !== false) {\n        prevLead = member;\n        break;\n      }\n    }\n\n    if (prevLead) {\n      this.promote(prevLead);\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  NodeStack.prototype.promote = function (node, preserveFollowOpacity) {\n    var _a;\n\n    var prevLead = this.lead;\n    if (node === prevLead) return;\n    this.prevLead = prevLead;\n    this.lead = node;\n    node.show();\n\n    if (prevLead) {\n      prevLead.instance && prevLead.scheduleRender();\n      node.scheduleRender();\n      node.resumeFrom = prevLead;\n\n      if (preserveFollowOpacity) {\n        node.resumeFrom.preserveOpacity = true;\n      }\n\n      if (prevLead.snapshot) {\n        node.snapshot = prevLead.snapshot;\n        node.snapshot.latestValues = prevLead.animationValues || prevLead.latestValues;\n        node.snapshot.isShared = true;\n      }\n\n      if ((_a = node.root) === null || _a === void 0 ? void 0 : _a.isUpdating) {\n        node.isLayoutDirty = true;\n      }\n\n      var crossfade = node.options.crossfade;\n\n      if (crossfade === false) {\n        prevLead.hide();\n      }\n      /**\n       * TODO:\n       *   - Test border radius when previous node was deleted\n       *   - boxShadow mixing\n       *   - Shared between element A in scrolled container and element B (scroll stays the same or changes)\n       *   - Shared between element A in transformed container and element B (transform stays the same or changes)\n       *   - Shared between element A in scrolled page and element B (scroll stays the same or changes)\n       * ---\n       *   - Crossfade opacity of root nodes\n       *   - layoutId changes after animation\n       *   - layoutId changes mid animation\n       */\n\n    }\n  };\n\n  NodeStack.prototype.exitAnimationComplete = function () {\n    this.members.forEach(function (node) {\n      var _a, _b, _c, _d, _e;\n\n      (_b = (_a = node.options).onExitComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n      (_e = (_c = node.resumingFrom) === null || _c === void 0 ? void 0 : (_d = _c.options).onExitComplete) === null || _e === void 0 ? void 0 : _e.call(_d);\n    });\n  };\n\n  NodeStack.prototype.scheduleRender = function () {\n    this.members.forEach(function (node) {\n      node.instance && node.scheduleRender(false);\n    });\n  };\n  /**\n   * Clear any leads that have been removed this render to prevent them from being\n   * used in future animations and to prevent memory leaks\n   */\n\n\n  NodeStack.prototype.removeLeadSnapshot = function () {\n    if (this.lead && this.lead.snapshot) {\n      this.lead.snapshot = undefined;\n    }\n  };\n\n  return NodeStack;\n}();\n\nexport { NodeStack };","var scaleCorrectors = {};\n\nfunction addScaleCorrector(correctors) {\n  Object.assign(scaleCorrectors, correctors);\n}\n\nexport { addScaleCorrector, scaleCorrectors };","var identityProjection = \"translate3d(0px, 0px, 0) scale(1, 1)\";\n\nfunction buildProjectionTransform(delta, treeScale, latestTransform) {\n  /**\n   * The translations we use to calculate are always relative to the viewport coordinate space.\n   * But when we apply scales, we also scale the coordinate space of an element and its children.\n   * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n   * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n   */\n  var xTranslate = delta.x.translate / treeScale.x;\n  var yTranslate = delta.y.translate / treeScale.y;\n  var transform = \"translate3d(\".concat(xTranslate, \"px, \").concat(yTranslate, \"px, 0) \");\n\n  if (latestTransform) {\n    var rotate = latestTransform.rotate,\n        rotateX = latestTransform.rotateX,\n        rotateY = latestTransform.rotateY;\n    if (rotate) transform += \"rotate(\".concat(rotate, \"deg) \");\n    if (rotateX) transform += \"rotateX(\".concat(rotateX, \"deg) \");\n    if (rotateY) transform += \"rotateY(\".concat(rotateY, \"deg) \");\n  }\n\n  transform += \"scale(\".concat(delta.x.scale, \", \").concat(delta.y.scale, \")\");\n  return transform === identityProjection ? \"none\" : transform;\n}\n\nexport { buildProjectionTransform, identityProjection };","function eachAxis(callback) {\n  return [callback(\"x\"), callback(\"y\")];\n}\n\nexport { eachAxis };","/**\n * A list of all transformable axes. We'll use this list to generated a version\n * of each axes for each transform.\n */\nvar transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\n/**\n * An ordered array of each transformable value. By default, transform values\n * will be sorted to this order.\n */\n\nvar order = [\"translate\", \"scale\", \"rotate\", \"skew\"];\n/**\n * Generate a list of every possible transform key.\n */\n\nvar transformProps = [\"transformPerspective\", \"x\", \"y\", \"z\"];\norder.forEach(function (operationKey) {\n  return transformAxes.forEach(function (axesKey) {\n    return transformProps.push(operationKey + axesKey);\n  });\n});\n/**\n * A function to use with Array.sort to sort transform keys by their default order.\n */\n\nfunction sortTransformProps(a, b) {\n  return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n/**\n * A quick lookup for transform props.\n */\n\n\nvar transformPropSet = new Set(transformProps);\n\nfunction isTransformProp(key) {\n  return transformPropSet.has(key);\n}\n/**\n * A quick lookup for transform origin props\n */\n\n\nvar transformOriginProps = new Set([\"originX\", \"originY\", \"originZ\"]);\n\nfunction isTransformOriginProp(key) {\n  return transformOriginProps.has(key);\n}\n\nexport { isTransformOriginProp, isTransformProp, sortTransformProps, transformAxes, transformProps };","var compareByDepth = function compareByDepth(a, b) {\n  return a.depth - b.depth;\n};\n\nexport { compareByDepth };","import { addUniqueItem, removeItem } from '../../utils/array.mjs';\nimport { compareByDepth } from './compare-by-depth.mjs';\n\nvar FlatTree =\n/** @class */\nfunction () {\n  function FlatTree() {\n    this.children = [];\n    this.isDirty = false;\n  }\n\n  FlatTree.prototype.add = function (child) {\n    addUniqueItem(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.remove = function (child) {\n    removeItem(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.forEach = function (callback) {\n    this.isDirty && this.children.sort(compareByDepth);\n    this.isDirty = false;\n    this.children.forEach(callback);\n  };\n\n  return FlatTree;\n}();\n\nexport { FlatTree };","import { isCustomValue } from '../../utils/resolve-value.mjs';\nimport { isMotionValue } from './is-motion-value.mjs';\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n *\n * @internal\n */\n\nfunction resolveMotionValue(value) {\n  var unwrappedValue = isMotionValue(value) ? value.get() : value;\n  return isCustomValue(unwrappedValue) ? unwrappedValue.toValue() : unwrappedValue;\n}\n\nexport { resolveMotionValue };","import { __spreadArray, __read, __assign } from 'tslib';\nimport sync, { cancelSync, flushSync } from 'framesync';\nimport { mix } from 'popmotion';\nimport { animate } from '../../animation/animate.mjs';\nimport { SubscriptionManager } from '../../utils/subscription-manager.mjs';\nimport { mixValues } from '../animation/mix-values.mjs';\nimport { copyBoxInto } from '../geometry/copy.mjs';\nimport { translateAxis, transformBox, applyBoxDelta, applyTreeDeltas } from '../geometry/delta-apply.mjs';\nimport { calcRelativePosition, calcRelativeBox, calcBoxDelta, calcLength } from '../geometry/delta-calc.mjs';\nimport { removeBoxTransforms } from '../geometry/delta-remove.mjs';\nimport { createBox, createDelta } from '../geometry/models.mjs';\nimport { getValueTransition } from '../../animation/utils/transitions.mjs';\nimport { boxEquals, isDeltaZero } from '../geometry/utils.mjs';\nimport { NodeStack } from '../shared/stack.mjs';\nimport { scaleCorrectors } from '../styles/scale-correction.mjs';\nimport { buildProjectionTransform } from '../styles/transform.mjs';\nimport { eachAxis } from '../utils/each-axis.mjs';\nimport { hasTransform, hasScale } from '../utils/has-transform.mjs';\nimport { transformAxes } from '../../render/html/utils/transform.mjs';\nimport { FlatTree } from '../../render/utils/flat-tree.mjs';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.mjs';\n/**\n * We use 1000 as the animation target as 0-1000 maps better to pixels than 0-1\n * which has a noticeable difference in spring animations\n */\n\nvar animationTarget = 1000;\n/**\n * This should only ever be modified on the client otherwise it'll\n * persist through server requests. If we need instanced states we\n * could lazy-init via root.\n */\n\nvar globalProjectionState = {\n  /**\n   * Global flag as to whether the tree has animated since the last time\n   * we resized the window\n   */\n  hasAnimatedSinceResize: true,\n\n  /**\n   * We set this to true once, on the first update. Any nodes added to the tree beyond that\n   * update will be given a `data-projection-id` attribute.\n   */\n  hasEverUpdated: false\n};\n\nfunction createProjectionNode(_a) {\n  var attachResizeListener = _a.attachResizeListener,\n      defaultParent = _a.defaultParent,\n      measureScroll = _a.measureScroll,\n      resetTransform = _a.resetTransform;\n  return (\n    /** @class */\n    function () {\n      function ProjectionNode(id, latestValues, parent) {\n        var _this = this;\n\n        if (latestValues === void 0) {\n          latestValues = {};\n        }\n\n        if (parent === void 0) {\n          parent = defaultParent === null || defaultParent === void 0 ? void 0 : defaultParent();\n        }\n        /**\n         * A Set containing all this component's children. This is used to iterate\n         * through the children.\n         *\n         * TODO: This could be faster to iterate as a flat array stored on the root node.\n         */\n\n\n        this.children = new Set();\n        /**\n         * Options for the node. We use this to configure what kind of layout animations\n         * we should perform (if any).\n         */\n\n        this.options = {};\n        /**\n         * We use this to detect when its safe to shut down part of a projection tree.\n         * We have to keep projecting children for scale correction and relative projection\n         * until all their parents stop performing layout animations.\n         */\n\n        this.isTreeAnimating = false;\n        this.isAnimationBlocked = false;\n        /**\n         * Flag to true if we think this layout has been changed. We can't always know this,\n         * currently we set it to true every time a component renders, or if it has a layoutDependency\n         * if that has changed between renders. Additionally, components can be grouped by LayoutGroup\n         * and if one node is dirtied, they all are.\n         */\n\n        this.isLayoutDirty = false;\n        /**\n         * Block layout updates for instant layout transitions throughout the tree.\n         */\n\n        this.updateManuallyBlocked = false;\n        this.updateBlockedByResize = false;\n        /**\n         * Set to true between the start of the first `willUpdate` call and the end of the `didUpdate`\n         * call.\n         */\n\n        this.isUpdating = false;\n        /**\n         * If this is an SVG element we currently disable projection transforms\n         */\n\n        this.isSVG = false;\n        /**\n         * Flag to true (during promotion) if a node doing an instant layout transition needs to reset\n         * its projection styles.\n         */\n\n        this.needsReset = false;\n        /**\n         * Flags whether this node should have its transform reset prior to measuring.\n         */\n\n        this.shouldResetTransform = false;\n        /**\n         * An object representing the calculated contextual/accumulated/tree scale.\n         * This will be used to scale calculcated projection transforms, as these are\n         * calculated in screen-space but need to be scaled for elements to actually\n         * make it to their calculated destinations.\n         *\n         * TODO: Lazy-init\n         */\n\n        this.treeScale = {\n          x: 1,\n          y: 1\n        };\n        /**\n         *\n         */\n\n        this.eventHandlers = new Map(); // Note: Currently only running on root node\n\n        this.potentialNodes = new Map();\n\n        this.checkUpdateFailed = function () {\n          if (_this.isUpdating) {\n            _this.isUpdating = false;\n\n            _this.clearAllSnapshots();\n          }\n        };\n\n        this.updateProjection = function () {\n          _this.nodes.forEach(resolveTargetDelta);\n\n          _this.nodes.forEach(calcProjection);\n        };\n\n        this.hasProjected = false;\n        this.isVisible = true;\n        /**\n         * Animation\n         */\n\n        this.animationProgress = 0;\n        /**\n         * Shared layout\n         */\n        // TODO Only running on root node\n\n        this.sharedNodes = new Map();\n        this.id = id;\n        this.latestValues = latestValues;\n        this.root = parent ? parent.root || parent : this;\n        this.path = parent ? __spreadArray(__spreadArray([], __read(parent.path), false), [parent], false) : [];\n        this.parent = parent;\n        this.depth = parent ? parent.depth + 1 : 0;\n        id && this.root.registerPotentialNode(id, this);\n\n        for (var i = 0; i < this.path.length; i++) {\n          this.path[i].shouldResetTransform = true;\n        }\n\n        if (this.root === this) this.nodes = new FlatTree();\n      }\n\n      ProjectionNode.prototype.addEventListener = function (name, handler) {\n        if (!this.eventHandlers.has(name)) {\n          this.eventHandlers.set(name, new SubscriptionManager());\n        }\n\n        return this.eventHandlers.get(name).add(handler);\n      };\n\n      ProjectionNode.prototype.notifyListeners = function (name) {\n        var args = [];\n\n        for (var _i = 1; _i < arguments.length; _i++) {\n          args[_i - 1] = arguments[_i];\n        }\n\n        var subscriptionManager = this.eventHandlers.get(name);\n        subscriptionManager === null || subscriptionManager === void 0 ? void 0 : subscriptionManager.notify.apply(subscriptionManager, __spreadArray([], __read(args), false));\n      };\n\n      ProjectionNode.prototype.hasListeners = function (name) {\n        return this.eventHandlers.has(name);\n      };\n\n      ProjectionNode.prototype.registerPotentialNode = function (id, node) {\n        this.potentialNodes.set(id, node);\n      };\n      /**\n       * Lifecycles\n       */\n\n\n      ProjectionNode.prototype.mount = function (instance, isLayoutDirty) {\n        var _this = this;\n\n        var _a;\n\n        if (isLayoutDirty === void 0) {\n          isLayoutDirty = false;\n        }\n\n        if (this.instance) return;\n        this.isSVG = instance instanceof SVGElement && instance.tagName !== \"svg\";\n        this.instance = instance;\n        var _b = this.options,\n            layoutId = _b.layoutId,\n            layout = _b.layout,\n            visualElement = _b.visualElement;\n\n        if (visualElement && !visualElement.getInstance()) {\n          visualElement.mount(instance);\n        }\n\n        this.root.nodes.add(this);\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.add(this);\n        this.id && this.root.potentialNodes.delete(this.id);\n\n        if (isLayoutDirty && (layout || layoutId)) {\n          this.isLayoutDirty = true;\n        }\n\n        if (attachResizeListener) {\n          var unblockTimeout_1;\n\n          var resizeUnblockUpdate_1 = function resizeUnblockUpdate_1() {\n            return _this.root.updateBlockedByResize = false;\n          };\n\n          attachResizeListener(instance, function () {\n            _this.root.updateBlockedByResize = true;\n            clearTimeout(unblockTimeout_1);\n            unblockTimeout_1 = setTimeout(resizeUnblockUpdate_1, 250);\n\n            if (globalProjectionState.hasAnimatedSinceResize) {\n              globalProjectionState.hasAnimatedSinceResize = false;\n\n              _this.nodes.forEach(finishAnimation);\n            }\n          });\n        }\n\n        if (layoutId) {\n          this.root.registerSharedNode(layoutId, this);\n        } // Only register the handler if it requires layout animation\n\n\n        if (this.options.animate !== false && visualElement && (layoutId || layout)) {\n          this.addEventListener(\"didUpdate\", function (_a) {\n            var _b, _c, _d, _e, _f;\n\n            var delta = _a.delta,\n                hasLayoutChanged = _a.hasLayoutChanged,\n                hasRelativeTargetChanged = _a.hasRelativeTargetChanged,\n                newLayout = _a.layout;\n\n            if (_this.isTreeAnimationBlocked()) {\n              _this.target = undefined;\n              _this.relativeTarget = undefined;\n              return;\n            } // TODO: Check here if an animation exists\n\n\n            var layoutTransition = (_c = (_b = _this.options.transition) !== null && _b !== void 0 ? _b : visualElement.getDefaultTransition()) !== null && _c !== void 0 ? _c : defaultLayoutTransition;\n            var onLayoutAnimationComplete = visualElement.getProps().onLayoutAnimationComplete;\n            /**\n             * The target layout of the element might stay the same,\n             * but its position relative to its parent has changed.\n             */\n\n            var targetChanged = !_this.targetLayout || !boxEquals(_this.targetLayout, newLayout) || hasRelativeTargetChanged;\n            /**\n             * If the layout hasn't seemed to have changed, it might be that the\n             * element is visually in the same place in the document but its position\n             * relative to its parent has indeed changed. So here we check for that.\n             */\n\n            var hasOnlyRelativeTargetChanged = !hasLayoutChanged && hasRelativeTargetChanged;\n\n            if (((_d = _this.resumeFrom) === null || _d === void 0 ? void 0 : _d.instance) || hasOnlyRelativeTargetChanged || hasLayoutChanged && (targetChanged || !_this.currentAnimation)) {\n              if (_this.resumeFrom) {\n                _this.resumingFrom = _this.resumeFrom;\n                _this.resumingFrom.resumingFrom = undefined;\n              }\n\n              _this.setAnimationOrigin(delta, hasOnlyRelativeTargetChanged);\n\n              _this.startAnimation(__assign(__assign({}, getValueTransition(layoutTransition, \"layout\")), {\n                onComplete: onLayoutAnimationComplete\n              }));\n            } else {\n              _this.isLead() && ((_f = (_e = _this.options).onExitComplete) === null || _f === void 0 ? void 0 : _f.call(_e));\n            }\n\n            _this.targetLayout = newLayout;\n          });\n        }\n      };\n\n      ProjectionNode.prototype.unmount = function () {\n        var _a, _b;\n\n        this.options.layoutId && this.willUpdate();\n        this.root.nodes.remove(this);\n        (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.remove(this);\n        (_b = this.parent) === null || _b === void 0 ? void 0 : _b.children.delete(this);\n        this.instance = undefined;\n        cancelSync.preRender(this.updateProjection);\n      }; // only on the root\n\n\n      ProjectionNode.prototype.blockUpdate = function () {\n        this.updateManuallyBlocked = true;\n      };\n\n      ProjectionNode.prototype.unblockUpdate = function () {\n        this.updateManuallyBlocked = false;\n      };\n\n      ProjectionNode.prototype.isUpdateBlocked = function () {\n        return this.updateManuallyBlocked || this.updateBlockedByResize;\n      };\n\n      ProjectionNode.prototype.isTreeAnimationBlocked = function () {\n        var _a;\n\n        return this.isAnimationBlocked || ((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isTreeAnimationBlocked()) || false;\n      }; // Note: currently only running on root node\n\n\n      ProjectionNode.prototype.startUpdate = function () {\n        var _a;\n\n        if (this.isUpdateBlocked()) return;\n        this.isUpdating = true;\n        (_a = this.nodes) === null || _a === void 0 ? void 0 : _a.forEach(resetRotation);\n      };\n\n      ProjectionNode.prototype.willUpdate = function (shouldNotifyListeners) {\n        var _a, _b, _c;\n\n        if (shouldNotifyListeners === void 0) {\n          shouldNotifyListeners = true;\n        }\n\n        if (this.root.isUpdateBlocked()) {\n          (_b = (_a = this.options).onExitComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n          return;\n        }\n\n        !this.root.isUpdating && this.root.startUpdate();\n        if (this.isLayoutDirty) return;\n        this.isLayoutDirty = true;\n\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          node.shouldResetTransform = true;\n          /**\n           * TODO: Check we haven't updated the scroll\n           * since the last didUpdate\n           */\n\n          node.updateScroll();\n        }\n\n        var _d = this.options,\n            layoutId = _d.layoutId,\n            layout = _d.layout;\n        if (layoutId === undefined && !layout) return;\n        var transformTemplate = (_c = this.options.visualElement) === null || _c === void 0 ? void 0 : _c.getProps().transformTemplate;\n        this.prevTransformTemplateValue = transformTemplate === null || transformTemplate === void 0 ? void 0 : transformTemplate(this.latestValues, \"\");\n        this.updateSnapshot();\n        shouldNotifyListeners && this.notifyListeners(\"willUpdate\");\n      }; // Note: Currently only running on root node\n\n\n      ProjectionNode.prototype.didUpdate = function () {\n        var updateWasBlocked = this.isUpdateBlocked(); // When doing an instant transition, we skip the layout update,\n        // but should still clean up the measurements so that the next\n        // snapshot could be taken correctly.\n\n        if (updateWasBlocked) {\n          this.unblockUpdate();\n          this.clearAllSnapshots();\n          this.nodes.forEach(clearMeasurements);\n          return;\n        }\n\n        if (!this.isUpdating) return;\n        this.isUpdating = false;\n        /**\n         * Search for and mount newly-added projection elements.\n         *\n         * TODO: Every time a new component is rendered we could search up the tree for\n         * the closest mounted node and query from there rather than document.\n         */\n\n        if (this.potentialNodes.size) {\n          this.potentialNodes.forEach(mountNodeEarly);\n          this.potentialNodes.clear();\n        }\n        /**\n         * Write\n         */\n\n\n        this.nodes.forEach(resetTransformStyle);\n        /**\n         * Read ==================\n         */\n        // Update layout measurements of updated children\n\n        this.nodes.forEach(updateLayout);\n        /**\n         * Write\n         */\n        // Notify listeners that the layout is updated\n\n        this.nodes.forEach(notifyLayoutUpdate);\n        this.clearAllSnapshots(); // Flush any scheduled updates\n\n        flushSync.update();\n        flushSync.preRender();\n        flushSync.render();\n      };\n\n      ProjectionNode.prototype.clearAllSnapshots = function () {\n        this.nodes.forEach(clearSnapshot);\n        this.sharedNodes.forEach(removeLeadSnapshots);\n      };\n\n      ProjectionNode.prototype.scheduleUpdateProjection = function () {\n        sync.preRender(this.updateProjection, false, true);\n      };\n\n      ProjectionNode.prototype.scheduleCheckAfterUnmount = function () {\n        var _this = this;\n        /**\n         * If the unmounting node is in a layoutGroup and did trigger a willUpdate,\n         * we manually call didUpdate to give a chance to the siblings to animate.\n         * Otherwise, cleanup all snapshots to prevents future nodes from reusing them.\n         */\n\n\n        sync.postRender(function () {\n          if (_this.isLayoutDirty) {\n            _this.root.didUpdate();\n          } else {\n            _this.root.checkUpdateFailed();\n          }\n        });\n      };\n      /**\n       * Update measurements\n       */\n\n\n      ProjectionNode.prototype.updateSnapshot = function () {\n        if (this.snapshot || !this.instance) return;\n        var measured = this.measure();\n        var layout = this.removeTransform(this.removeElementScroll(measured));\n        roundBox(layout);\n        this.snapshot = {\n          measured: measured,\n          layout: layout,\n          latestValues: {}\n        };\n      };\n\n      ProjectionNode.prototype.updateLayout = function () {\n        var _a;\n\n        if (!this.instance) return; // TODO: Incorporate into a forwarded scroll offset\n\n        this.updateScroll();\n\n        if (!(this.options.alwaysMeasureLayout && this.isLead()) && !this.isLayoutDirty) {\n          return;\n        }\n        /**\n         * When a node is mounted, it simply resumes from the prevLead's\n         * snapshot instead of taking a new one, but the ancestors scroll\n         * might have updated while the prevLead is unmounted. We need to\n         * update the scroll again to make sure the layout we measure is\n         * up to date.\n         */\n\n\n        if (this.resumeFrom && !this.resumeFrom.instance) {\n          for (var i = 0; i < this.path.length; i++) {\n            var node = this.path[i];\n            node.updateScroll();\n          }\n        }\n\n        var measured = this.measure();\n        roundBox(measured);\n        var prevLayout = this.layout;\n        this.layout = {\n          measured: measured,\n          actual: this.removeElementScroll(measured)\n        };\n        this.layoutCorrected = createBox();\n        this.isLayoutDirty = false;\n        this.projectionDelta = undefined;\n        this.notifyListeners(\"measure\", this.layout.actual);\n        (_a = this.options.visualElement) === null || _a === void 0 ? void 0 : _a.notifyLayoutMeasure(this.layout.actual, prevLayout === null || prevLayout === void 0 ? void 0 : prevLayout.actual);\n      };\n\n      ProjectionNode.prototype.updateScroll = function () {\n        if (this.options.layoutScroll && this.instance) {\n          this.scroll = measureScroll(this.instance);\n        }\n      };\n\n      ProjectionNode.prototype.resetTransform = function () {\n        var _a;\n\n        if (!resetTransform) return;\n        var isResetRequested = this.isLayoutDirty || this.shouldResetTransform;\n        var hasProjection = this.projectionDelta && !isDeltaZero(this.projectionDelta);\n        var transformTemplate = (_a = this.options.visualElement) === null || _a === void 0 ? void 0 : _a.getProps().transformTemplate;\n        var transformTemplateValue = transformTemplate === null || transformTemplate === void 0 ? void 0 : transformTemplate(this.latestValues, \"\");\n        var transformTemplateHasChanged = transformTemplateValue !== this.prevTransformTemplateValue;\n\n        if (isResetRequested && (hasProjection || hasTransform(this.latestValues) || transformTemplateHasChanged)) {\n          resetTransform(this.instance, transformTemplateValue);\n          this.shouldResetTransform = false;\n          this.scheduleRender();\n        }\n      };\n\n      ProjectionNode.prototype.measure = function () {\n        var visualElement = this.options.visualElement;\n        if (!visualElement) return createBox();\n        var box = visualElement.measureViewportBox(); // Remove viewport scroll to give page-relative coordinates\n\n        var scroll = this.root.scroll;\n\n        if (scroll) {\n          translateAxis(box.x, scroll.x);\n          translateAxis(box.y, scroll.y);\n        }\n\n        return box;\n      };\n\n      ProjectionNode.prototype.removeElementScroll = function (box) {\n        var boxWithoutScroll = createBox();\n        copyBoxInto(boxWithoutScroll, box);\n        /**\n         * Performance TODO: Keep a cumulative scroll offset down the tree\n         * rather than loop back up the path.\n         */\n\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          var scroll_1 = node.scroll,\n              options = node.options;\n\n          if (node !== this.root && scroll_1 && options.layoutScroll) {\n            translateAxis(boxWithoutScroll.x, scroll_1.x);\n            translateAxis(boxWithoutScroll.y, scroll_1.y);\n          }\n        }\n\n        return boxWithoutScroll;\n      };\n\n      ProjectionNode.prototype.applyTransform = function (box, transformOnly) {\n        if (transformOnly === void 0) {\n          transformOnly = false;\n        }\n\n        var withTransforms = createBox();\n        copyBoxInto(withTransforms, box);\n\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n\n          if (!transformOnly && node.options.layoutScroll && node.scroll && node !== node.root) {\n            transformBox(withTransforms, {\n              x: -node.scroll.x,\n              y: -node.scroll.y\n            });\n          }\n\n          if (!hasTransform(node.latestValues)) continue;\n          transformBox(withTransforms, node.latestValues);\n        }\n\n        if (hasTransform(this.latestValues)) {\n          transformBox(withTransforms, this.latestValues);\n        }\n\n        return withTransforms;\n      };\n\n      ProjectionNode.prototype.removeTransform = function (box) {\n        var _a;\n\n        var boxWithoutTransform = createBox();\n        copyBoxInto(boxWithoutTransform, box);\n\n        for (var i = 0; i < this.path.length; i++) {\n          var node = this.path[i];\n          if (!node.instance) continue;\n          if (!hasTransform(node.latestValues)) continue;\n          hasScale(node.latestValues) && node.updateSnapshot();\n          var sourceBox = createBox();\n          var nodeBox = node.measure();\n          copyBoxInto(sourceBox, nodeBox);\n          removeBoxTransforms(boxWithoutTransform, node.latestValues, (_a = node.snapshot) === null || _a === void 0 ? void 0 : _a.layout, sourceBox);\n        }\n\n        if (hasTransform(this.latestValues)) {\n          removeBoxTransforms(boxWithoutTransform, this.latestValues);\n        }\n\n        return boxWithoutTransform;\n      };\n      /**\n       *\n       */\n\n\n      ProjectionNode.prototype.setTargetDelta = function (delta) {\n        this.targetDelta = delta;\n        this.root.scheduleUpdateProjection();\n      };\n\n      ProjectionNode.prototype.setOptions = function (options) {\n        var _a;\n\n        this.options = __assign(__assign(__assign({}, this.options), options), {\n          crossfade: (_a = options.crossfade) !== null && _a !== void 0 ? _a : true\n        });\n      };\n\n      ProjectionNode.prototype.clearMeasurements = function () {\n        this.scroll = undefined;\n        this.layout = undefined;\n        this.snapshot = undefined;\n        this.prevTransformTemplateValue = undefined;\n        this.targetDelta = undefined;\n        this.target = undefined;\n        this.isLayoutDirty = false;\n      };\n      /**\n       * Frame calculations\n       */\n\n\n      ProjectionNode.prototype.resolveTargetDelta = function () {\n        var _a;\n\n        var _b = this.options,\n            layout = _b.layout,\n            layoutId = _b.layoutId;\n        /**\n         * If we have no layout, we can't perform projection, so early return\n         */\n\n        if (!this.layout || !(layout || layoutId)) return;\n        /**\n         * If we don't have a targetDelta but do have a layout, we can attempt to resolve\n         * a relativeParent. This will allow a component to perform scale correction\n         * even if no animation has started.\n         */\n        // TODO If this is unsuccessful this currently happens every frame\n\n        if (!this.targetDelta && !this.relativeTarget) {\n          // TODO: This is a semi-repetition of further down this function, make DRY\n          this.relativeParent = this.getClosestProjectingParent();\n\n          if (this.relativeParent && this.relativeParent.layout) {\n            this.relativeTarget = createBox();\n            this.relativeTargetOrigin = createBox();\n            calcRelativePosition(this.relativeTargetOrigin, this.layout.actual, this.relativeParent.layout.actual);\n            copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n          }\n        }\n        /**\n         * If we have no relative target or no target delta our target isn't valid\n         * for this frame.\n         */\n\n\n        if (!this.relativeTarget && !this.targetDelta) return;\n        /**\n         * Lazy-init target data structure\n         */\n\n        if (!this.target) {\n          this.target = createBox();\n          this.targetWithTransforms = createBox();\n        }\n        /**\n         * If we've got a relative box for this component, resolve it into a target relative to the parent.\n         */\n\n\n        if (this.relativeTarget && this.relativeTargetOrigin && ((_a = this.relativeParent) === null || _a === void 0 ? void 0 : _a.target)) {\n          calcRelativeBox(this.target, this.relativeTarget, this.relativeParent.target);\n          /**\n           * If we've only got a targetDelta, resolve it into a target\n           */\n        } else if (this.targetDelta) {\n          if (Boolean(this.resumingFrom)) {\n            // TODO: This is creating a new object every frame\n            this.target = this.applyTransform(this.layout.actual);\n          } else {\n            copyBoxInto(this.target, this.layout.actual);\n          }\n\n          applyBoxDelta(this.target, this.targetDelta);\n        } else {\n          /**\n           * If no target, use own layout as target\n           */\n          copyBoxInto(this.target, this.layout.actual);\n        }\n        /**\n         * If we've been told to attempt to resolve a relative target, do so.\n         */\n\n\n        if (this.attemptToResolveRelativeTarget) {\n          this.attemptToResolveRelativeTarget = false;\n          this.relativeParent = this.getClosestProjectingParent();\n\n          if (this.relativeParent && Boolean(this.relativeParent.resumingFrom) === Boolean(this.resumingFrom) && !this.relativeParent.options.layoutScroll && this.relativeParent.target) {\n            this.relativeTarget = createBox();\n            this.relativeTargetOrigin = createBox();\n            calcRelativePosition(this.relativeTargetOrigin, this.target, this.relativeParent.target);\n            copyBoxInto(this.relativeTarget, this.relativeTargetOrigin);\n          }\n        }\n      };\n\n      ProjectionNode.prototype.getClosestProjectingParent = function () {\n        if (!this.parent || hasTransform(this.parent.latestValues)) return undefined;\n\n        if ((this.parent.relativeTarget || this.parent.targetDelta) && this.parent.layout) {\n          return this.parent;\n        } else {\n          return this.parent.getClosestProjectingParent();\n        }\n      };\n\n      ProjectionNode.prototype.calcProjection = function () {\n        var _a;\n\n        var _b = this.options,\n            layout = _b.layout,\n            layoutId = _b.layoutId;\n        /**\n         * If this section of the tree isn't animating we can\n         * delete our target sources for the following frame.\n         */\n\n        this.isTreeAnimating = Boolean(((_a = this.parent) === null || _a === void 0 ? void 0 : _a.isTreeAnimating) || this.currentAnimation || this.pendingAnimation);\n\n        if (!this.isTreeAnimating) {\n          this.targetDelta = this.relativeTarget = undefined;\n        }\n\n        if (!this.layout || !(layout || layoutId)) return;\n        var lead = this.getLead();\n        /**\n         * Reset the corrected box with the latest values from box, as we're then going\n         * to perform mutative operations on it.\n         */\n\n        copyBoxInto(this.layoutCorrected, this.layout.actual);\n        /**\n         * Apply all the parent deltas to this box to produce the corrected box. This\n         * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n         */\n\n        applyTreeDeltas(this.layoutCorrected, this.treeScale, this.path, Boolean(this.resumingFrom) || this !== lead);\n        var target = lead.target;\n        if (!target) return;\n\n        if (!this.projectionDelta) {\n          this.projectionDelta = createDelta();\n          this.projectionDeltaWithTransform = createDelta();\n        }\n\n        var prevTreeScaleX = this.treeScale.x;\n        var prevTreeScaleY = this.treeScale.y;\n        var prevProjectionTransform = this.projectionTransform;\n        /**\n         * Update the delta between the corrected box and the target box before user-set transforms were applied.\n         * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n         * for our layout reprojection, but still allow them to be scaled correctly by the user.\n         * It might be that to simplify this we may want to accept that user-set scale is also corrected\n         * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n         * to allow people to choose whether these styles are corrected based on just the\n         * layout reprojection or the final bounding box.\n         */\n\n        calcBoxDelta(this.projectionDelta, this.layoutCorrected, target, this.latestValues);\n        this.projectionTransform = buildProjectionTransform(this.projectionDelta, this.treeScale);\n\n        if (this.projectionTransform !== prevProjectionTransform || this.treeScale.x !== prevTreeScaleX || this.treeScale.y !== prevTreeScaleY) {\n          this.hasProjected = true;\n          this.scheduleRender();\n          this.notifyListeners(\"projectionUpdate\", target);\n        }\n      };\n\n      ProjectionNode.prototype.hide = function () {\n        this.isVisible = false; // TODO: Schedule render\n      };\n\n      ProjectionNode.prototype.show = function () {\n        this.isVisible = true; // TODO: Schedule render\n      };\n\n      ProjectionNode.prototype.scheduleRender = function (notifyAll) {\n        var _a, _b, _c;\n\n        if (notifyAll === void 0) {\n          notifyAll = true;\n        }\n\n        (_b = (_a = this.options).scheduleRender) === null || _b === void 0 ? void 0 : _b.call(_a);\n        notifyAll && ((_c = this.getStack()) === null || _c === void 0 ? void 0 : _c.scheduleRender());\n\n        if (this.resumingFrom && !this.resumingFrom.instance) {\n          this.resumingFrom = undefined;\n        }\n      };\n\n      ProjectionNode.prototype.setAnimationOrigin = function (delta, hasOnlyRelativeTargetChanged) {\n        var _this = this;\n\n        var _a;\n\n        if (hasOnlyRelativeTargetChanged === void 0) {\n          hasOnlyRelativeTargetChanged = false;\n        }\n\n        var snapshot = this.snapshot;\n        var snapshotLatestValues = (snapshot === null || snapshot === void 0 ? void 0 : snapshot.latestValues) || {};\n\n        var mixedValues = __assign({}, this.latestValues);\n\n        var targetDelta = createDelta();\n        this.relativeTarget = this.relativeTargetOrigin = undefined;\n        this.attemptToResolveRelativeTarget = !hasOnlyRelativeTargetChanged;\n        var relativeLayout = createBox();\n        var isSharedLayoutAnimation = snapshot === null || snapshot === void 0 ? void 0 : snapshot.isShared;\n        var isOnlyMember = (((_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.members.length) || 0) <= 1;\n        var shouldCrossfadeOpacity = Boolean(isSharedLayoutAnimation && !isOnlyMember && this.options.crossfade === true && !this.path.some(hasOpacityCrossfade));\n\n        this.mixTargetDelta = function (latest) {\n          var _a;\n\n          var progress = latest / 1000;\n          mixAxisDelta(targetDelta.x, delta.x, progress);\n          mixAxisDelta(targetDelta.y, delta.y, progress);\n\n          _this.setTargetDelta(targetDelta);\n\n          if (_this.relativeTarget && _this.relativeTargetOrigin && _this.layout && ((_a = _this.relativeParent) === null || _a === void 0 ? void 0 : _a.layout)) {\n            calcRelativePosition(relativeLayout, _this.layout.actual, _this.relativeParent.layout.actual);\n            mixBox(_this.relativeTarget, _this.relativeTargetOrigin, relativeLayout, progress);\n          }\n\n          if (isSharedLayoutAnimation) {\n            _this.animationValues = mixedValues;\n            mixValues(mixedValues, snapshotLatestValues, _this.latestValues, progress, shouldCrossfadeOpacity, isOnlyMember);\n          }\n\n          _this.root.scheduleUpdateProjection();\n\n          _this.scheduleRender();\n        };\n\n        this.mixTargetDelta(0);\n      };\n\n      ProjectionNode.prototype.startAnimation = function (options) {\n        var _this = this;\n\n        var _a, _b;\n\n        (_a = this.currentAnimation) === null || _a === void 0 ? void 0 : _a.stop();\n\n        if (this.resumingFrom) {\n          (_b = this.resumingFrom.currentAnimation) === null || _b === void 0 ? void 0 : _b.stop();\n        }\n\n        if (this.pendingAnimation) {\n          cancelSync.update(this.pendingAnimation);\n          this.pendingAnimation = undefined;\n        }\n        /**\n         * Start the animation in the next frame to have a frame with progress 0,\n         * where the target is the same as when the animation started, so we can\n         * calculate the relative positions correctly for instant transitions.\n         */\n\n\n        this.pendingAnimation = sync.update(function () {\n          globalProjectionState.hasAnimatedSinceResize = true;\n          _this.currentAnimation = animate(0, animationTarget, __assign(__assign({}, options), {\n            onUpdate: function onUpdate(latest) {\n              var _a;\n\n              _this.mixTargetDelta(latest);\n\n              (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, latest);\n            },\n            onComplete: function onComplete() {\n              var _a;\n\n              (_a = options.onComplete) === null || _a === void 0 ? void 0 : _a.call(options);\n\n              _this.completeAnimation();\n            }\n          }));\n\n          if (_this.resumingFrom) {\n            _this.resumingFrom.currentAnimation = _this.currentAnimation;\n          }\n\n          _this.pendingAnimation = undefined;\n        });\n      };\n\n      ProjectionNode.prototype.completeAnimation = function () {\n        var _a;\n\n        if (this.resumingFrom) {\n          this.resumingFrom.currentAnimation = undefined;\n          this.resumingFrom.preserveOpacity = undefined;\n        }\n\n        (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.exitAnimationComplete();\n        this.resumingFrom = this.currentAnimation = this.animationValues = undefined;\n        this.notifyListeners(\"animationComplete\");\n      };\n\n      ProjectionNode.prototype.finishAnimation = function () {\n        var _a;\n\n        if (this.currentAnimation) {\n          (_a = this.mixTargetDelta) === null || _a === void 0 ? void 0 : _a.call(this, animationTarget);\n          this.currentAnimation.stop();\n        }\n\n        this.completeAnimation();\n      };\n\n      ProjectionNode.prototype.applyTransformsToTarget = function () {\n        var _a = this.getLead(),\n            targetWithTransforms = _a.targetWithTransforms,\n            target = _a.target,\n            layout = _a.layout,\n            latestValues = _a.latestValues;\n\n        if (!targetWithTransforms || !target || !layout) return;\n        copyBoxInto(targetWithTransforms, target);\n        /**\n         * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n         * This is the final box that we will then project into by calculating a transform delta and\n         * applying it to the corrected box.\n         */\n\n        transformBox(targetWithTransforms, latestValues);\n        /**\n         * Update the delta between the corrected box and the final target box, after\n         * user-set transforms are applied to it. This will be used by the renderer to\n         * create a transform style that will reproject the element from its actual layout\n         * into the desired bounding box.\n         */\n\n        calcBoxDelta(this.projectionDeltaWithTransform, this.layoutCorrected, targetWithTransforms, latestValues);\n      };\n\n      ProjectionNode.prototype.registerSharedNode = function (layoutId, node) {\n        var _a, _b, _c;\n\n        if (!this.sharedNodes.has(layoutId)) {\n          this.sharedNodes.set(layoutId, new NodeStack());\n        }\n\n        var stack = this.sharedNodes.get(layoutId);\n        stack.add(node);\n        node.promote({\n          transition: (_a = node.options.initialPromotionConfig) === null || _a === void 0 ? void 0 : _a.transition,\n          preserveFollowOpacity: (_c = (_b = node.options.initialPromotionConfig) === null || _b === void 0 ? void 0 : _b.shouldPreserveFollowOpacity) === null || _c === void 0 ? void 0 : _c.call(_b, node)\n        });\n      };\n\n      ProjectionNode.prototype.isLead = function () {\n        var stack = this.getStack();\n        return stack ? stack.lead === this : true;\n      };\n\n      ProjectionNode.prototype.getLead = function () {\n        var _a;\n\n        var layoutId = this.options.layoutId;\n        return layoutId ? ((_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.lead) || this : this;\n      };\n\n      ProjectionNode.prototype.getPrevLead = function () {\n        var _a;\n\n        var layoutId = this.options.layoutId;\n        return layoutId ? (_a = this.getStack()) === null || _a === void 0 ? void 0 : _a.prevLead : undefined;\n      };\n\n      ProjectionNode.prototype.getStack = function () {\n        var layoutId = this.options.layoutId;\n        if (layoutId) return this.root.sharedNodes.get(layoutId);\n      };\n\n      ProjectionNode.prototype.promote = function (_a) {\n        var _b = _a === void 0 ? {} : _a,\n            needsReset = _b.needsReset,\n            transition = _b.transition,\n            preserveFollowOpacity = _b.preserveFollowOpacity;\n\n        var stack = this.getStack();\n        if (stack) stack.promote(this, preserveFollowOpacity);\n\n        if (needsReset) {\n          this.projectionDelta = undefined;\n          this.needsReset = true;\n        }\n\n        if (transition) this.setOptions({\n          transition: transition\n        });\n      };\n\n      ProjectionNode.prototype.relegate = function () {\n        var stack = this.getStack();\n\n        if (stack) {\n          return stack.relegate(this);\n        } else {\n          return false;\n        }\n      };\n\n      ProjectionNode.prototype.resetRotation = function () {\n        var visualElement = this.options.visualElement;\n        if (!visualElement) return; // If there's no detected rotation values, we can early return without a forced render.\n\n        var hasRotate = false; // Keep a record of all the values we've reset\n\n        var resetValues = {}; // Check the rotate value of all axes and reset to 0\n\n        for (var i = 0; i < transformAxes.length; i++) {\n          var axis = transformAxes[i];\n          var key = \"rotate\" + axis; // If this rotation doesn't exist as a motion value, then we don't\n          // need to reset it\n\n          if (!visualElement.getStaticValue(key)) {\n            continue;\n          }\n\n          hasRotate = true; // Record the rotation and then temporarily set it to 0\n\n          resetValues[key] = visualElement.getStaticValue(key);\n          visualElement.setStaticValue(key, 0);\n        } // If there's no rotation values, we don't need to do any more.\n\n\n        if (!hasRotate) return; // Force a render of this element to apply the transform with all rotations\n        // set to 0.\n\n        visualElement === null || visualElement === void 0 ? void 0 : visualElement.syncRender(); // Put back all the values we reset\n\n        for (var key in resetValues) {\n          visualElement.setStaticValue(key, resetValues[key]);\n        } // Schedule a render for the next frame. This ensures we won't visually\n        // see the element with the reset rotate value applied.\n\n\n        visualElement.scheduleRender();\n      };\n\n      ProjectionNode.prototype.getProjectionStyles = function (styleProp) {\n        var _a, _b, _c, _d, _e, _f;\n\n        if (styleProp === void 0) {\n          styleProp = {};\n        } // TODO: Return lifecycle-persistent object\n\n\n        var styles = {};\n        if (!this.instance || this.isSVG) return styles;\n\n        if (!this.isVisible) {\n          return {\n            visibility: \"hidden\"\n          };\n        } else {\n          styles.visibility = \"\";\n        }\n\n        var transformTemplate = (_a = this.options.visualElement) === null || _a === void 0 ? void 0 : _a.getProps().transformTemplate;\n\n        if (this.needsReset) {\n          this.needsReset = false;\n          styles.opacity = \"\";\n          styles.pointerEvents = resolveMotionValue(styleProp.pointerEvents) || \"\";\n          styles.transform = transformTemplate ? transformTemplate(this.latestValues, \"\") : \"none\";\n          return styles;\n        }\n\n        var lead = this.getLead();\n\n        if (!this.projectionDelta || !this.layout || !lead.target) {\n          var emptyStyles = {};\n\n          if (this.options.layoutId) {\n            emptyStyles.opacity = (_b = this.latestValues.opacity) !== null && _b !== void 0 ? _b : 1;\n            emptyStyles.pointerEvents = resolveMotionValue(styleProp.pointerEvents) || \"\";\n          }\n\n          if (this.hasProjected && !hasTransform(this.latestValues)) {\n            emptyStyles.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\";\n            this.hasProjected = false;\n          }\n\n          return emptyStyles;\n        }\n\n        var valuesToRender = lead.animationValues || lead.latestValues;\n        this.applyTransformsToTarget();\n        styles.transform = buildProjectionTransform(this.projectionDeltaWithTransform, this.treeScale, valuesToRender);\n\n        if (transformTemplate) {\n          styles.transform = transformTemplate(valuesToRender, styles.transform);\n        }\n\n        var _g = this.projectionDelta,\n            x = _g.x,\n            y = _g.y;\n        styles.transformOrigin = \"\".concat(x.origin * 100, \"% \").concat(y.origin * 100, \"% 0\");\n\n        if (lead.animationValues) {\n          /**\n           * If the lead component is animating, assign this either the entering/leaving\n           * opacity\n           */\n          styles.opacity = lead === this ? (_d = (_c = valuesToRender.opacity) !== null && _c !== void 0 ? _c : this.latestValues.opacity) !== null && _d !== void 0 ? _d : 1 : this.preserveOpacity ? this.latestValues.opacity : valuesToRender.opacityExit;\n        } else {\n          /**\n           * Or we're not animating at all, set the lead component to its actual\n           * opacity and other components to hidden.\n           */\n          styles.opacity = lead === this ? (_e = valuesToRender.opacity) !== null && _e !== void 0 ? _e : \"\" : (_f = valuesToRender.opacityExit) !== null && _f !== void 0 ? _f : 0;\n        }\n        /**\n         * Apply scale correction\n         */\n\n\n        for (var key in scaleCorrectors) {\n          if (valuesToRender[key] === undefined) continue;\n          var _h = scaleCorrectors[key],\n              correct = _h.correct,\n              applyTo = _h.applyTo;\n          var corrected = correct(valuesToRender[key], lead);\n\n          if (applyTo) {\n            var num = applyTo.length;\n\n            for (var i = 0; i < num; i++) {\n              styles[applyTo[i]] = corrected;\n            }\n          } else {\n            styles[key] = corrected;\n          }\n        }\n        /**\n         * Disable pointer events on follow components. This is to ensure\n         * that if a follow component covers a lead component it doesn't block\n         * pointer events on the lead.\n         */\n\n\n        if (this.options.layoutId) {\n          styles.pointerEvents = lead === this ? resolveMotionValue(styleProp.pointerEvents) || \"\" : \"none\";\n        }\n\n        return styles;\n      };\n\n      ProjectionNode.prototype.clearSnapshot = function () {\n        this.resumeFrom = this.snapshot = undefined;\n      }; // Only run on root\n\n\n      ProjectionNode.prototype.resetTree = function () {\n        this.root.nodes.forEach(function (node) {\n          var _a;\n\n          return (_a = node.currentAnimation) === null || _a === void 0 ? void 0 : _a.stop();\n        });\n        this.root.nodes.forEach(clearMeasurements);\n        this.root.sharedNodes.clear();\n      };\n\n      return ProjectionNode;\n    }()\n  );\n}\n\nfunction updateLayout(node) {\n  node.updateLayout();\n}\n\nfunction notifyLayoutUpdate(node) {\n  var _a, _b, _c, _d;\n\n  var snapshot = (_b = (_a = node.resumeFrom) === null || _a === void 0 ? void 0 : _a.snapshot) !== null && _b !== void 0 ? _b : node.snapshot;\n\n  if (node.isLead() && node.layout && snapshot && node.hasListeners(\"didUpdate\")) {\n    var _e = node.layout,\n        layout_1 = _e.actual,\n        measuredLayout = _e.measured; // TODO Maybe we want to also resize the layout snapshot so we don't trigger\n    // animations for instance if layout=\"size\" and an element has only changed position\n\n    if (node.options.animationType === \"size\") {\n      eachAxis(function (axis) {\n        var axisSnapshot = snapshot.isShared ? snapshot.measured[axis] : snapshot.layout[axis];\n        var length = calcLength(axisSnapshot);\n        axisSnapshot.min = layout_1[axis].min;\n        axisSnapshot.max = axisSnapshot.min + length;\n      });\n    } else if (node.options.animationType === \"position\") {\n      eachAxis(function (axis) {\n        var axisSnapshot = snapshot.isShared ? snapshot.measured[axis] : snapshot.layout[axis];\n        var length = calcLength(layout_1[axis]);\n        axisSnapshot.max = axisSnapshot.min + length;\n      });\n    }\n\n    var layoutDelta = createDelta();\n    calcBoxDelta(layoutDelta, layout_1, snapshot.layout);\n    var visualDelta = createDelta();\n\n    if (snapshot.isShared) {\n      calcBoxDelta(visualDelta, node.applyTransform(measuredLayout, true), snapshot.measured);\n    } else {\n      calcBoxDelta(visualDelta, layout_1, snapshot.layout);\n    }\n\n    var hasLayoutChanged = !isDeltaZero(layoutDelta);\n    var hasRelativeTargetChanged = false;\n\n    if (!node.resumeFrom) {\n      node.relativeParent = node.getClosestProjectingParent();\n      /**\n       * If the relativeParent is itself resuming from a different element then\n       * the relative snapshot is not relavent\n       */\n\n      if (node.relativeParent && !node.relativeParent.resumeFrom) {\n        var _f = node.relativeParent,\n            parentSnapshot = _f.snapshot,\n            parentLayout = _f.layout;\n\n        if (parentSnapshot && parentLayout) {\n          var relativeSnapshot = createBox();\n          calcRelativePosition(relativeSnapshot, snapshot.layout, parentSnapshot.layout);\n          var relativeLayout = createBox();\n          calcRelativePosition(relativeLayout, layout_1, parentLayout.actual);\n\n          if (!boxEquals(relativeSnapshot, relativeLayout)) {\n            hasRelativeTargetChanged = true;\n          }\n        }\n      }\n    }\n\n    node.notifyListeners(\"didUpdate\", {\n      layout: layout_1,\n      snapshot: snapshot,\n      delta: visualDelta,\n      layoutDelta: layoutDelta,\n      hasLayoutChanged: hasLayoutChanged,\n      hasRelativeTargetChanged: hasRelativeTargetChanged\n    });\n  } else if (node.isLead()) {\n    (_d = (_c = node.options).onExitComplete) === null || _d === void 0 ? void 0 : _d.call(_c);\n  }\n  /**\n   * Clearing transition\n   * TODO: Investigate why this transition is being passed in as {type: false } from Framer\n   * and why we need it at all\n   */\n\n\n  node.options.transition = undefined;\n}\n\nfunction clearSnapshot(node) {\n  node.clearSnapshot();\n}\n\nfunction clearMeasurements(node) {\n  node.clearMeasurements();\n}\n\nfunction resetTransformStyle(node) {\n  node.resetTransform();\n}\n\nfunction finishAnimation(node) {\n  node.finishAnimation();\n  node.targetDelta = node.relativeTarget = node.target = undefined;\n}\n\nfunction resolveTargetDelta(node) {\n  node.resolveTargetDelta();\n}\n\nfunction calcProjection(node) {\n  node.calcProjection();\n}\n\nfunction resetRotation(node) {\n  node.resetRotation();\n}\n\nfunction removeLeadSnapshots(stack) {\n  stack.removeLeadSnapshot();\n}\n\nfunction mixAxisDelta(output, delta, p) {\n  output.translate = mix(delta.translate, 0, p);\n  output.scale = mix(delta.scale, 1, p);\n  output.origin = delta.origin;\n  output.originPoint = delta.originPoint;\n}\n\nfunction mixAxis(output, from, to, p) {\n  output.min = mix(from.min, to.min, p);\n  output.max = mix(from.max, to.max, p);\n}\n\nfunction mixBox(output, from, to, p) {\n  mixAxis(output.x, from.x, to.x, p);\n  mixAxis(output.y, from.y, to.y, p);\n}\n\nfunction hasOpacityCrossfade(node) {\n  return node.animationValues && node.animationValues.opacityExit !== undefined;\n}\n\nvar defaultLayoutTransition = {\n  duration: 0.45,\n  ease: [0.4, 0, 0.1, 1]\n};\n\nfunction mountNodeEarly(node, id) {\n  /**\n   * Rather than searching the DOM from document we can search the\n   * path for the deepest mounted ancestor and search from there\n   */\n  var searchNode = node.root;\n\n  for (var i = node.path.length - 1; i >= 0; i--) {\n    if (Boolean(node.path[i].instance)) {\n      searchNode = node.path[i];\n      break;\n    }\n  }\n\n  var searchElement = searchNode && searchNode !== node.root ? searchNode.instance : document;\n  var element = searchElement.querySelector(\"[data-projection-id=\\\"\".concat(id, \"\\\"]\"));\n  if (element) node.mount(element, true);\n}\n\nfunction roundAxis(axis) {\n  axis.min = Math.round(axis.min);\n  axis.max = Math.round(axis.max);\n}\n\nfunction roundBox(box) {\n  roundAxis(box.x);\n  roundAxis(box.y);\n}\n\nexport { createProjectionNode, globalProjectionState, mixAxis, mixAxisDelta, mixBox };","var createAxisDelta = function createAxisDelta() {\n  return {\n    translate: 0,\n    scale: 1,\n    origin: 0,\n    originPoint: 0\n  };\n};\n\nvar createDelta = function createDelta() {\n  return {\n    x: createAxisDelta(),\n    y: createAxisDelta()\n  };\n};\n\nvar createAxis = function createAxis() {\n  return {\n    min: 0,\n    max: 0\n  };\n};\n\nvar createBox = function createBox() {\n  return {\n    x: createAxis(),\n    y: createAxis()\n  };\n};\n\nexport { createAxis, createAxisDelta, createBox, createDelta };","import { motionValue } from '../value/index.mjs';\nimport { isMotionValue } from '../value/utils/is-motion-value.mjs';\nimport { startAnimation } from './utils/transitions.mjs';\n/**\n * Animate a single value or a `MotionValue`.\n *\n * The first argument is either a `MotionValue` to animate, or an initial animation value.\n *\n * The second is either a value to animate to, or an array of keyframes to animate through.\n *\n * The third argument can be either tween or spring options, and optional lifecycle methods: `onUpdate`, `onPlay`, `onComplete`, `onRepeat` and `onStop`.\n *\n * Returns `AnimationPlaybackControls`, currently just a `stop` method.\n *\n * ```javascript\n * const x = useMotionValue(0)\n *\n * useEffect(() => {\n *   const controls = animate(x, 100, {\n *     type: \"spring\",\n *     stiffness: 2000,\n *     onComplete: v => {}\n *   })\n *\n *   return controls.stop\n * })\n * ```\n *\n * @public\n */\n\nfunction animate(from, to, transition) {\n  if (transition === void 0) {\n    transition = {};\n  }\n\n  var value = isMotionValue(from) ? from : motionValue(from);\n  startAnimation(\"\", value, to, transition);\n  return {\n    stop: function stop() {\n      return value.stop();\n    },\n    isAnimating: function isAnimating() {\n      return value.isAnimating();\n    }\n  };\n}\n\nexport { animate };","import { useConstant } from '../../utils/use-constant.mjs';\nimport { globalProjectionState } from './create-projection-node.mjs';\nvar id = 1;\n\nfunction useProjectionId() {\n  return useConstant(function () {\n    if (globalProjectionState.hasEverUpdated) {\n      return id++;\n    }\n  });\n}\n\nexport { useProjectionId };","import { createContext } from 'react';\n/**\n * @internal\n */\n\nvar LayoutGroupContext = createContext({});\nexport { LayoutGroupContext };","import { createContext } from 'react';\n/**\n * @internal\n */\n\nvar SwitchLayoutGroupContext = createContext({});\nexport { SwitchLayoutGroupContext };","import { __extends } from 'tslib';\nimport React__default from 'react';\n\nvar VisualElementHandler =\n/** @class */\nfunction (_super) {\n  __extends(VisualElementHandler, _super);\n\n  function VisualElementHandler() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * Update visual element props as soon as we know this update is going to be commited.\n   */\n\n\n  VisualElementHandler.prototype.getSnapshotBeforeUpdate = function () {\n    this.updateProps();\n    return null;\n  };\n\n  VisualElementHandler.prototype.componentDidUpdate = function () {};\n\n  VisualElementHandler.prototype.updateProps = function () {\n    var _a = this.props,\n        visualElement = _a.visualElement,\n        props = _a.props;\n    if (visualElement) visualElement.setProps(props);\n  };\n\n  VisualElementHandler.prototype.render = function () {\n    return this.props.children;\n  };\n\n  return VisualElementHandler;\n}(React__default.Component);\n\nexport { VisualElementHandler };","import { __assign } from 'tslib';\nimport * as React from 'react';\nimport { forwardRef, useContext } from 'react';\nimport { useFeatures } from './features/use-features.mjs';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { MotionContext } from '../context/MotionContext/index.mjs';\nimport { useVisualElement } from './utils/use-visual-element.mjs';\nimport { useMotionRef } from './utils/use-motion-ref.mjs';\nimport { useCreateMotionContext } from '../context/MotionContext/create.mjs';\nimport { loadFeatures, featureDefinitions } from './features/definitions.mjs';\nimport { isBrowser } from '../utils/is-browser.mjs';\nimport { useProjectionId } from '../projection/node/id.mjs';\nimport { LayoutGroupContext } from '../context/LayoutGroupContext.mjs';\nimport { useProjection } from './features/use-projection.mjs';\nimport { VisualElementHandler } from './utils/VisualElementHandler.mjs';\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n *\n * @internal\n */\n\nfunction createMotionComponent(_a) {\n  var preloadedFeatures = _a.preloadedFeatures,\n      createVisualElement = _a.createVisualElement,\n      projectionNodeConstructor = _a.projectionNodeConstructor,\n      useRender = _a.useRender,\n      useVisualState = _a.useVisualState,\n      Component = _a.Component;\n  preloadedFeatures && loadFeatures(preloadedFeatures);\n\n  function MotionComponent(props, externalRef) {\n    var layoutId = useLayoutId(props);\n    props = __assign(__assign({}, props), {\n      layoutId: layoutId\n    });\n    /**\n     * If we're rendering in a static environment, we only visually update the component\n     * as a result of a React-rerender rather than interactions or animations. This\n     * means we don't need to load additional memory structures like VisualElement,\n     * or any gesture/animation features.\n     */\n\n    var config = useContext(MotionConfigContext);\n    var features = null;\n    var context = useCreateMotionContext(props);\n    /**\n     * Create a unique projection ID for this component. If a new component is added\n     * during a layout animation we'll use this to query the DOM and hydrate its ref early, allowing\n     * us to measure it as soon as any layout effect flushes pending layout animations.\n     *\n     * Performance note: It'd be better not to have to search the DOM for these elements.\n     * For newly-entering components it could be enough to only correct treeScale, in which\n     * case we could mount in a scale-correction mode. This wouldn't be enough for\n     * shared element transitions however. Perhaps for those we could revert to a root node\n     * that gets forceRendered and layout animations are triggered on its layout effect.\n     */\n\n    var projectionId = config.isStatic ? undefined : useProjectionId();\n    /**\n     *\n     */\n\n    var visualState = useVisualState(props, config.isStatic);\n\n    if (!config.isStatic && isBrowser) {\n      /**\n       * Create a VisualElement for this component. A VisualElement provides a common\n       * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n       * providing a way of rendering to these APIs outside of the React render loop\n       * for more performant animations and interactions\n       */\n      context.visualElement = useVisualElement(Component, visualState, __assign(__assign({}, config), props), createVisualElement);\n      useProjection(projectionId, props, context.visualElement, projectionNodeConstructor || featureDefinitions.projectionNodeConstructor);\n      /**\n       * Load Motion gesture and animation features. These are rendered as renderless\n       * components so each feature can optionally make use of React lifecycle methods.\n       */\n\n      features = useFeatures(props, context.visualElement, preloadedFeatures);\n    }\n    /**\n     * The mount order and hierarchy is specific to ensure our element ref\n     * is hydrated by the time features fire their effects.\n     */\n\n\n    return React.createElement(VisualElementHandler, {\n      visualElement: context.visualElement,\n      props: __assign(__assign({}, config), props)\n    }, features, React.createElement(MotionContext.Provider, {\n      value: context\n    }, useRender(Component, props, projectionId, useMotionRef(visualState, context.visualElement, externalRef), visualState, config.isStatic, context.visualElement)));\n  }\n\n  return forwardRef(MotionComponent);\n}\n\nfunction useLayoutId(_a) {\n  var _b;\n\n  var layoutId = _a.layoutId;\n  var layoutGroupId = (_b = useContext(LayoutGroupContext)) === null || _b === void 0 ? void 0 : _b.id;\n  return layoutGroupId && layoutId !== undefined ? layoutGroupId + \"-\" + layoutId : layoutId;\n}\n\nexport { createMotionComponent };","import { isRefObject } from '../../utils/is-ref-object.mjs';\nimport { useContext } from 'react';\nimport { SwitchLayoutGroupContext } from '../../context/SwitchLayoutGroupContext.mjs';\n\nfunction useProjection(projectionId, _a, visualElement, ProjectionNodeConstructor) {\n  var _b;\n\n  var layoutId = _a.layoutId,\n      layout = _a.layout,\n      drag = _a.drag,\n      dragConstraints = _a.dragConstraints,\n      layoutScroll = _a.layoutScroll;\n  var initialPromotionConfig = useContext(SwitchLayoutGroupContext);\n\n  if (!ProjectionNodeConstructor || !visualElement || (visualElement === null || visualElement === void 0 ? void 0 : visualElement.projection)) {\n    return;\n  }\n\n  visualElement.projection = new ProjectionNodeConstructor(projectionId, visualElement.getLatestValues(), (_b = visualElement.parent) === null || _b === void 0 ? void 0 : _b.projection);\n  visualElement.projection.setOptions({\n    layoutId: layoutId,\n    layout: layout,\n    alwaysMeasureLayout: Boolean(drag) || dragConstraints && isRefObject(dragConstraints),\n    visualElement: visualElement,\n    scheduleRender: function scheduleRender() {\n      return visualElement.scheduleRender();\n    },\n\n    /**\n     * TODO: Update options in an effect. This could be tricky as it'll be too late\n     * to update by the time layout animations run.\n     * We also need to fix this safeToRemove by linking it up to the one returned by usePresence,\n     * ensuring it gets called if there's no potential layout animations.\n     *\n     */\n    animationType: typeof layout === \"string\" ? layout : \"both\",\n    initialPromotionConfig: initialPromotionConfig,\n    layoutScroll: layoutScroll\n  });\n}\n\nexport { useProjection };","import { useCallback } from 'react';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\n\nfunction useMotionRef(visualState, visualElement, externalRef) {\n  return useCallback(function (instance) {\n    var _a;\n\n    instance && ((_a = visualState.mount) === null || _a === void 0 ? void 0 : _a.call(visualState, instance));\n\n    if (visualElement) {\n      instance ? visualElement.mount(instance) : visualElement.unmount();\n    }\n\n    if (externalRef) {\n      if (typeof externalRef === \"function\") {\n        externalRef(instance);\n      } else if (isRefObject(externalRef)) {\n        externalRef.current = instance;\n      }\n    }\n  },\n  /**\n   * Only pass a new ref callback to React if we've received a visual element\n   * factory. Otherwise we'll be mounting/remounting every time externalRef\n   * or other dependencies change.\n   */\n  [visualElement]);\n}\n\nexport { useMotionRef };","import { createMotionComponent } from '../../motion/index.mjs';\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\n\nfunction createMotionProxy(createConfig) {\n  function custom(Component, customMotionComponentConfig) {\n    if (customMotionComponentConfig === void 0) {\n      customMotionComponentConfig = {};\n    }\n\n    return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n  }\n\n  if (typeof Proxy === \"undefined\") {\n    return custom;\n  }\n  /**\n   * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n   * Rather than generating them anew every render.\n   */\n\n\n  var componentCache = new Map();\n  return new Proxy(custom, {\n    /**\n     * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n     * The prop name is passed through as `key` and we can use that to generate a `motion`\n     * DOM component with that name.\n     */\n    get: function get(_target, key) {\n      /**\n       * If this element doesn't exist in the component cache, create it and cache.\n       */\n      if (!componentCache.has(key)) {\n        componentCache.set(key, custom(key));\n      }\n\n      return componentCache.get(key);\n    }\n  });\n}\n\nexport { createMotionProxy };","/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nvar lowercaseSVGElements = [\"animate\", \"circle\", \"defs\", \"desc\", \"ellipse\", \"g\", \"image\", \"line\", \"filter\", \"marker\", \"mask\", \"metadata\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"rect\", \"stop\", \"svg\", \"switch\", \"symbol\", \"text\", \"tspan\", \"use\", \"view\"];\nexport { lowercaseSVGElements };","import { lowercaseSVGElements } from '../../svg/lowercase-elements.mjs';\n\nfunction isSVGComponent(Component) {\n  if (\n  /**\n   * If it's not a string, it's a custom React component. Currently we only support\n   * HTML custom React components.\n   */\n  typeof Component !== \"string\" ||\n  /**\n   * If it contains a dash, the element is a custom HTML webcomponent.\n   */\n  Component.includes(\"-\")) {\n    return false;\n  } else if (\n  /**\n   * If it's in our list of lowercase SVG tags, it's an SVG component\n   */\n  lowercaseSVGElements.indexOf(Component) > -1 ||\n  /**\n   * If it contains a capital letter, it's an SVG component\n   */\n  /[A-Z]/.test(Component)) {\n    return true;\n  }\n\n  return false;\n}\n\nexport { isSVGComponent };","import { scaleCorrectors } from '../../projection/styles/scale-correction.mjs';\nimport { isTransformProp, isTransformOriginProp } from '../../render/html/utils/transform.mjs';\n\nfunction isForcedMotionValue(key, _a) {\n  var layout = _a.layout,\n      layoutId = _a.layoutId;\n  return isTransformProp(key) || isTransformOriginProp(key) || (layout || layoutId !== undefined) && (!!scaleCorrectors[key] || key === \"opacity\");\n}\n\nexport { isForcedMotionValue };","import { sortTransformProps } from './transform.mjs';\nvar translateAlias = {\n  x: \"translateX\",\n  y: \"translateY\",\n  z: \"translateZ\",\n  transformPerspective: \"perspective\"\n};\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\n\nfunction buildTransform(_a, _b, transformIsDefault, transformTemplate) {\n  var transform = _a.transform,\n      transformKeys = _a.transformKeys;\n  var _c = _b.enableHardwareAcceleration,\n      enableHardwareAcceleration = _c === void 0 ? true : _c,\n      _d = _b.allowTransformNone,\n      allowTransformNone = _d === void 0 ? true : _d; // The transform string we're going to build into.\n\n  var transformString = \"\"; // Transform keys into their default order - this will determine the output order.\n\n  transformKeys.sort(sortTransformProps); // Track whether the defined transform has a defined z so we don't add a\n  // second to enable hardware acceleration\n\n  var transformHasZ = false; // Loop over each transform and build them into transformString\n\n  var numTransformKeys = transformKeys.length;\n\n  for (var i = 0; i < numTransformKeys; i++) {\n    var key = transformKeys[i];\n    transformString += \"\".concat(translateAlias[key] || key, \"(\").concat(transform[key], \") \");\n    if (key === \"z\") transformHasZ = true;\n  }\n\n  if (!transformHasZ && enableHardwareAcceleration) {\n    transformString += \"translateZ(0)\";\n  } else {\n    transformString = transformString.trim();\n  } // If we have a custom `transform` template, pass our transform values and\n  // generated transformString to that before returning\n\n\n  if (transformTemplate) {\n    transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n  } else if (allowTransformNone && transformIsDefault) {\n    transformString = \"none\";\n  }\n\n  return transformString;\n}\n/**\n * Build a transformOrigin style. Uses the same defaults as the browser for\n * undefined origins.\n */\n\n\nfunction buildTransformOrigin(_a) {\n  var _b = _a.originX,\n      originX = _b === void 0 ? \"50%\" : _b,\n      _c = _a.originY,\n      originY = _c === void 0 ? \"50%\" : _c,\n      _d = _a.originZ,\n      originZ = _d === void 0 ? 0 : _d;\n  return \"\".concat(originX, \" \").concat(originY, \" \").concat(originZ);\n}\n\nexport { buildTransform, buildTransformOrigin };","/**\n * Returns true if the provided key is a CSS variable\n */\nfunction isCSSVariable(key) {\n  return key.startsWith(\"--\");\n}\n\nexport { isCSSVariable };","/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nvar getValueAsType = function getValueAsType(value, type) {\n  return type && typeof value === \"number\" ? type.transform(value) : value;\n};\n\nexport { getValueAsType };","import { buildTransform, buildTransformOrigin } from './build-transform.mjs';\nimport { isCSSVariable } from '../../dom/utils/is-css-variable.mjs';\nimport { isTransformProp, isTransformOriginProp } from './transform.mjs';\nimport { getValueAsType } from '../../dom/value-types/get-as-type.mjs';\nimport { numberValueTypes } from '../../dom/value-types/number.mjs';\n\nfunction buildHTMLStyles(state, latestValues, options, transformTemplate) {\n  var _a;\n\n  var style = state.style,\n      vars = state.vars,\n      transform = state.transform,\n      transformKeys = state.transformKeys,\n      transformOrigin = state.transformOrigin; // Empty the transformKeys array. As we're throwing out refs to its items\n  // this might not be as cheap as suspected. Maybe using the array as a buffer\n  // with a manual incrementation would be better.\n\n  transformKeys.length = 0; // Track whether we encounter any transform or transformOrigin values.\n\n  var hasTransform = false;\n  var hasTransformOrigin = false; // Does the calculated transform essentially equal \"none\"?\n\n  var transformIsNone = true;\n  /**\n   * Loop over all our latest animated values and decide whether to handle them\n   * as a style or CSS variable.\n   *\n   * Transforms and transform origins are kept seperately for further processing.\n   */\n\n  for (var key in latestValues) {\n    var value = latestValues[key];\n    /**\n     * If this is a CSS variable we don't do any further processing.\n     */\n\n    if (isCSSVariable(key)) {\n      vars[key] = value;\n      continue;\n    } // Convert the value to its default value type, ie 0 -> \"0px\"\n\n\n    var valueType = numberValueTypes[key];\n    var valueAsType = getValueAsType(value, valueType);\n\n    if (isTransformProp(key)) {\n      // If this is a transform, flag to enable further transform processing\n      hasTransform = true;\n      transform[key] = valueAsType;\n      transformKeys.push(key); // If we already know we have a non-default transform, early return\n\n      if (!transformIsNone) continue; // Otherwise check to see if this is a default transform\n\n      if (value !== ((_a = valueType.default) !== null && _a !== void 0 ? _a : 0)) transformIsNone = false;\n    } else if (isTransformOriginProp(key)) {\n      transformOrigin[key] = valueAsType; // If this is a transform origin, flag and enable further transform-origin processing\n\n      hasTransformOrigin = true;\n    } else {\n      style[key] = valueAsType;\n    }\n  }\n\n  if (hasTransform) {\n    style.transform = buildTransform(state, options, transformIsNone, transformTemplate);\n  } else if (transformTemplate) {\n    style.transform = transformTemplate({}, \"\");\n  } else if (!latestValues.transform && style.transform) {\n    style.transform = \"none\";\n  }\n\n  if (hasTransformOrigin) {\n    style.transformOrigin = buildTransformOrigin(transformOrigin);\n  }\n}\n\nexport { buildHTMLStyles };","var createHtmlRenderState = function createHtmlRenderState() {\n  return {\n    style: {},\n    transform: {},\n    transformKeys: [],\n    transformOrigin: {},\n    vars: {}\n  };\n};\n\nexport { createHtmlRenderState };","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { isForcedMotionValue } from '../../motion/utils/is-forced-motion-value.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\nimport { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { createHtmlRenderState } from './utils/create-render-state.mjs';\n\nfunction copyRawValuesOnly(target, source, props) {\n  for (var key in source) {\n    if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n      target[key] = source[key];\n    }\n  }\n}\n\nfunction useInitialMotionValues(_a, visualState, isStatic) {\n  var transformTemplate = _a.transformTemplate;\n  return useMemo(function () {\n    var state = createHtmlRenderState();\n    buildHTMLStyles(state, visualState, {\n      enableHardwareAcceleration: !isStatic\n    }, transformTemplate);\n    var vars = state.vars,\n        style = state.style;\n    return __assign(__assign({}, vars), style);\n  }, [visualState]);\n}\n\nfunction useStyle(props, visualState, isStatic) {\n  var styleProp = props.style || {};\n  var style = {};\n  /**\n   * Copy non-Motion Values straight into style\n   */\n\n  copyRawValuesOnly(style, styleProp, props);\n  Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n\n  if (props.transformValues) {\n    style = props.transformValues(style);\n  }\n\n  return style;\n}\n\nfunction useHTMLProps(props, visualState, isStatic) {\n  // The `any` isn't ideal but it is the type of createElement props argument\n  var htmlProps = {};\n  var style = useStyle(props, visualState, isStatic);\n\n  if (Boolean(props.drag) && props.dragListener !== false) {\n    // Disable the ghost element when a user drags\n    htmlProps.draggable = false; // Disable text selection\n\n    style.userSelect = style.WebkitUserSelect = style.WebkitTouchCallout = \"none\"; // Disable scrolling on the draggable direction\n\n    style.touchAction = props.drag === true ? \"none\" : \"pan-\".concat(props.drag === \"x\" ? \"y\" : \"x\");\n  }\n\n  htmlProps.style = style;\n  return htmlProps;\n}\n\nexport { copyRawValuesOnly, useHTMLProps, useStyle };","/**\n * A list of all valid MotionProps.\n *\n * @internalremarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nvar validMotionProps = new Set([\"initial\", \"animate\", \"exit\", \"style\", \"variants\", \"transition\", \"transformTemplate\", \"transformValues\", \"custom\", \"inherit\", \"layout\", \"layoutId\", \"layoutDependency\", \"onLayoutAnimationComplete\", \"onLayoutMeasure\", \"onBeforeLayoutMeasure\", \"onAnimationStart\", \"onAnimationComplete\", \"onUpdate\", \"onDragStart\", \"onDrag\", \"onDragEnd\", \"onMeasureDragConstraints\", \"onDirectionLock\", \"onDragTransitionEnd\", \"drag\", \"dragControls\", \"dragListener\", \"dragConstraints\", \"dragDirectionLock\", \"dragSnapToOrigin\", \"_dragX\", \"_dragY\", \"dragElastic\", \"dragMomentum\", \"dragPropagation\", \"dragTransition\", \"whileDrag\", \"onPan\", \"onPanStart\", \"onPanEnd\", \"onPanSessionStart\", \"onTap\", \"onTapStart\", \"onTapCancel\", \"onHoverStart\", \"onHoverEnd\", \"whileFocus\", \"whileTap\", \"whileHover\", \"whileInView\", \"onViewportEnter\", \"onViewportLeave\", \"viewport\", \"layoutScroll\"]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\n\nfunction isValidMotionProp(key) {\n  return validMotionProps.has(key);\n}\n\nexport { isValidMotionProp };","import { isValidMotionProp } from '../../../motion/utils/valid-prop.mjs';\n\nvar shouldForward = function shouldForward(key) {\n  return !isValidMotionProp(key);\n};\n\nfunction loadExternalIsValidProp(isValidProp) {\n  if (!isValidProp) return; // Explicitly filter our events\n\n  shouldForward = function shouldForward(key) {\n    return key.startsWith(\"on\") ? !isValidMotionProp(key) : isValidProp(key);\n  };\n}\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\n\n\ntry {\n  /**\n   * We attempt to import this package but require won't be defined in esm environments, in that case\n   * isPropValid will have to be provided via `MotionContext`. In a 6.0.0 this should probably be removed\n   * in favour of explicit injection.\n   */\n  loadExternalIsValidProp(require(\"@emotion/is-prop-valid\").default);\n} catch (_a) {// We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\n\nfunction filterProps(props, isDom, forwardMotionProps) {\n  var filteredProps = {};\n\n  for (var key in props) {\n    if (shouldForward(key) || forwardMotionProps === true && isValidMotionProp(key) || !isDom && !isValidMotionProp(key) || // If trying to use native HTML drag events, forward drag listeners\n    props[\"draggable\"] && key.startsWith(\"onDrag\")) {\n      filteredProps[key] = props[key];\n    }\n  }\n\n  return filteredProps;\n}\n\nexport { filterProps, loadExternalIsValidProp };","import { px } from 'style-value-types';\n\nfunction calcOrigin(origin, offset, size) {\n  return typeof origin === \"string\" ? origin : px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\n\n\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n  var pxOriginX = calcOrigin(originX, dimensions.x, dimensions.width);\n  var pxOriginY = calcOrigin(originY, dimensions.y, dimensions.height);\n  return \"\".concat(pxOriginX, \" \").concat(pxOriginY);\n}\n\nexport { calcSVGTransformOrigin };","import { px } from 'style-value-types';\nvar dashKeys = {\n  offset: \"stroke-dashoffset\",\n  array: \"stroke-dasharray\"\n};\nvar camelKeys = {\n  offset: \"strokeDashoffset\",\n  array: \"strokeDasharray\"\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\n\nfunction buildSVGPath(attrs, length, spacing, offset, useDashCase) {\n  if (spacing === void 0) {\n    spacing = 1;\n  }\n\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  if (useDashCase === void 0) {\n    useDashCase = true;\n  } // Normalise path length by setting SVG attribute pathLength to 1\n\n\n  attrs.pathLength = 1; // We use dash case when setting attributes directly to the DOM node and camel case\n  // when defining props on a React component.\n\n  var keys = useDashCase ? dashKeys : camelKeys; // Build the dash offset\n\n  attrs[keys.offset] = px.transform(-offset); // Build the dash array\n\n  var pathLength = px.transform(length);\n  var pathSpacing = px.transform(spacing);\n  attrs[keys.array] = \"\".concat(pathLength, \" \").concat(pathSpacing);\n}\n\nexport { buildSVGPath };","import { __rest } from 'tslib';\nimport { buildHTMLStyles } from '../../html/utils/build-styles.mjs';\nimport { calcSVGTransformOrigin } from './transform-origin.mjs';\nimport { buildSVGPath } from './path.mjs';\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\n\nfunction buildSVGAttrs(state, _a, options, transformTemplate) {\n  var attrX = _a.attrX,\n      attrY = _a.attrY,\n      originX = _a.originX,\n      originY = _a.originY,\n      pathLength = _a.pathLength,\n      _b = _a.pathSpacing,\n      pathSpacing = _b === void 0 ? 1 : _b,\n      _c = _a.pathOffset,\n      pathOffset = _c === void 0 ? 0 : _c,\n      // This is object creation, which we try to avoid per-frame.\n  latest = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n\n  buildHTMLStyles(state, latest, options, transformTemplate);\n  state.attrs = state.style;\n  state.style = {};\n  var attrs = state.attrs,\n      style = state.style,\n      dimensions = state.dimensions;\n  /**\n   * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n   * and copy it into style.\n   */\n\n  if (attrs.transform) {\n    if (dimensions) style.transform = attrs.transform;\n    delete attrs.transform;\n  } // Parse transformOrigin\n\n\n  if (dimensions && (originX !== undefined || originY !== undefined || style.transform)) {\n    style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n  } // Treat x/y not as shortcuts but as actual attributes\n\n\n  if (attrX !== undefined) attrs.x = attrX;\n  if (attrY !== undefined) attrs.y = attrY; // Build SVG path if one has been defined\n\n  if (pathLength !== undefined) {\n    buildSVGPath(attrs, pathLength, pathSpacing, pathOffset, false);\n  }\n}\n\nexport { buildSVGAttrs };","import { __assign } from 'tslib';\nimport { createHtmlRenderState } from '../../html/utils/create-render-state.mjs';\n\nvar createSvgRenderState = function createSvgRenderState() {\n  return __assign(__assign({}, createHtmlRenderState()), {\n    attrs: {}\n  });\n};\n\nexport { createSvgRenderState };","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { copyRawValuesOnly } from '../html/use-props.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { createSvgRenderState } from './utils/create-render-state.mjs';\n\nfunction useSVGProps(props, visualState) {\n  var visualProps = useMemo(function () {\n    var state = createSvgRenderState();\n    buildSVGAttrs(state, visualState, {\n      enableHardwareAcceleration: false\n    }, props.transformTemplate);\n    return __assign(__assign({}, state.attrs), {\n      style: __assign({}, state.style)\n    });\n  }, [visualState]);\n\n  if (props.style) {\n    var rawStyles = {};\n    copyRawValuesOnly(rawStyles, props.style, props);\n    visualProps.style = __assign(__assign({}, rawStyles), visualProps.style);\n  }\n\n  return visualProps;\n}\n\nexport { useSVGProps };","import { __assign } from 'tslib';\nimport { createElement } from 'react';\nimport { useHTMLProps } from '../html/use-props.mjs';\nimport { filterProps } from './utils/filter-props.mjs';\nimport { isSVGComponent } from './utils/is-svg-component.mjs';\nimport { useSVGProps } from '../svg/use-props.mjs';\n\nfunction createUseRender(forwardMotionProps) {\n  if (forwardMotionProps === void 0) {\n    forwardMotionProps = false;\n  }\n\n  var useRender = function useRender(Component, props, projectionId, ref, _a, isStatic) {\n    var latestValues = _a.latestValues;\n    var useVisualProps = isSVGComponent(Component) ? useSVGProps : useHTMLProps;\n    var visualProps = useVisualProps(props, latestValues, isStatic);\n    var filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n\n    var elementProps = __assign(__assign(__assign({}, filteredProps), visualProps), {\n      ref: ref\n    });\n\n    if (projectionId) {\n      elementProps[\"data-projection-id\"] = projectionId;\n    }\n\n    return createElement(Component, elementProps);\n  };\n\n  return useRender;\n}\n\nexport { createUseRender };","var CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = \"$1-$2\";\n/**\n * Convert camelCase to dash-case properties.\n */\n\nvar camelToDash = function camelToDash(str) {\n  return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nexport { camelToDash };","function renderHTML(element, _a, styleProp, projection) {\n  var style = _a.style,\n      vars = _a.vars;\n  Object.assign(element.style, style, projection && projection.getProjectionStyles(styleProp)); // Loop over any CSS variables and assign those.\n\n  for (var key in vars) {\n    element.style.setProperty(key, vars[key]);\n  }\n}\n\nexport { renderHTML };","/**\n * A set of attribute names that are always read/written as camel case.\n */\nvar camelCaseAttributes = new Set([\"baseFrequency\", \"diffuseConstant\", \"kernelMatrix\", \"kernelUnitLength\", \"keySplines\", \"keyTimes\", \"limitingConeAngle\", \"markerHeight\", \"markerWidth\", \"numOctaves\", \"targetX\", \"targetY\", \"surfaceScale\", \"specularConstant\", \"specularExponent\", \"stdDeviation\", \"tableValues\", \"viewBox\", \"gradientTransform\", \"pathLength\"]);\nexport { camelCaseAttributes };","import { camelToDash } from '../../dom/utils/camel-to-dash.mjs';\nimport { renderHTML } from '../../html/utils/render.mjs';\nimport { camelCaseAttributes } from './camel-case-attrs.mjs';\n\nfunction renderSVG(element, renderState) {\n  renderHTML(element, renderState);\n\n  for (var key in renderState.attrs) {\n    element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n  }\n}\n\nexport { renderSVG };","import { isForcedMotionValue } from '../../../motion/utils/is-forced-motion-value.mjs';\nimport { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\n\nfunction scrapeMotionValuesFromProps(props) {\n  var style = props.style;\n  var newValues = {};\n\n  for (var key in style) {\n    if (isMotionValue(style[key]) || isForcedMotionValue(key, props)) {\n      newValues[key] = style[key];\n    }\n  }\n\n  return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };","import { isMotionValue } from '../../../value/utils/is-motion-value.mjs';\nimport { scrapeMotionValuesFromProps as scrapeMotionValuesFromProps$1 } from '../../html/utils/scrape-motion-values.mjs';\n\nfunction scrapeMotionValuesFromProps(props) {\n  var newValues = scrapeMotionValuesFromProps$1(props);\n\n  for (var key in props) {\n    if (isMotionValue(props[key])) {\n      var targetKey = key === \"x\" || key === \"y\" ? \"attr\" + key.toUpperCase() : key;\n      newValues[targetKey] = props[key];\n    }\n  }\n\n  return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };","function isAnimationControls(v) {\n  return typeof v === \"object\" && typeof v.start === \"function\";\n}\n\nexport { isAnimationControls };","import { __rest } from 'tslib';\nimport { useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { checkIfControllingVariants, checkIfVariantNode, resolveVariantFromProps } from '../../render/utils/variants.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.mjs';\nimport { MotionContext } from '../../context/MotionContext/index.mjs';\n\nfunction makeState(_a, props, context, presenceContext) {\n  var scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps,\n      createRenderState = _a.createRenderState,\n      onMount = _a.onMount;\n  var state = {\n    latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n    renderState: createRenderState()\n  };\n\n  if (onMount) {\n    state.mount = function (instance) {\n      return onMount(props, instance, state);\n    };\n  }\n\n  return state;\n}\n\nvar makeUseVisualState = function makeUseVisualState(config) {\n  return function (props, isStatic) {\n    var context = useContext(MotionContext);\n    var presenceContext = useContext(PresenceContext);\n    return isStatic ? makeState(config, props, context, presenceContext) : useConstant(function () {\n      return makeState(config, props, context, presenceContext);\n    });\n  };\n};\n\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n  var values = {};\n  var blockInitialAnimation = (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false;\n  var motionValues = scrapeMotionValues(props);\n\n  for (var key in motionValues) {\n    values[key] = resolveMotionValue(motionValues[key]);\n  }\n\n  var initial = props.initial,\n      animate = props.animate;\n  var isControllingVariants = checkIfControllingVariants(props);\n  var isVariantNode = checkIfVariantNode(props);\n\n  if (context && isVariantNode && !isControllingVariants && props.inherit !== false) {\n    initial !== null && initial !== void 0 ? initial : initial = context.initial;\n    animate !== null && animate !== void 0 ? animate : animate = context.animate;\n  }\n\n  var initialAnimationIsBlocked = blockInitialAnimation || initial === false;\n  var variantToSet = initialAnimationIsBlocked ? animate : initial;\n\n  if (variantToSet && typeof variantToSet !== \"boolean\" && !isAnimationControls(variantToSet)) {\n    var list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n    list.forEach(function (definition) {\n      var resolved = resolveVariantFromProps(props, definition);\n      if (!resolved) return;\n      var transitionEnd = resolved.transitionEnd;\n      resolved.transition;\n\n      var target = __rest(resolved, [\"transitionEnd\", \"transition\"]);\n\n      for (var key in target) {\n        var valueTarget = target[key];\n\n        if (Array.isArray(valueTarget)) {\n          /**\n           * Take final keyframe if the initial animation is blocked because\n           * we want to initialise at the end of that blocked animation.\n           */\n          var index = initialAnimationIsBlocked ? valueTarget.length - 1 : 0;\n          valueTarget = valueTarget[index];\n        }\n\n        if (valueTarget !== null) {\n          values[key] = valueTarget;\n        }\n      }\n\n      for (var key in transitionEnd) {\n        values[key] = transitionEnd[key];\n      }\n    });\n  }\n\n  return values;\n}\n\nexport { makeUseVisualState };","import { renderSVG } from './utils/render.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { makeUseVisualState } from '../../motion/utils/use-visual-state.mjs';\nimport { createSvgRenderState } from './utils/create-render-state.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nvar svgMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createSvgRenderState,\n    onMount: function onMount(props, instance, _a) {\n      var renderState = _a.renderState,\n          latestValues = _a.latestValues;\n\n      try {\n        renderState.dimensions = typeof instance.getBBox === \"function\" ? instance.getBBox() : instance.getBoundingClientRect();\n      } catch (e) {\n        // Most likely trying to measure an unrendered element under Firefox\n        renderState.dimensions = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      buildSVGAttrs(renderState, latestValues, {\n        enableHardwareAcceleration: false\n      }, props.transformTemplate); // TODO: Replace with direct assignment\n\n      renderSVG(instance, renderState);\n    }\n  })\n};\nexport { svgMotionConfig };","var AnimationType;\n\n(function (AnimationType) {\n  AnimationType[\"Animate\"] = \"animate\";\n  AnimationType[\"Hover\"] = \"whileHover\";\n  AnimationType[\"Tap\"] = \"whileTap\";\n  AnimationType[\"Drag\"] = \"whileDrag\";\n  AnimationType[\"Focus\"] = \"whileFocus\";\n  AnimationType[\"InView\"] = \"whileInView\";\n  AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\n\nexport { AnimationType };","import { makeUseVisualState } from '../../motion/utils/use-visual-state.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { createHtmlRenderState } from './utils/create-render-state.mjs';\nvar htmlMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createHtmlRenderState\n  })\n};\nexport { htmlMotionConfig };","import { useEffect } from 'react';\n\nfunction addDomEvent(target, eventName, handler, options) {\n  target.addEventListener(eventName, handler, options);\n  return function () {\n    return target.removeEventListener(eventName, handler, options);\n  };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\n\n\nfunction useDomEvent(ref, eventName, handler, options) {\n  useEffect(function () {\n    var element = ref.current;\n\n    if (handler && element) {\n      return addDomEvent(element, eventName, handler, options);\n    }\n  }, [ref, eventName, handler, options]);\n}\n\nexport { addDomEvent, useDomEvent };","function isMouseEvent(event) {\n  // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n  if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n    return !!(event.pointerType === \"mouse\");\n  }\n\n  return event instanceof MouseEvent;\n}\n\nfunction isTouchEvent(event) {\n  var hasTouches = !!event.touches;\n  return hasTouches;\n}\n\nexport { isMouseEvent, isTouchEvent };","import { isTouchEvent } from '../gestures/utils/event-type.mjs';\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\n\nfunction filterPrimaryPointer(eventHandler) {\n  return function (event) {\n    var isMouseEvent = event instanceof MouseEvent;\n    var isPrimaryPointer = !isMouseEvent || isMouseEvent && event.button === 0;\n\n    if (isPrimaryPointer) {\n      eventHandler(event);\n    }\n  };\n}\n\nvar defaultPagePoint = {\n  pageX: 0,\n  pageY: 0\n};\n\nfunction pointFromTouch(e, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  var primaryTouch = e.touches[0] || e.changedTouches[0];\n  var point = primaryTouch || defaultPagePoint;\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction pointFromMouse(point, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction extractEventInfo(event, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    point: isTouchEvent(event) ? pointFromTouch(event, pointType) : pointFromMouse(event, pointType)\n  };\n}\n\nvar wrapHandler = function wrapHandler(handler, shouldFilterPrimaryPointer) {\n  if (shouldFilterPrimaryPointer === void 0) {\n    shouldFilterPrimaryPointer = false;\n  }\n\n  var listener = function listener(event) {\n    return handler(event, extractEventInfo(event));\n  };\n\n  return shouldFilterPrimaryPointer ? filterPrimaryPointer(listener) : listener;\n};\n\nexport { extractEventInfo, wrapHandler };","import { useDomEvent, addDomEvent } from './use-dom-event.mjs';\nimport { wrapHandler } from './event-info.mjs';\nimport { supportsPointerEvents, supportsTouchEvents, supportsMouseEvents } from './utils.mjs';\nvar mouseEventNames = {\n  pointerdown: \"mousedown\",\n  pointermove: \"mousemove\",\n  pointerup: \"mouseup\",\n  pointercancel: \"mousecancel\",\n  pointerover: \"mouseover\",\n  pointerout: \"mouseout\",\n  pointerenter: \"mouseenter\",\n  pointerleave: \"mouseleave\"\n};\nvar touchEventNames = {\n  pointerdown: \"touchstart\",\n  pointermove: \"touchmove\",\n  pointerup: \"touchend\",\n  pointercancel: \"touchcancel\"\n};\n\nfunction getPointerEventName(name) {\n  if (supportsPointerEvents()) {\n    return name;\n  } else if (supportsTouchEvents()) {\n    return touchEventNames[name];\n  } else if (supportsMouseEvents()) {\n    return mouseEventNames[name];\n  }\n\n  return name;\n}\n\nfunction addPointerEvent(target, eventName, handler, options) {\n  return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nfunction usePointerEvent(ref, eventName, handler, options) {\n  return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nexport { addPointerEvent, usePointerEvent };","import { isBrowser } from '../utils/is-browser.mjs'; // We check for event support via functions in case they've been mocked by a testing suite.\n\nvar supportsPointerEvents = function supportsPointerEvents() {\n  return isBrowser && window.onpointerdown === null;\n};\n\nvar supportsTouchEvents = function supportsTouchEvents() {\n  return isBrowser && window.ontouchstart === null;\n};\n\nvar supportsMouseEvents = function supportsMouseEvents() {\n  return isBrowser && window.onmousedown === null;\n};\n\nexport { supportsMouseEvents, supportsPointerEvents, supportsTouchEvents };","function createLock(name) {\n  var lock = null;\n  return function () {\n    var openLock = function openLock() {\n      lock = null;\n    };\n\n    if (lock === null) {\n      lock = name;\n      return openLock;\n    }\n\n    return false;\n  };\n}\n\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\n\nfunction getGlobalLock(drag) {\n  var lock = false;\n\n  if (drag === \"y\") {\n    lock = globalVerticalLock();\n  } else if (drag === \"x\") {\n    lock = globalHorizontalLock();\n  } else {\n    var openHorizontal_1 = globalHorizontalLock();\n    var openVertical_1 = globalVerticalLock();\n\n    if (openHorizontal_1 && openVertical_1) {\n      lock = function lock() {\n        openHorizontal_1();\n        openVertical_1();\n      };\n    } else {\n      // Release the locks because we don't use them\n      if (openHorizontal_1) openHorizontal_1();\n      if (openVertical_1) openVertical_1();\n    }\n  }\n\n  return lock;\n}\n\nfunction isDragActive() {\n  // Check the gesture lock - if we get it, it means no drag gesture is active\n  // and we can safely fire the tap gesture.\n  var openGestureLock = getGlobalLock(true);\n  if (!openGestureLock) return true;\n  openGestureLock();\n  return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };","import { isMouseEvent } from './utils/event-type.mjs';\nimport { AnimationType } from '../render/utils/types.mjs';\nimport { usePointerEvent } from '../events/use-pointer-event.mjs';\nimport { isDragActive } from './drag/utils/lock.mjs';\n\nfunction createHoverEvent(visualElement, isActive, callback) {\n  return function (event, info) {\n    var _a;\n\n    if (!isMouseEvent(event) || isDragActive()) return;\n    /**\n     * Ensure we trigger animations before firing event callback\n     */\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, isActive);\n    callback === null || callback === void 0 ? void 0 : callback(event, info);\n  };\n}\n\nfunction useHoverGesture(_a) {\n  var onHoverStart = _a.onHoverStart,\n      onHoverEnd = _a.onHoverEnd,\n      whileHover = _a.whileHover,\n      visualElement = _a.visualElement;\n  usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover ? createHoverEvent(visualElement, true, onHoverStart) : undefined);\n  usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover ? createHoverEvent(visualElement, false, onHoverEnd) : undefined);\n}\n\nexport { useHoverGesture };","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function isNodeOrChild(parent, child) {\n  if (!child) {\n    return false;\n  } else if (parent === child) {\n    return true;\n  } else {\n    return isNodeOrChild(parent, child.parentElement);\n  }\n};\n\nexport { isNodeOrChild };","import { useEffect } from 'react';\n\nfunction useUnmountEffect(callback) {\n  return useEffect(function () {\n    return function () {\n      return callback();\n    };\n  }, []);\n}\n\nexport { useUnmountEffect };","import { __rest, __assign } from 'tslib';\n/**\n * Map an IntersectionHandler callback to an element. We only ever make one handler for one\n * element, so even though these handlers might all be triggered by different\n * observers, we can keep them in the same map.\n */\n\nvar observerCallbacks = new WeakMap();\n/**\n * Multiple observers can be created for multiple element/document roots. Each with\n * different settings. So here we store dictionaries of observers to each root,\n * using serialised settings (threshold/margin) as lookup keys.\n */\n\nvar observers = new WeakMap();\n\nvar fireObserverCallback = function fireObserverCallback(entry) {\n  var _a;\n\n  (_a = observerCallbacks.get(entry.target)) === null || _a === void 0 ? void 0 : _a(entry);\n};\n\nvar fireAllObserverCallbacks = function fireAllObserverCallbacks(entries) {\n  entries.forEach(fireObserverCallback);\n};\n\nfunction initIntersectionObserver(_a) {\n  var root = _a.root,\n      options = __rest(_a, [\"root\"]);\n\n  var lookupRoot = root || document;\n  /**\n   * If we don't have an observer lookup map for this root, create one.\n   */\n\n  if (!observers.has(lookupRoot)) {\n    observers.set(lookupRoot, {});\n  }\n\n  var rootObservers = observers.get(lookupRoot);\n  var key = JSON.stringify(options);\n  /**\n   * If we don't have an observer for this combination of root and settings,\n   * create one.\n   */\n\n  if (!rootObservers[key]) {\n    rootObservers[key] = new IntersectionObserver(fireAllObserverCallbacks, __assign({\n      root: root\n    }, options));\n  }\n\n  return rootObservers[key];\n}\n\nfunction observeIntersection(element, options, callback) {\n  var rootInteresectionObserver = initIntersectionObserver(options);\n  observerCallbacks.set(element, callback);\n  rootInteresectionObserver.observe(element);\n  return function () {\n    observerCallbacks.delete(element);\n    rootInteresectionObserver.unobserve(element);\n  };\n}\n\nexport { observeIntersection };","import { useRef, useEffect } from 'react';\nimport { AnimationType } from '../../../render/utils/types.mjs';\nimport { warnOnce } from '../../../utils/warn-once.mjs';\nimport { observeIntersection } from './observers.mjs';\n\nfunction useViewport(_a) {\n  var visualElement = _a.visualElement,\n      whileInView = _a.whileInView,\n      onViewportEnter = _a.onViewportEnter,\n      onViewportLeave = _a.onViewportLeave,\n      _b = _a.viewport,\n      viewport = _b === void 0 ? {} : _b;\n  var state = useRef({\n    hasEnteredView: false,\n    isInView: false\n  });\n  var shouldObserve = Boolean(whileInView || onViewportEnter || onViewportLeave);\n  if (viewport.once && state.current.hasEnteredView) shouldObserve = false;\n  var useObserver = typeof IntersectionObserver === \"undefined\" ? useMissingIntersectionObserver : useIntersectionObserver;\n  useObserver(shouldObserve, state.current, visualElement, viewport);\n}\n\nvar thresholdNames = {\n  some: 0,\n  all: 1\n};\n\nfunction useIntersectionObserver(shouldObserve, state, visualElement, _a) {\n  var root = _a.root,\n      rootMargin = _a.margin,\n      _b = _a.amount,\n      amount = _b === void 0 ? \"some\" : _b,\n      once = _a.once;\n  useEffect(function () {\n    if (!shouldObserve) return;\n    var options = {\n      root: root === null || root === void 0 ? void 0 : root.current,\n      rootMargin: rootMargin,\n      threshold: typeof amount === \"number\" ? amount : thresholdNames[amount]\n    };\n\n    var intersectionCallback = function intersectionCallback(entry) {\n      var _a;\n\n      var isIntersecting = entry.isIntersecting;\n      /**\n       * If there's been no change in the viewport state, early return.\n       */\n\n      if (state.isInView === isIntersecting) return;\n      state.isInView = isIntersecting;\n      /**\n       * Handle hasEnteredView. If this is only meant to run once, and\n       * element isn't visible, early return. Otherwise set hasEnteredView to true.\n       */\n\n      if (once && !isIntersecting && state.hasEnteredView) {\n        return;\n      } else if (isIntersecting) {\n        state.hasEnteredView = true;\n      }\n\n      (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.InView, isIntersecting);\n      /**\n       * Use the latest committed props rather than the ones in scope\n       * when this observer is created\n       */\n\n      var props = visualElement.getProps();\n      var callback = isIntersecting ? props.onViewportEnter : props.onViewportLeave;\n      callback === null || callback === void 0 ? void 0 : callback(entry);\n    };\n\n    return observeIntersection(visualElement.getInstance(), options, intersectionCallback);\n  }, [shouldObserve, root, rootMargin, amount]);\n}\n/**\n * If IntersectionObserver is missing, we activate inView and fire onViewportEnter\n * on mount. This way, the page will be in the state the author expects users\n * to see it in for everyone.\n */\n\n\nfunction useMissingIntersectionObserver(shouldObserve, state, visualElement) {\n  useEffect(function () {\n    if (!shouldObserve) return;\n\n    if (process.env.NODE_ENV !== \"production\") {\n      warnOnce(false, \"IntersectionObserver not available on this device. whileInView animations will trigger on mount.\");\n    }\n    /**\n     * Fire this in an rAF because, at this point, the animation state\n     * won't have flushed for the first time and there's certain logic in\n     * there that behaves differently on the initial animation.\n     *\n     * This hook should be quite rarely called so setting this in an rAF\n     * is preferred to changing the behaviour of the animation state.\n     */\n\n\n    requestAnimationFrame(function () {\n      var _a;\n\n      state.hasEnteredView = true;\n      var onViewportEnter = visualElement.getProps().onViewportEnter;\n      onViewportEnter === null || onViewportEnter === void 0 ? void 0 : onViewportEnter(null);\n      (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.InView, true);\n    });\n  }, [shouldObserve]);\n}\n\nexport { useViewport };","var makeRenderlessComponent = function makeRenderlessComponent(hook) {\n  return function (props) {\n    hook(props);\n    return null;\n  };\n};\n\nexport { makeRenderlessComponent };","import { useFocusGesture } from '../../gestures/use-focus-gesture.mjs';\nimport { useHoverGesture } from '../../gestures/use-hover-gesture.mjs';\nimport { useTapGesture } from '../../gestures/use-tap-gesture.mjs';\nimport { useViewport } from './viewport/use-viewport.mjs';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.mjs';\nvar gestureAnimations = {\n  inView: makeRenderlessComponent(useViewport),\n  tap: makeRenderlessComponent(useTapGesture),\n  focus: makeRenderlessComponent(useFocusGesture),\n  hover: makeRenderlessComponent(useHoverGesture)\n};\nexport { gestureAnimations };","import { useRef } from 'react';\nimport { isNodeOrChild } from './utils/is-node-or-child.mjs';\nimport { usePointerEvent, addPointerEvent } from '../events/use-pointer-event.mjs';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.mjs';\nimport { pipe } from 'popmotion';\nimport { AnimationType } from '../render/utils/types.mjs';\nimport { isDragActive } from './drag/utils/lock.mjs';\n/**\n * @param handlers -\n * @internal\n */\n\nfunction useTapGesture(_a) {\n  var onTap = _a.onTap,\n      onTapStart = _a.onTapStart,\n      onTapCancel = _a.onTapCancel,\n      whileTap = _a.whileTap,\n      visualElement = _a.visualElement;\n  var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n  var isPressing = useRef(false);\n  var cancelPointerEndListeners = useRef(null);\n\n  function removePointerEndListener() {\n    var _a;\n\n    (_a = cancelPointerEndListeners.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEndListeners);\n    cancelPointerEndListeners.current = null;\n  }\n\n  function checkPointerEnd() {\n    var _a;\n\n    removePointerEndListener();\n    isPressing.current = false;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, false);\n    return !isDragActive();\n  }\n\n  function onPointerUp(event, info) {\n    if (!checkPointerEnd()) return;\n    /**\n     * We only count this as a tap gesture if the event.target is the same\n     * as, or a child of, this component's element\n     */\n\n    !isNodeOrChild(visualElement.getInstance(), event.target) ? onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info) : onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n  }\n\n  function onPointerCancel(event, info) {\n    if (!checkPointerEnd()) return;\n    onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n  }\n\n  function onPointerDown(event, info) {\n    var _a;\n\n    removePointerEndListener();\n    if (isPressing.current) return;\n    isPressing.current = true;\n    cancelPointerEndListeners.current = pipe(addPointerEvent(window, \"pointerup\", onPointerUp), addPointerEvent(window, \"pointercancel\", onPointerCancel));\n    /**\n     * Ensure we trigger animations before firing event callback\n     */\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, true);\n    onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined);\n  useUnmountEffect(removePointerEndListener);\n}\n\nexport { useTapGesture };","import { AnimationType } from '../render/utils/types.mjs';\nimport { useDomEvent } from '../events/use-dom-event.mjs';\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\n\nfunction useFocusGesture(_a) {\n  var whileFocus = _a.whileFocus,\n      visualElement = _a.visualElement;\n\n  var onFocus = function onFocus() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, true);\n  };\n\n  var onBlur = function onBlur() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, false);\n  };\n\n  useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n  useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\n\nexport { useFocusGesture };","import { useContext, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\n\nfunction usePresence() {\n  var context = useContext(PresenceContext);\n  if (context === null) return [true, null];\n  var isPresent = context.isPresent,\n      onExitComplete = context.onExitComplete,\n      register = context.register; // It's safe to call the following hooks conditionally (after an early return) because the context will always\n  // either be null or non-null for the lifespan of the component.\n  // Replace with useOpaqueId when released in React\n\n  var id = useUniqueId();\n  useEffect(function () {\n    return register(id);\n  }, []);\n\n  var safeToRemove = function safeToRemove() {\n    return onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete(id);\n  };\n\n  return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\n\n\nfunction useIsPresent() {\n  return isPresent(useContext(PresenceContext));\n}\n\nfunction isPresent(context) {\n  return context === null ? true : context.isPresent;\n}\n\nvar counter = 0;\n\nvar incrementId = function incrementId() {\n  return counter++;\n};\n\nvar useUniqueId = function useUniqueId() {\n  return useConstant(incrementId);\n};\n\nexport { isPresent, useIsPresent, usePresence };","function shallowCompare(next, prev) {\n  if (!Array.isArray(prev)) return false;\n  var prevLength = prev.length;\n  if (prevLength !== next.length) return false;\n\n  for (var i = 0; i < prevLength; i++) {\n    if (prev[i] !== next[i]) return false;\n  }\n\n  return true;\n}\n\nexport { shallowCompare };","/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nvar isNumericalString = function isNumericalString(v) {\n  return /^\\-?\\d*\\.?\\d+$/.test(v);\n};\n\nexport { isNumericalString };","/**\n * Check if the value is a zero value string like \"0px\" or \"0%\"\n */\nvar isZeroValueString = function isZeroValueString(v) {\n  return /^0[^.\\s]+$/.test(v);\n};\n\nexport { isZeroValueString };","/**\n * Tests a provided value against a ValueType\n */\nvar testValueType = function testValueType(v) {\n  return function (type) {\n    return type.test(v);\n  };\n};\n\nexport { testValueType };","import { number, px, percent, degrees, vw, vh } from 'style-value-types';\nimport { testValueType } from './test.mjs';\nimport { auto } from './type-auto.mjs';\n/**\n * A list of value types commonly used for dimensions\n */\n\nvar dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\n\nvar findDimensionValueType = function findDimensionValueType(v) {\n  return dimensionValueTypes.find(testValueType(v));\n};\n\nexport { dimensionValueTypes, findDimensionValueType };","/**\n * ValueType for \"auto\"\n */\nvar auto = {\n  test: function test(v) {\n    return v === \"auto\";\n  },\n  parse: function parse(v) {\n    return v;\n  }\n};\nexport { auto };","import { __spreadArray, __read } from 'tslib';\nimport { color, complex } from 'style-value-types';\nimport { dimensionValueTypes } from './dimensions.mjs';\nimport { testValueType } from './test.mjs';\n/**\n * A list of all ValueTypes\n */\n\nvar valueTypes = __spreadArray(__spreadArray([], __read(dimensionValueTypes), false), [color, complex], false);\n/**\n * Tests a value against the list of ValueTypes\n */\n\n\nvar findValueType = function findValueType(v) {\n  return valueTypes.find(testValueType(v));\n};\n\nexport { findValueType };","import { __rest, __assign, __spreadArray, __read } from 'tslib';\nimport { complex } from 'style-value-types';\nimport { isNumericalString } from '../../utils/is-numerical-string.mjs';\nimport { isZeroValueString } from '../../utils/is-zero-value-string.mjs';\nimport { resolveFinalValueInKeyframes } from '../../utils/resolve-value.mjs';\nimport { motionValue } from '../../value/index.mjs';\nimport { getAnimatableNone } from '../dom/value-types/animatable-none.mjs';\nimport { findValueType } from '../dom/value-types/find.mjs';\nimport { resolveVariant } from './variants.mjs';\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\n\nfunction setMotionValue(visualElement, key, value) {\n  if (visualElement.hasValue(key)) {\n    visualElement.getValue(key).set(value);\n  } else {\n    visualElement.addValue(key, motionValue(value));\n  }\n}\n\nfunction setTarget(visualElement, definition) {\n  var resolved = resolveVariant(visualElement, definition);\n\n  var _a = resolved ? visualElement.makeTargetAnimatable(resolved, false) : {},\n      _b = _a.transitionEnd,\n      transitionEnd = _b === void 0 ? {} : _b;\n\n  _a.transition;\n\n  var target = __rest(_a, [\"transitionEnd\", \"transition\"]);\n\n  target = __assign(__assign({}, target), transitionEnd);\n\n  for (var key in target) {\n    var value = resolveFinalValueInKeyframes(target[key]);\n    setMotionValue(visualElement, key, value);\n  }\n}\n\nfunction setVariants(visualElement, variantLabels) {\n  var reversedLabels = __spreadArray([], __read(variantLabels), false).reverse();\n\n  reversedLabels.forEach(function (key) {\n    var _a;\n\n    var variant = visualElement.getVariant(key);\n    variant && setTarget(visualElement, variant);\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      setVariants(child, variantLabels);\n    });\n  });\n}\n\nfunction setValues(visualElement, definition) {\n  if (Array.isArray(definition)) {\n    return setVariants(visualElement, definition);\n  } else if (typeof definition === \"string\") {\n    return setVariants(visualElement, [definition]);\n  } else {\n    setTarget(visualElement, definition);\n  }\n}\n\nfunction checkTargetForNewValues(visualElement, target, origin) {\n  var _a, _b, _c;\n\n  var _d;\n\n  var newValueKeys = Object.keys(target).filter(function (key) {\n    return !visualElement.hasValue(key);\n  });\n  var numNewValues = newValueKeys.length;\n  if (!numNewValues) return;\n\n  for (var i = 0; i < numNewValues; i++) {\n    var key = newValueKeys[i];\n    var targetValue = target[key];\n    var value = null;\n    /**\n     * If the target is a series of keyframes, we can use the first value\n     * in the array. If this first value is null, we'll still need to read from the DOM.\n     */\n\n    if (Array.isArray(targetValue)) {\n      value = targetValue[0];\n    }\n    /**\n     * If the target isn't keyframes, or the first keyframe was null, we need to\n     * first check if an origin value was explicitly defined in the transition as \"from\",\n     * if not read the value from the DOM. As an absolute fallback, take the defined target value.\n     */\n\n\n    if (value === null) {\n      value = (_b = (_a = origin[key]) !== null && _a !== void 0 ? _a : visualElement.readValue(key)) !== null && _b !== void 0 ? _b : target[key];\n    }\n    /**\n     * If value is still undefined or null, ignore it. Preferably this would throw,\n     * but this was causing issues in Framer.\n     */\n\n\n    if (value === undefined || value === null) continue;\n\n    if (typeof value === \"string\" && (isNumericalString(value) || isZeroValueString(value))) {\n      // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n      value = parseFloat(value);\n    } else if (!findValueType(value) && complex.test(targetValue)) {\n      value = getAnimatableNone(key, targetValue);\n    }\n\n    visualElement.addValue(key, motionValue(value));\n    (_c = (_d = origin)[key]) !== null && _c !== void 0 ? _c : _d[key] = value;\n    visualElement.setBaseTarget(key, value);\n  }\n}\n\nfunction getOriginFromTransition(key, transition) {\n  if (!transition) return;\n  var valueTransition = transition[key] || transition[\"default\"] || transition;\n  return valueTransition.from;\n}\n\nfunction getOrigin(target, transition, visualElement) {\n  var _a, _b;\n\n  var origin = {};\n\n  for (var key in target) {\n    origin[key] = (_a = getOriginFromTransition(key, transition)) !== null && _a !== void 0 ? _a : (_b = visualElement.getValue(key)) === null || _b === void 0 ? void 0 : _b.get();\n  }\n\n  return origin;\n}\n\nexport { checkTargetForNewValues, getOrigin, getOriginFromTransition, setTarget, setValues };","import { __read, __rest, __assign } from 'tslib';\nimport { startAnimation } from '../../animation/utils/transitions.mjs';\nimport { setTarget } from './setters.mjs';\nimport { resolveVariant } from './variants.mjs';\n/**\n * @internal\n */\n\nfunction animateVisualElement(visualElement, definition, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  visualElement.notifyAnimationStart(definition);\n  var animation;\n\n  if (Array.isArray(definition)) {\n    var animations = definition.map(function (variant) {\n      return animateVariant(visualElement, variant, options);\n    });\n    animation = Promise.all(animations);\n  } else if (typeof definition === \"string\") {\n    animation = animateVariant(visualElement, definition, options);\n  } else {\n    var resolvedDefinition = typeof definition === \"function\" ? resolveVariant(visualElement, definition, options.custom) : definition;\n    animation = animateTarget(visualElement, resolvedDefinition, options);\n  }\n\n  return animation.then(function () {\n    return visualElement.notifyAnimationComplete(definition);\n  });\n}\n\nfunction animateVariant(visualElement, variant, options) {\n  var _a;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  var resolved = resolveVariant(visualElement, variant, options.custom);\n  var _b = (resolved || {}).transition,\n      transition = _b === void 0 ? visualElement.getDefaultTransition() || {} : _b;\n\n  if (options.transitionOverride) {\n    transition = options.transitionOverride;\n  }\n  /**\n   * If we have a variant, create a callback that runs it as an animation.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n\n\n  var getAnimation = resolved ? function () {\n    return animateTarget(visualElement, resolved, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If we have children, create a callback that runs all their animations.\n   * Otherwise, we resolve a Promise immediately for a composable no-op.\n   */\n\n  var getChildAnimations = ((_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.size) ? function (forwardDelay) {\n    if (forwardDelay === void 0) {\n      forwardDelay = 0;\n    }\n\n    var _a = transition.delayChildren,\n        delayChildren = _a === void 0 ? 0 : _a,\n        staggerChildren = transition.staggerChildren,\n        staggerDirection = transition.staggerDirection;\n    return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n  } : function () {\n    return Promise.resolve();\n  };\n  /**\n   * If the transition explicitly defines a \"when\" option, we need to resolve either\n   * this animation or all children animations before playing the other.\n   */\n\n  var when = transition.when;\n\n  if (when) {\n    var _c = __read(when === \"beforeChildren\" ? [getAnimation, getChildAnimations] : [getChildAnimations, getAnimation], 2),\n        first = _c[0],\n        last = _c[1];\n\n    return first().then(last);\n  } else {\n    return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n  }\n}\n/**\n * @internal\n */\n\n\nfunction animateTarget(visualElement, definition, _a) {\n  var _b;\n\n  var _c = _a === void 0 ? {} : _a,\n      _d = _c.delay,\n      delay = _d === void 0 ? 0 : _d,\n      transitionOverride = _c.transitionOverride,\n      type = _c.type;\n\n  var _e = visualElement.makeTargetAnimatable(definition),\n      _f = _e.transition,\n      transition = _f === void 0 ? visualElement.getDefaultTransition() : _f,\n      transitionEnd = _e.transitionEnd,\n      target = __rest(_e, [\"transition\", \"transitionEnd\"]);\n\n  if (transitionOverride) transition = transitionOverride;\n  var animations = [];\n  var animationTypeState = type && ((_b = visualElement.animationState) === null || _b === void 0 ? void 0 : _b.getState()[type]);\n\n  for (var key in target) {\n    var value = visualElement.getValue(key);\n    var valueTarget = target[key];\n\n    if (!value || valueTarget === undefined || animationTypeState && shouldBlockAnimation(animationTypeState, key)) {\n      continue;\n    }\n\n    var animation = startAnimation(key, value, valueTarget, __assign({\n      delay: delay\n    }, transition));\n    animations.push(animation);\n  }\n\n  return Promise.all(animations).then(function () {\n    transitionEnd && setTarget(visualElement, transitionEnd);\n  });\n}\n\nfunction animateChildren(visualElement, variant, delayChildren, staggerChildren, staggerDirection, options) {\n  if (delayChildren === void 0) {\n    delayChildren = 0;\n  }\n\n  if (staggerChildren === void 0) {\n    staggerChildren = 0;\n  }\n\n  if (staggerDirection === void 0) {\n    staggerDirection = 1;\n  }\n\n  var animations = [];\n  var maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n  var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n\n    return i * staggerChildren;\n  } : function (i) {\n    if (i === void 0) {\n      i = 0;\n    }\n\n    return maxStaggerDuration - i * staggerChildren;\n  };\n  Array.from(visualElement.variantChildren).sort(sortByTreeOrder).forEach(function (child, i) {\n    animations.push(animateVariant(child, variant, __assign(__assign({}, options), {\n      delay: delayChildren + generateStaggerDuration(i)\n    })).then(function () {\n      return child.notifyAnimationComplete(variant);\n    }));\n  });\n  return Promise.all(animations);\n}\n\nfunction stopAnimation(visualElement) {\n  visualElement.forEachValue(function (value) {\n    return value.stop();\n  });\n}\n\nfunction sortByTreeOrder(a, b) {\n  return a.sortNodePosition(b);\n}\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\n\n\nfunction shouldBlockAnimation(_a, key) {\n  var protectedKeys = _a.protectedKeys,\n      needsAnimating = _a.needsAnimating;\n  var shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n  needsAnimating[key] = false;\n  return shouldBlock;\n}\n\nexport { animateVisualElement, sortByTreeOrder, stopAnimation };","import { __spreadArray, __read, __assign, __rest } from 'tslib';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { isKeyframesTarget } from '../../animation/utils/is-keyframes-target.mjs';\nimport { shallowCompare } from '../../utils/shallow-compare.mjs';\nimport { animateVisualElement } from './animation.mjs';\nimport { AnimationType } from './types.mjs';\nimport { isVariantLabels, resolveVariant, isVariantLabel } from './variants.mjs';\nvar variantPriorityOrder = [AnimationType.Animate, AnimationType.InView, AnimationType.Focus, AnimationType.Hover, AnimationType.Tap, AnimationType.Drag, AnimationType.Exit];\n\nvar reversePriorityOrder = __spreadArray([], __read(variantPriorityOrder), false).reverse();\n\nvar numAnimationTypes = variantPriorityOrder.length;\n\nfunction animateList(visualElement) {\n  return function (animations) {\n    return Promise.all(animations.map(function (_a) {\n      var animation = _a.animation,\n          options = _a.options;\n      return animateVisualElement(visualElement, animation, options);\n    }));\n  };\n}\n\nfunction createAnimationState(visualElement) {\n  var animate = animateList(visualElement);\n  var state = createState();\n  var allAnimatedKeys = {};\n  var isInitialRender = true;\n  /**\n   * This function will be used to reduce the animation definitions for\n   * each active animation type into an object of resolved values for it.\n   */\n\n  var buildResolvedTypeValues = function buildResolvedTypeValues(acc, definition) {\n    var resolved = resolveVariant(visualElement, definition);\n\n    if (resolved) {\n      resolved.transition;\n\n      var transitionEnd = resolved.transitionEnd,\n          target = __rest(resolved, [\"transition\", \"transitionEnd\"]);\n\n      acc = __assign(__assign(__assign({}, acc), target), transitionEnd);\n    }\n\n    return acc;\n  };\n\n  function isAnimated(key) {\n    return allAnimatedKeys[key] !== undefined;\n  }\n  /**\n   * This just allows us to inject mocked animation functions\n   * @internal\n   */\n\n\n  function setAnimateFunction(makeAnimator) {\n    animate = makeAnimator(visualElement);\n  }\n  /**\n   * When we receive new props, we need to:\n   * 1. Create a list of protected keys for each type. This is a directory of\n   *    value keys that are currently being \"handled\" by types of a higher priority\n   *    so that whenever an animation is played of a given type, these values are\n   *    protected from being animated.\n   * 2. Determine if an animation type needs animating.\n   * 3. Determine if any values have been removed from a type and figure out\n   *    what to animate those to.\n   */\n\n\n  function animateChanges(options, changedActiveType) {\n    var _a;\n\n    var props = visualElement.getProps();\n    var context = visualElement.getVariantContext(true) || {};\n    /**\n     * A list of animations that we'll build into as we iterate through the animation\n     * types. This will get executed at the end of the function.\n     */\n\n    var animations = [];\n    /**\n     * Keep track of which values have been removed. Then, as we hit lower priority\n     * animation types, we can check if they contain removed values and animate to that.\n     */\n\n    var removedKeys = new Set();\n    /**\n     * A dictionary of all encountered keys. This is an object to let us build into and\n     * copy it without iteration. Each time we hit an animation type we set its protected\n     * keys - the keys its not allowed to animate - to the latest version of this object.\n     */\n\n    var encounteredKeys = {};\n    /**\n     * If a variant has been removed at a given index, and this component is controlling\n     * variant animations, we want to ensure lower-priority variants are forced to animate.\n     */\n\n    var removedVariantIndex = Infinity;\n\n    var _loop_1 = function _loop_1(i) {\n      var type = reversePriorityOrder[i];\n      var typeState = state[type];\n      var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n      var propIsVariant = isVariantLabel(prop);\n      /**\n       * If this type has *just* changed isActive status, set activeDelta\n       * to that status. Otherwise set to null.\n       */\n\n      var activeDelta = type === changedActiveType ? typeState.isActive : null;\n      if (activeDelta === false) removedVariantIndex = i;\n      /**\n       * If this prop is an inherited variant, rather than been set directly on the\n       * component itself, we want to make sure we allow the parent to trigger animations.\n       *\n       * TODO: Can probably change this to a !isControllingVariants check\n       */\n\n      var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n      /**\n       *\n       */\n\n      if (isInherited && isInitialRender && visualElement.manuallyAnimateOnMount) {\n        isInherited = false;\n      }\n      /**\n       * Set all encountered keys so far as the protected keys for this type. This will\n       * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n       */\n\n\n      typeState.protectedKeys = __assign({}, encounteredKeys); // Check if we can skip analysing this prop early\n\n      if ( // If it isn't active and hasn't *just* been set as inactive\n      !typeState.isActive && activeDelta === null || // If we didn't and don't have any defined prop for this animation type\n      !prop && !typeState.prevProp || // Or if the prop doesn't define an animation\n      isAnimationControls(prop) || typeof prop === \"boolean\") {\n        return \"continue\";\n      }\n      /**\n       * As we go look through the values defined on this type, if we detect\n       * a changed value or a value that was removed in a higher priority, we set\n       * this to true and add this prop to the animation list.\n       */\n\n\n      var variantDidChange = checkVariantsDidChange(typeState.prevProp, prop);\n      var shouldAnimateType = variantDidChange || // If we're making this variant active, we want to always make it active\n      type === changedActiveType && typeState.isActive && !isInherited && propIsVariant || // If we removed a higher-priority variant (i is in reverse order)\n      i > removedVariantIndex && propIsVariant;\n      /**\n       * As animations can be set as variant lists, variants or target objects, we\n       * coerce everything to an array if it isn't one already\n       */\n\n      var definitionList = Array.isArray(prop) ? prop : [prop];\n      /**\n       * Build an object of all the resolved values. We'll use this in the subsequent\n       * animateChanges calls to determine whether a value has changed.\n       */\n\n      var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n      if (activeDelta === false) resolvedValues = {};\n      /**\n       * Now we need to loop through all the keys in the prev prop and this prop,\n       * and decide:\n       * 1. If the value has changed, and needs animating\n       * 2. If it has been removed, and needs adding to the removedKeys set\n       * 3. If it has been removed in a higher priority type and needs animating\n       * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n       *    needs adding to the type's protectedKeys list.\n       */\n\n      var _b = typeState.prevResolvedValues,\n          prevResolvedValues = _b === void 0 ? {} : _b;\n\n      var allKeys = __assign(__assign({}, prevResolvedValues), resolvedValues);\n\n      var markToAnimate = function markToAnimate(key) {\n        shouldAnimateType = true;\n        removedKeys.delete(key);\n        typeState.needsAnimating[key] = true;\n      };\n\n      for (var key in allKeys) {\n        var next = resolvedValues[key];\n        var prev = prevResolvedValues[key]; // If we've already handled this we can just skip ahead\n\n        if (encounteredKeys.hasOwnProperty(key)) continue;\n        /**\n         * If the value has changed, we probably want to animate it.\n         */\n\n        if (next !== prev) {\n          /**\n           * If both values are keyframes, we need to shallow compare them to\n           * detect whether any value has changed. If it has, we animate it.\n           */\n          if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n            if (!shallowCompare(next, prev) || variantDidChange) {\n              markToAnimate(key);\n            } else {\n              /**\n               * If it hasn't changed, we want to ensure it doesn't animate by\n               * adding it to the list of protected keys.\n               */\n              typeState.protectedKeys[key] = true;\n            }\n          } else if (next !== undefined) {\n            // If next is defined and doesn't equal prev, it needs animating\n            markToAnimate(key);\n          } else {\n            // If it's undefined, it's been removed.\n            removedKeys.add(key);\n          }\n        } else if (next !== undefined && removedKeys.has(key)) {\n          /**\n           * If next hasn't changed and it isn't undefined, we want to check if it's\n           * been removed by a higher priority\n           */\n          markToAnimate(key);\n        } else {\n          /**\n           * If it hasn't changed, we add it to the list of protected values\n           * to ensure it doesn't get animated.\n           */\n          typeState.protectedKeys[key] = true;\n        }\n      }\n      /**\n       * Update the typeState so next time animateChanges is called we can compare the\n       * latest prop and resolvedValues to these.\n       */\n\n\n      typeState.prevProp = prop;\n      typeState.prevResolvedValues = resolvedValues;\n      /**\n       *\n       */\n\n      if (typeState.isActive) {\n        encounteredKeys = __assign(__assign({}, encounteredKeys), resolvedValues);\n      }\n\n      if (isInitialRender && visualElement.blockInitialAnimation) {\n        shouldAnimateType = false;\n      }\n      /**\n       * If this is an inherited prop we want to hard-block animations\n       * TODO: Test as this should probably still handle animations triggered\n       * by removed values?\n       */\n\n\n      if (shouldAnimateType && !isInherited) {\n        animations.push.apply(animations, __spreadArray([], __read(definitionList.map(function (animation) {\n          return {\n            animation: animation,\n            options: __assign({\n              type: type\n            }, options)\n          };\n        })), false));\n      }\n    };\n    /**\n     * Iterate through all animation types in reverse priority order. For each, we want to\n     * detect which values it's handling and whether or not they've changed (and therefore\n     * need to be animated). If any values have been removed, we want to detect those in\n     * lower priority props and flag for animation.\n     */\n\n\n    for (var i = 0; i < numAnimationTypes; i++) {\n      _loop_1(i);\n    }\n\n    allAnimatedKeys = __assign({}, encounteredKeys);\n    /**\n     * If there are some removed value that haven't been dealt with,\n     * we need to create a new animation that falls back either to the value\n     * defined in the style prop, or the last read value.\n     */\n\n    if (removedKeys.size) {\n      var fallbackAnimation_1 = {};\n      removedKeys.forEach(function (key) {\n        var fallbackTarget = visualElement.getBaseTarget(key);\n\n        if (fallbackTarget !== undefined) {\n          fallbackAnimation_1[key] = fallbackTarget;\n        }\n      });\n      animations.push({\n        animation: fallbackAnimation_1\n      });\n    }\n\n    var shouldAnimate = Boolean(animations.length);\n\n    if (isInitialRender && props.initial === false && !visualElement.manuallyAnimateOnMount) {\n      shouldAnimate = false;\n    }\n\n    isInitialRender = false;\n    return shouldAnimate ? animate(animations) : Promise.resolve();\n  }\n  /**\n   * Change whether a certain animation type is active.\n   */\n\n\n  function setActive(type, isActive, options) {\n    var _a; // If the active state hasn't changed, we can safely do nothing here\n\n\n    if (state[type].isActive === isActive) return Promise.resolve(); // Propagate active change to children\n\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      var _a;\n\n      return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive);\n    });\n    state[type].isActive = isActive;\n    return animateChanges(options, type);\n  }\n\n  return {\n    isAnimated: isAnimated,\n    animateChanges: animateChanges,\n    setActive: setActive,\n    setAnimateFunction: setAnimateFunction,\n    getState: function getState() {\n      return state;\n    }\n  };\n}\n\nfunction checkVariantsDidChange(prev, next) {\n  if (typeof next === \"string\") {\n    return next !== prev;\n  } else if (isVariantLabels(next)) {\n    return !shallowCompare(next, prev);\n  }\n\n  return false;\n}\n\nfunction createTypeState(isActive) {\n  if (isActive === void 0) {\n    isActive = false;\n  }\n\n  return {\n    isActive: isActive,\n    protectedKeys: {},\n    needsAnimating: {},\n    prevResolvedValues: {}\n  };\n}\n\nfunction createState() {\n  var _a;\n\n  return _a = {}, _a[AnimationType.Animate] = createTypeState(true), _a[AnimationType.InView] = createTypeState(), _a[AnimationType.Hover] = createTypeState(), _a[AnimationType.Tap] = createTypeState(), _a[AnimationType.Drag] = createTypeState(), _a[AnimationType.Focus] = createTypeState(), _a[AnimationType.Exit] = createTypeState(), _a;\n}\n\nexport { checkVariantsDidChange, createAnimationState, variantPriorityOrder };","import { __read } from 'tslib';\nimport { useEffect, useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.mjs';\nimport { usePresence } from '../../components/AnimatePresence/use-presence.mjs';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { createAnimationState } from '../../render/utils/animation-state.mjs';\nimport { AnimationType } from '../../render/utils/types.mjs';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.mjs';\nvar animations = {\n  animation: makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement,\n        animate = _a.animate;\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n\n    visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n\n    if (isAnimationControls(animate)) {\n      useEffect(function () {\n        return animate.subscribe(visualElement);\n      }, [animate]);\n    }\n  }),\n  exit: makeRenderlessComponent(function (props) {\n    var custom = props.custom,\n        visualElement = props.visualElement;\n\n    var _a = __read(usePresence(), 2),\n        isPresent = _a[0],\n        safeToRemove = _a[1];\n\n    var presenceContext = useContext(PresenceContext);\n    useEffect(function () {\n      var _a, _b;\n\n      visualElement.isPresent = isPresent;\n      var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, {\n        custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom\n      });\n      !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(safeToRemove));\n    }, [isPresent]);\n  })\n};\nexport { animations };","import { __assign } from 'tslib';\nimport { isMouseEvent, isTouchEvent } from './utils/event-type.mjs';\nimport { extractEventInfo } from '../events/event-info.mjs';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { secondsToMilliseconds } from '../utils/time-conversion.mjs';\nimport { addPointerEvent } from '../events/use-pointer-event.mjs';\nimport { distance, pipe } from 'popmotion';\n/**\n * @internal\n */\n\nvar PanSession =\n/** @class */\nfunction () {\n  function PanSession(event, handlers, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        transformPagePoint = _b.transformPagePoint;\n    /**\n     * @internal\n     */\n\n\n    this.startEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEventInfo = null;\n    /**\n     * @internal\n     */\n\n    this.handlers = {};\n\n    this.updatePoint = function () {\n      if (!(_this.lastMoveEvent && _this.lastMoveEventInfo)) return;\n      var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n      var isPanStarted = _this.startEvent !== null; // Only start panning if the offset is larger than 3 pixels. If we make it\n      // any larger than this we'll want to reset the pointer history\n      // on the first update to avoid visual snapping to the cursoe.\n\n      var isDistancePastThreshold = distance(info.offset, {\n        x: 0,\n        y: 0\n      }) >= 3;\n      if (!isPanStarted && !isDistancePastThreshold) return;\n      var point = info.point;\n      var timestamp = getFrameData().timestamp;\n\n      _this.history.push(__assign(__assign({}, point), {\n        timestamp: timestamp\n      }));\n\n      var _a = _this.handlers,\n          onStart = _a.onStart,\n          onMove = _a.onMove;\n\n      if (!isPanStarted) {\n        onStart && onStart(_this.lastMoveEvent, info);\n        _this.startEvent = _this.lastMoveEvent;\n      }\n\n      onMove && onMove(_this.lastMoveEvent, info);\n    };\n\n    this.handlePointerMove = function (event, info) {\n      _this.lastMoveEvent = event;\n      _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint); // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n\n      if (isMouseEvent(event) && event.buttons === 0) {\n        _this.handlePointerUp(event, info);\n\n        return;\n      } // Throttle mouse move event to once per frame\n\n\n      sync.update(_this.updatePoint, true);\n    };\n\n    this.handlePointerUp = function (event, info) {\n      _this.end();\n\n      var _a = _this.handlers,\n          onEnd = _a.onEnd,\n          onSessionEnd = _a.onSessionEnd;\n      var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n\n      if (_this.startEvent && onEnd) {\n        onEnd(event, panInfo);\n      }\n\n      onSessionEnd && onSessionEnd(event, panInfo);\n    }; // If we have more than one touch, don't start detecting this gesture\n\n\n    if (isTouchEvent(event) && event.touches.length > 1) return;\n    this.handlers = handlers;\n    this.transformPagePoint = transformPagePoint;\n    var info = extractEventInfo(event);\n    var initialInfo = transformPoint(info, this.transformPagePoint);\n    var point = initialInfo.point;\n    var timestamp = getFrameData().timestamp;\n    this.history = [__assign(__assign({}, point), {\n      timestamp: timestamp\n    })];\n    var onSessionStart = handlers.onSessionStart;\n    onSessionStart && onSessionStart(event, getPanInfo(initialInfo, this.history));\n    this.removeListeners = pipe(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n  }\n\n  PanSession.prototype.updateHandlers = function (handlers) {\n    this.handlers = handlers;\n  };\n\n  PanSession.prototype.end = function () {\n    this.removeListeners && this.removeListeners();\n    cancelSync.update(this.updatePoint);\n  };\n\n  return PanSession;\n}();\n\nfunction transformPoint(info, transformPagePoint) {\n  return transformPagePoint ? {\n    point: transformPagePoint(info.point)\n  } : info;\n}\n\nfunction subtractPoint(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n\nfunction getPanInfo(_a, history) {\n  var point = _a.point;\n  return {\n    point: point,\n    delta: subtractPoint(point, lastDevicePoint(history)),\n    offset: subtractPoint(point, startDevicePoint(history)),\n    velocity: getVelocity(history, 0.1)\n  };\n}\n\nfunction startDevicePoint(history) {\n  return history[0];\n}\n\nfunction lastDevicePoint(history) {\n  return history[history.length - 1];\n}\n\nfunction getVelocity(history, timeDelta) {\n  if (history.length < 2) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var i = history.length - 1;\n  var timestampedPoint = null;\n  var lastPoint = lastDevicePoint(history);\n\n  while (i >= 0) {\n    timestampedPoint = history[i];\n\n    if (lastPoint.timestamp - timestampedPoint.timestamp > secondsToMilliseconds(timeDelta)) {\n      break;\n    }\n\n    i--;\n  }\n\n  if (!timestampedPoint) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n\n  if (time === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var currentVelocity = {\n    x: (lastPoint.x - timestampedPoint.x) / time,\n    y: (lastPoint.y - timestampedPoint.y) / time\n  };\n\n  if (currentVelocity.x === Infinity) {\n    currentVelocity.x = 0;\n  }\n\n  if (currentVelocity.y === Infinity) {\n    currentVelocity.y = 0;\n  }\n\n  return currentVelocity;\n}\n\nexport { PanSession };","import { __read } from 'tslib';\nimport { clamp, mix, progress } from 'popmotion';\nimport { calcLength } from '../../../projection/geometry/delta-calc.mjs';\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\n\nfunction applyConstraints(point, _a, elastic) {\n  var min = _a.min,\n      max = _a.max;\n\n  if (min !== undefined && point < min) {\n    // If we have a min point defined, and this is outside of that, constrain\n    point = elastic ? mix(min, point, elastic.min) : Math.max(point, min);\n  } else if (max !== undefined && point > max) {\n    // If we have a max point defined, and this is outside of that, constrain\n    point = elastic ? mix(max, point, elastic.max) : Math.min(point, max);\n  }\n\n  return point;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\n\n\nfunction calcRelativeAxisConstraints(axis, min, max) {\n  return {\n    min: min !== undefined ? axis.min + min : undefined,\n    max: max !== undefined ? axis.max + max - (axis.max - axis.min) : undefined\n  };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\n\n\nfunction calcRelativeConstraints(layoutBox, _a) {\n  var top = _a.top,\n      left = _a.left,\n      bottom = _a.bottom,\n      right = _a.right;\n  return {\n    x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n    y: calcRelativeAxisConstraints(layoutBox.y, top, bottom)\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\n\n\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n  var _a;\n\n  var min = constraintsAxis.min - layoutAxis.min;\n  var max = constraintsAxis.max - layoutAxis.max; // If the constraints axis is actually smaller than the layout axis then we can\n  // flip the constraints\n\n  if (constraintsAxis.max - constraintsAxis.min < layoutAxis.max - layoutAxis.min) {\n    _a = __read([max, min], 2), min = _a[0], max = _a[1];\n  }\n\n  return {\n    min: min,\n    max: max\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\n\n\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n  return {\n    x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n    y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y)\n  };\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\n\n\nfunction calcOrigin(source, target) {\n  var origin = 0.5;\n  var sourceLength = calcLength(source);\n  var targetLength = calcLength(target);\n\n  if (targetLength > sourceLength) {\n    origin = progress(target.min, target.max - sourceLength, source.min);\n  } else if (sourceLength > targetLength) {\n    origin = progress(source.min, source.max - targetLength, target.min);\n  }\n\n  return clamp(0, 1, origin);\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\n\n\nfunction rebaseAxisConstraints(layout, constraints) {\n  var relativeConstraints = {};\n\n  if (constraints.min !== undefined) {\n    relativeConstraints.min = constraints.min - layout.min;\n  }\n\n  if (constraints.max !== undefined) {\n    relativeConstraints.max = constraints.max - layout.min;\n  }\n\n  return relativeConstraints;\n}\n\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\n\nfunction resolveDragElastic(dragElastic) {\n  if (dragElastic === void 0) {\n    dragElastic = defaultElastic;\n  }\n\n  if (dragElastic === false) {\n    dragElastic = 0;\n  } else if (dragElastic === true) {\n    dragElastic = defaultElastic;\n  }\n\n  return {\n    x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n    y: resolveAxisElastic(dragElastic, \"top\", \"bottom\")\n  };\n}\n\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n  return {\n    min: resolvePointElastic(dragElastic, minLabel),\n    max: resolvePointElastic(dragElastic, maxLabel)\n  };\n}\n\nfunction resolvePointElastic(dragElastic, label) {\n  var _a;\n\n  return typeof dragElastic === \"number\" ? dragElastic : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\n\nexport { applyConstraints, calcOrigin, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };","/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\nfunction convertBoundingBoxToBox(_a) {\n  var top = _a.top,\n      left = _a.left,\n      right = _a.right,\n      bottom = _a.bottom;\n  return {\n    x: {\n      min: left,\n      max: right\n    },\n    y: {\n      min: top,\n      max: bottom\n    }\n  };\n}\n\nfunction convertBoxToBoundingBox(_a) {\n  var x = _a.x,\n      y = _a.y;\n  return {\n    top: y.min,\n    right: x.max,\n    bottom: y.max,\n    left: x.min\n  };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\n\n\nfunction transformBoxPoints(point, transformPoint) {\n  if (!transformPoint) return point;\n  var topLeft = transformPoint({\n    x: point.left,\n    y: point.top\n  });\n  var bottomRight = transformPoint({\n    x: point.right,\n    y: point.bottom\n  });\n  return {\n    top: topLeft.y,\n    left: topLeft.x,\n    bottom: bottomRight.y,\n    right: bottomRight.x\n  };\n}\n\nexport { convertBoundingBoxToBox, convertBoxToBoundingBox, transformBoxPoints };","import { convertBoundingBoxToBox, transformBoxPoints } from '../geometry/conversion.mjs';\nimport { translateAxis } from '../geometry/delta-apply.mjs';\n\nfunction measureViewportBox(instance, transformPoint) {\n  return convertBoundingBoxToBox(transformBoxPoints(instance.getBoundingClientRect(), transformPoint));\n}\n\nfunction measurePageBox(element, rootProjectionNode, transformPagePoint) {\n  var viewportBox = measureViewportBox(element, transformPagePoint);\n  var scroll = rootProjectionNode.scroll;\n\n  if (scroll) {\n    translateAxis(viewportBox.x, scroll.x);\n    translateAxis(viewportBox.y, scroll.y);\n  }\n\n  return viewportBox;\n}\n\nexport { measurePageBox, measureViewportBox };","import { __assign } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { PanSession } from '../PanSession.mjs';\nimport { getGlobalLock } from './utils/lock.mjs';\nimport { isRefObject } from '../../utils/is-ref-object.mjs';\nimport { addPointerEvent } from '../../events/use-pointer-event.mjs';\nimport { applyConstraints, calcRelativeConstraints, resolveDragElastic, rebaseAxisConstraints, calcViewportConstraints, calcOrigin, defaultElastic } from './utils/constraints.mjs';\nimport { AnimationType } from '../../render/utils/types.mjs';\nimport { createBox } from '../../projection/geometry/models.mjs';\nimport { eachAxis } from '../../projection/utils/each-axis.mjs';\nimport { measurePageBox } from '../../projection/utils/measure.mjs';\nimport { extractEventInfo } from '../../events/event-info.mjs';\nimport { startAnimation } from '../../animation/utils/transitions.mjs';\nimport { convertBoxToBoundingBox, convertBoundingBoxToBox } from '../../projection/geometry/conversion.mjs';\nimport { addDomEvent } from '../../events/use-dom-event.mjs';\nimport { mix } from 'popmotion';\nimport { percent } from 'style-value-types';\nimport { calcLength } from '../../projection/geometry/delta-calc.mjs';\nvar elementDragControls = new WeakMap();\n/**\n *\n */\n// let latestPointerEvent: AnyPointerEvent\n\nvar VisualElementDragControls =\n/** @class */\nfunction () {\n  function VisualElementDragControls(visualElement) {\n    // This is a reference to the global drag gesture lock, ensuring only one component\n    // can \"capture\" the drag of one or both axes.\n    // TODO: Look into moving this into pansession?\n    this.openGlobalLock = null;\n    this.isDragging = false;\n    this.currentDirection = null;\n    this.originPoint = {\n      x: 0,\n      y: 0\n    };\n    /**\n     * The permitted boundaries of travel, in pixels.\n     */\n\n    this.constraints = false;\n    this.hasMutatedConstraints = false;\n    /**\n     * The per-axis resolved elastic values.\n     */\n\n    this.elastic = createBox();\n    this.visualElement = visualElement;\n  }\n\n  VisualElementDragControls.prototype.start = function (originEvent, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.snapToCursor,\n        snapToCursor = _c === void 0 ? false : _c;\n    /**\n     * Don't start dragging if this component is exiting\n     */\n\n\n    if (this.visualElement.isPresent === false) return;\n\n    var onSessionStart = function onSessionStart(event) {\n      // Stop any animations on both axis values immediately. This allows the user to throw and catch\n      // the component.\n      _this.stopAnimation();\n\n      if (snapToCursor) {\n        _this.snapToCursor(extractEventInfo(event, \"page\").point);\n      }\n    };\n\n    var onStart = function onStart(event, info) {\n      var _a; // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n\n\n      var _b = _this.getProps(),\n          drag = _b.drag,\n          dragPropagation = _b.dragPropagation,\n          onDragStart = _b.onDragStart;\n\n      if (drag && !dragPropagation) {\n        if (_this.openGlobalLock) _this.openGlobalLock();\n        _this.openGlobalLock = getGlobalLock(drag); // If we don 't have the lock, don't start dragging\n\n        if (!_this.openGlobalLock) return;\n      }\n\n      _this.isDragging = true;\n      _this.currentDirection = null;\n\n      _this.resolveConstraints();\n\n      if (_this.visualElement.projection) {\n        _this.visualElement.projection.isAnimationBlocked = true;\n        _this.visualElement.projection.target = undefined;\n      }\n      /**\n       * Record gesture origin\n       */\n\n\n      eachAxis(function (axis) {\n        var _a, _b;\n\n        var current = _this.getAxisMotionValue(axis).get() || 0;\n        /**\n         * If the MotionValue is a percentage value convert to px\n         */\n\n        if (percent.test(current)) {\n          var measuredAxis = (_b = (_a = _this.visualElement.projection) === null || _a === void 0 ? void 0 : _a.layout) === null || _b === void 0 ? void 0 : _b.actual[axis];\n\n          if (measuredAxis) {\n            var length_1 = calcLength(measuredAxis);\n            current = length_1 * (parseFloat(current) / 100);\n          }\n        }\n\n        _this.originPoint[axis] = current;\n      }); // Fire onDragStart event\n\n      onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(event, info);\n      (_a = _this.visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Drag, true);\n    };\n\n    var onMove = function onMove(event, info) {\n      // latestPointerEvent = event\n      var _a = _this.getProps(),\n          dragPropagation = _a.dragPropagation,\n          dragDirectionLock = _a.dragDirectionLock,\n          onDirectionLock = _a.onDirectionLock,\n          onDrag = _a.onDrag; // If we didn't successfully receive the gesture lock, early return.\n\n\n      if (!dragPropagation && !_this.openGlobalLock) return;\n      var offset = info.offset; // Attempt to detect drag direction if directionLock is true\n\n      if (dragDirectionLock && _this.currentDirection === null) {\n        _this.currentDirection = getCurrentDirection(offset); // If we've successfully set a direction, notify listener\n\n        if (_this.currentDirection !== null) {\n          onDirectionLock === null || onDirectionLock === void 0 ? void 0 : onDirectionLock(_this.currentDirection);\n        }\n\n        return;\n      } // Update each point with the latest position\n\n\n      _this.updateAxis(\"x\", info.point, offset);\n\n      _this.updateAxis(\"y\", info.point, offset);\n      /**\n       * Ideally we would leave the renderer to fire naturally at the end of\n       * this frame but if the element is about to change layout as the result\n       * of a re-render we want to ensure the browser can read the latest\n       * bounding box to ensure the pointer and element don't fall out of sync.\n       */\n\n\n      _this.visualElement.syncRender();\n      /**\n       * This must fire after the syncRender call as it might trigger a state\n       * change which itself might trigger a layout update.\n       */\n\n\n      onDrag === null || onDrag === void 0 ? void 0 : onDrag(event, info);\n    };\n\n    var onSessionEnd = function onSessionEnd(event, info) {\n      return _this.stop(event, info);\n    };\n\n    this.panSession = new PanSession(originEvent, {\n      onSessionStart: onSessionStart,\n      onStart: onStart,\n      onMove: onMove,\n      onSessionEnd: onSessionEnd\n    }, {\n      transformPagePoint: this.visualElement.getTransformPagePoint()\n    });\n  };\n\n  VisualElementDragControls.prototype.stop = function (event, info) {\n    var isDragging = this.isDragging;\n    this.cancel();\n    if (!isDragging) return;\n    var velocity = info.velocity;\n    this.startAnimation(velocity);\n    var onDragEnd = this.getProps().onDragEnd;\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(event, info);\n  };\n\n  VisualElementDragControls.prototype.cancel = function () {\n    var _a, _b;\n\n    this.isDragging = false;\n\n    if (this.visualElement.projection) {\n      this.visualElement.projection.isAnimationBlocked = false;\n    }\n\n    (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n    this.panSession = undefined;\n    var dragPropagation = this.getProps().dragPropagation;\n\n    if (!dragPropagation && this.openGlobalLock) {\n      this.openGlobalLock();\n      this.openGlobalLock = null;\n    }\n\n    (_b = this.visualElement.animationState) === null || _b === void 0 ? void 0 : _b.setActive(AnimationType.Drag, false);\n  };\n\n  VisualElementDragControls.prototype.updateAxis = function (axis, _point, offset) {\n    var drag = this.getProps().drag; // If we're not dragging this axis, do an early return.\n\n    if (!offset || !shouldDrag(axis, drag, this.currentDirection)) return;\n    var axisValue = this.getAxisMotionValue(axis);\n    var next = this.originPoint[axis] + offset[axis]; // Apply constraints\n\n    if (this.constraints && this.constraints[axis]) {\n      next = applyConstraints(next, this.constraints[axis], this.elastic[axis]);\n    }\n\n    axisValue.set(next);\n  };\n\n  VisualElementDragControls.prototype.resolveConstraints = function () {\n    var _this = this;\n\n    var _a = this.getProps(),\n        dragConstraints = _a.dragConstraints,\n        dragElastic = _a.dragElastic;\n\n    var layout = (this.visualElement.projection || {}).layout;\n    var prevConstraints = this.constraints;\n\n    if (dragConstraints && isRefObject(dragConstraints)) {\n      if (!this.constraints) {\n        this.constraints = this.resolveRefConstraints();\n      }\n    } else {\n      if (dragConstraints && layout) {\n        this.constraints = calcRelativeConstraints(layout.actual, dragConstraints);\n      } else {\n        this.constraints = false;\n      }\n    }\n\n    this.elastic = resolveDragElastic(dragElastic);\n    /**\n     * If we're outputting to external MotionValues, we want to rebase the measured constraints\n     * from viewport-relative to component-relative.\n     */\n\n    if (prevConstraints !== this.constraints && layout && this.constraints && !this.hasMutatedConstraints) {\n      eachAxis(function (axis) {\n        if (_this.getAxisMotionValue(axis)) {\n          _this.constraints[axis] = rebaseAxisConstraints(layout.actual[axis], _this.constraints[axis]);\n        }\n      });\n    }\n  };\n\n  VisualElementDragControls.prototype.resolveRefConstraints = function () {\n    var _a = this.getProps(),\n        constraints = _a.dragConstraints,\n        onMeasureDragConstraints = _a.onMeasureDragConstraints;\n\n    if (!constraints || !isRefObject(constraints)) return false;\n    var constraintsElement = constraints.current;\n    invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n    var projection = this.visualElement.projection; // TODO\n\n    if (!projection || !projection.layout) return false;\n    var constraintsBox = measurePageBox(constraintsElement, projection.root, this.visualElement.getTransformPagePoint());\n    var measuredConstraints = calcViewportConstraints(projection.layout.actual, constraintsBox);\n    /**\n     * If there's an onMeasureDragConstraints listener we call it and\n     * if different constraints are returned, set constraints to that\n     */\n\n    if (onMeasureDragConstraints) {\n      var userConstraints = onMeasureDragConstraints(convertBoxToBoundingBox(measuredConstraints));\n      this.hasMutatedConstraints = !!userConstraints;\n\n      if (userConstraints) {\n        measuredConstraints = convertBoundingBoxToBox(userConstraints);\n      }\n    }\n\n    return measuredConstraints;\n  };\n\n  VisualElementDragControls.prototype.startAnimation = function (velocity) {\n    var _this = this;\n\n    var _a = this.getProps(),\n        drag = _a.drag,\n        dragMomentum = _a.dragMomentum,\n        dragElastic = _a.dragElastic,\n        dragTransition = _a.dragTransition,\n        dragSnapToOrigin = _a.dragSnapToOrigin,\n        onDragTransitionEnd = _a.onDragTransitionEnd;\n\n    var constraints = this.constraints || {};\n    var momentumAnimations = eachAxis(function (axis) {\n      var _a;\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) {\n        return;\n      }\n\n      var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n      if (dragSnapToOrigin) transition = {\n        min: 0,\n        max: 0\n      };\n      /**\n       * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n       * of spring animations so we should look into adding a disable spring option to `inertia`.\n       * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n       * using the value of `dragElastic`.\n       */\n\n      var bounceStiffness = dragElastic ? 200 : 1000000;\n      var bounceDamping = dragElastic ? 40 : 10000000;\n\n      var inertia = __assign(__assign({\n        type: \"inertia\",\n        velocity: dragMomentum ? velocity[axis] : 0,\n        bounceStiffness: bounceStiffness,\n        bounceDamping: bounceDamping,\n        timeConstant: 750,\n        restDelta: 1,\n        restSpeed: 10\n      }, dragTransition), transition); // If we're not animating on an externally-provided `MotionValue` we can use the\n      // component's animation controls which will handle interactions with whileHover (etc),\n      // otherwise we just have to animate the `MotionValue` itself.\n\n\n      return _this.startAxisValueAnimation(axis, inertia);\n    }); // Run all animations and then resolve the new drag constraints.\n\n    return Promise.all(momentumAnimations).then(onDragTransitionEnd);\n  };\n\n  VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n    var axisValue = this.getAxisMotionValue(axis);\n    return startAnimation(axis, axisValue, 0, transition);\n  };\n\n  VisualElementDragControls.prototype.stopAnimation = function () {\n    var _this = this;\n\n    eachAxis(function (axis) {\n      return _this.getAxisMotionValue(axis).stop();\n    });\n  };\n  /**\n   * Drag works differently depending on which props are provided.\n   *\n   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n   * - Otherwise, we apply the delta to the x/y motion values.\n   */\n\n\n  VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n    var _a, _b;\n\n    var dragKey = \"_drag\" + axis.toUpperCase();\n    var externalMotionValue = this.visualElement.getProps()[dragKey];\n    return externalMotionValue ? externalMotionValue : this.visualElement.getValue(axis, (_b = (_a = this.visualElement.getProps().initial) === null || _a === void 0 ? void 0 : _a[axis]) !== null && _b !== void 0 ? _b : 0);\n  };\n\n  VisualElementDragControls.prototype.snapToCursor = function (point) {\n    var _this = this;\n\n    eachAxis(function (axis) {\n      var drag = _this.getProps().drag; // If we're not dragging this axis, do an early return.\n\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) return;\n      var projection = _this.visualElement.projection;\n\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      if (projection && projection.layout) {\n        var _a = projection.layout.actual[axis],\n            min = _a.min,\n            max = _a.max;\n        axisValue.set(point[axis] - mix(min, max, 0.5));\n      }\n    });\n  };\n  /**\n   * When the viewport resizes we want to check if the measured constraints\n   * have changed and, if so, reposition the element within those new constraints\n   * relative to where it was before the resize.\n   */\n\n\n  VisualElementDragControls.prototype.scalePositionWithinConstraints = function () {\n    var _this = this;\n\n    var _a;\n\n    var _b = this.getProps(),\n        drag = _b.drag,\n        dragConstraints = _b.dragConstraints;\n\n    var projection = this.visualElement.projection;\n    if (!isRefObject(dragConstraints) || !projection || !this.constraints) return;\n    /**\n     * Stop current animations as there can be visual glitching if we try to do\n     * this mid-animation\n     */\n\n    this.stopAnimation();\n    /**\n     * Record the relative position of the dragged element relative to the\n     * constraints box and save as a progress value.\n     */\n\n    var boxProgress = {\n      x: 0,\n      y: 0\n    };\n    eachAxis(function (axis) {\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      if (axisValue) {\n        var latest = axisValue.get();\n        boxProgress[axis] = calcOrigin({\n          min: latest,\n          max: latest\n        }, _this.constraints[axis]);\n      }\n    });\n    /**\n     * Update the layout of this element and resolve the latest drag constraints\n     */\n\n    var transformTemplate = this.visualElement.getProps().transformTemplate;\n    this.visualElement.getInstance().style.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\";\n    (_a = projection.root) === null || _a === void 0 ? void 0 : _a.updateScroll();\n    projection.updateLayout();\n    this.resolveConstraints();\n    /**\n     * For each axis, calculate the current progress of the layout axis\n     * within the new constraints.\n     */\n\n    eachAxis(function (axis) {\n      if (!shouldDrag(axis, drag, null)) return;\n      /**\n       * Calculate a new transform based on the previous box progress\n       */\n\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      var _a = _this.constraints[axis],\n          min = _a.min,\n          max = _a.max;\n      axisValue.set(mix(min, max, boxProgress[axis]));\n    });\n  };\n\n  VisualElementDragControls.prototype.addListeners = function () {\n    var _this = this;\n\n    var _a;\n\n    elementDragControls.set(this.visualElement, this);\n    var element = this.visualElement.getInstance();\n    /**\n     * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n     */\n\n    var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n      var _a = _this.getProps(),\n          drag = _a.drag,\n          _b = _a.dragListener,\n          dragListener = _b === void 0 ? true : _b;\n\n      drag && dragListener && _this.start(event);\n    });\n\n    var measureDragConstraints = function measureDragConstraints() {\n      var dragConstraints = _this.getProps().dragConstraints;\n\n      if (isRefObject(dragConstraints)) {\n        _this.constraints = _this.resolveRefConstraints();\n      }\n    };\n\n    var projection = this.visualElement.projection;\n    var stopMeasureLayoutListener = projection.addEventListener(\"measure\", measureDragConstraints);\n\n    if (projection && !projection.layout) {\n      (_a = projection.root) === null || _a === void 0 ? void 0 : _a.updateScroll();\n      projection.updateLayout();\n    }\n\n    measureDragConstraints();\n    /**\n     * Attach a window resize listener to scale the draggable target within its defined\n     * constraints as the window resizes.\n     */\n\n    var stopResizeListener = addDomEvent(window, \"resize\", function () {\n      _this.scalePositionWithinConstraints();\n    });\n    /**\n     * If the element's layout changes, calculate the delta and apply that to\n     * the drag gesture's origin point.\n     */\n\n    projection.addEventListener(\"didUpdate\", function (_a) {\n      var delta = _a.delta,\n          hasLayoutChanged = _a.hasLayoutChanged;\n\n      if (_this.isDragging && hasLayoutChanged) {\n        eachAxis(function (axis) {\n          var motionValue = _this.getAxisMotionValue(axis);\n\n          if (!motionValue) return;\n          _this.originPoint[axis] += delta[axis].translate;\n          motionValue.set(motionValue.get() + delta[axis].translate);\n        });\n\n        _this.visualElement.syncRender();\n      }\n    });\n    return function () {\n      stopResizeListener();\n      stopPointerListener();\n      stopMeasureLayoutListener();\n    };\n  };\n\n  VisualElementDragControls.prototype.getProps = function () {\n    var props = this.visualElement.getProps();\n    var _a = props.drag,\n        drag = _a === void 0 ? false : _a,\n        _b = props.dragDirectionLock,\n        dragDirectionLock = _b === void 0 ? false : _b,\n        _c = props.dragPropagation,\n        dragPropagation = _c === void 0 ? false : _c,\n        _d = props.dragConstraints,\n        dragConstraints = _d === void 0 ? false : _d,\n        _e = props.dragElastic,\n        dragElastic = _e === void 0 ? defaultElastic : _e,\n        _f = props.dragMomentum,\n        dragMomentum = _f === void 0 ? true : _f;\n    return __assign(__assign({}, props), {\n      drag: drag,\n      dragDirectionLock: dragDirectionLock,\n      dragPropagation: dragPropagation,\n      dragConstraints: dragConstraints,\n      dragElastic: dragElastic,\n      dragMomentum: dragMomentum\n    });\n  };\n\n  return VisualElementDragControls;\n}();\n\nfunction shouldDrag(direction, drag, currentDirection) {\n  return (drag === true || drag === direction) && (currentDirection === null || currentDirection === direction);\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\n\n\nfunction getCurrentDirection(offset, lockThreshold) {\n  if (lockThreshold === void 0) {\n    lockThreshold = 10;\n  }\n\n  var direction = null;\n\n  if (Math.abs(offset.y) > lockThreshold) {\n    direction = \"y\";\n  } else if (Math.abs(offset.x) > lockThreshold) {\n    direction = \"x\";\n  }\n\n  return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };","import { useDrag } from '../../gestures/drag/use-drag.mjs';\nimport { usePanGesture } from '../../gestures/use-pan-gesture.mjs';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.mjs';\nvar drag = {\n  pan: makeRenderlessComponent(usePanGesture),\n  drag: makeRenderlessComponent(useDrag)\n};\nexport { drag };","import { useRef, useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.mjs';\nimport { usePointerEvent } from '../events/use-pointer-event.mjs';\nimport { PanSession } from './PanSession.mjs';\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @internalremarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\n\nfunction usePanGesture(_a) {\n  var onPan = _a.onPan,\n      onPanStart = _a.onPanStart,\n      onPanEnd = _a.onPanEnd,\n      onPanSessionStart = _a.onPanSessionStart,\n      visualElement = _a.visualElement;\n  var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n  var panSession = useRef(null);\n  var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n  var handlers = {\n    onSessionStart: onPanSessionStart,\n    onStart: onPanStart,\n    onMove: onPan,\n    onEnd: function onEnd(event, info) {\n      panSession.current = null;\n      onPanEnd && onPanEnd(event, info);\n    }\n  };\n  useEffect(function () {\n    if (panSession.current !== null) {\n      panSession.current.updateHandlers(handlers);\n    }\n  });\n\n  function onPointerDown(event) {\n    panSession.current = new PanSession(event, handlers, {\n      transformPagePoint: transformPagePoint\n    });\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPanEvents && onPointerDown);\n  useUnmountEffect(function () {\n    return panSession.current && panSession.current.end();\n  });\n}\n\nexport { usePanGesture };","import { useEffect } from 'react';\nimport { VisualElementDragControls } from './VisualElementDragControls.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\n\nfunction useDrag(props) {\n  var groupDragControls = props.dragControls,\n      visualElement = props.visualElement;\n  var dragControls = useConstant(function () {\n    return new VisualElementDragControls(visualElement);\n  }); // If we've been provided a DragControls for manual control over the drag gesture,\n  // subscribe this component to it on mount.\n\n  useEffect(function () {\n    return groupDragControls && groupDragControls.subscribe(dragControls);\n  }, [dragControls, groupDragControls]); // Apply the event listeners to the element\n\n  useEffect(function () {\n    return dragControls.addListeners();\n  }, [dragControls]);\n}\n\nexport { useDrag };","import { __spreadArray, __read } from 'tslib';\nimport { SubscriptionManager } from '../../utils/subscription-manager.mjs';\nvar names = [\"LayoutMeasure\", \"BeforeLayoutMeasure\", \"LayoutUpdate\", \"ViewportBoxUpdate\", \"Update\", \"Render\", \"AnimationComplete\", \"LayoutAnimationComplete\", \"AnimationStart\", \"SetAxisTarget\", \"Unmount\"];\n\nfunction createLifecycles() {\n  var managers = names.map(function () {\n    return new SubscriptionManager();\n  });\n  var propSubscriptions = {};\n  var lifecycles = {\n    clearAllListeners: function clearAllListeners() {\n      return managers.forEach(function (manager) {\n        return manager.clear();\n      });\n    },\n    updatePropListeners: function updatePropListeners(props) {\n      names.forEach(function (name) {\n        var _a;\n\n        var on = \"on\" + name;\n        var propListener = props[on]; // Unsubscribe existing subscription\n\n        (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions); // Add new subscription\n\n        if (propListener) {\n          propSubscriptions[name] = lifecycles[on](propListener);\n        }\n      });\n    }\n  };\n  managers.forEach(function (manager, i) {\n    lifecycles[\"on\" + names[i]] = function (handler) {\n      return manager.add(handler);\n    };\n\n    lifecycles[\"notify\" + names[i]] = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      manager.notify.apply(manager, __spreadArray([], __read(args), false));\n    };\n  });\n  return lifecycles;\n}\n\nexport { createLifecycles };","import { __assign, __spreadArray, __read } from 'tslib';\nimport sync, { cancelSync } from 'framesync';\nimport { motionValue } from '../value/index.mjs';\nimport { isMotionValue } from '../value/utils/is-motion-value.mjs';\nimport { variantPriorityOrder } from './utils/animation-state.mjs';\nimport { createLifecycles } from './utils/lifecycles.mjs';\nimport { updateMotionValuesFromProps } from './utils/motion-values.mjs';\nimport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel } from './utils/variants.mjs';\n\nvar visualElement = function visualElement(_a) {\n  var _b = _a.treeType,\n      treeType = _b === void 0 ? \"\" : _b,\n      build = _a.build,\n      _getBaseTarget = _a.getBaseTarget,\n      _makeTargetAnimatable = _a.makeTargetAnimatable,\n      _measureViewportBox = _a.measureViewportBox,\n      renderInstance = _a.render,\n      readValueFromInstance = _a.readValueFromInstance,\n      removeValueFromRenderState = _a.removeValueFromRenderState,\n      _sortNodePosition = _a.sortNodePosition,\n      scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n  return function (_a, options) {\n    var parent = _a.parent,\n        props = _a.props,\n        presenceId = _a.presenceId,\n        blockInitialAnimation = _a.blockInitialAnimation,\n        visualState = _a.visualState;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var isMounted = false;\n    var latestValues = visualState.latestValues,\n        renderState = visualState.renderState;\n    /**\n     * The instance of the render-specific node that will be hydrated by the\n     * exposed React ref. So for example, this visual element can host a\n     * HTMLElement, plain object, or Three.js object. The functions provided\n     * in VisualElementConfig allow us to interface with this instance.\n     */\n\n    var instance;\n    /**\n     * Manages the subscriptions for a visual element's lifecycle, for instance\n     * onRender\n     */\n\n    var lifecycles = createLifecycles();\n    /**\n     * A map of all motion values attached to this visual element. Motion\n     * values are source of truth for any given animated value. A motion\n     * value might be provided externally by the component via props.\n     */\n\n    var values = new Map();\n    /**\n     * A map of every subscription that binds the provided or generated\n     * motion values onChange listeners to this visual element.\n     */\n\n    var valueSubscriptions = new Map();\n    /**\n     * A reference to the previously-provided motion values as returned\n     * from scrapeMotionValuesFromProps. We use the keys in here to determine\n     * if any motion values need to be removed after props are updated.\n     */\n\n    var prevMotionValues = {};\n    /**\n     * When values are removed from all animation props we need to search\n     * for a fallback value to animate to. These values are tracked in baseTarget.\n     */\n\n    var baseTarget = __assign({}, latestValues); // Internal methods ========================\n\n    /**\n     * On mount, this will be hydrated with a callback to disconnect\n     * this visual element from its parent on unmount.\n     */\n\n\n    var removeFromVariantTree;\n    /**\n     * Render the element with the latest styles outside of the React\n     * render lifecycle\n     */\n\n    function render() {\n      if (!instance || !isMounted) return;\n      triggerBuild();\n      renderInstance(instance, renderState, props.style, element.projection);\n    }\n\n    function triggerBuild() {\n      build(element, renderState, latestValues, options, props);\n    }\n\n    function update() {\n      lifecycles.notifyUpdate(latestValues);\n    }\n    /**\n     *\n     */\n\n\n    function bindToMotionValue(key, value) {\n      var removeOnChange = value.onChange(function (latestValue) {\n        latestValues[key] = latestValue;\n        props.onUpdate && sync.update(update, false, true);\n      });\n      var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n      valueSubscriptions.set(key, function () {\n        removeOnChange();\n        removeOnRenderRequest();\n      });\n    }\n    /**\n     * Any motion values that are provided to the element when created\n     * aren't yet bound to the element, as this would technically be impure.\n     * However, we iterate through the motion values and set them to the\n     * initial values for this component.\n     *\n     * TODO: This is impure and we should look at changing this to run on mount.\n     * Doing so will break some tests but this isn't neccessarily a breaking change,\n     * more a reflection of the test.\n     */\n\n\n    var initialMotionValues = scrapeMotionValuesFromProps(props);\n\n    for (var key in initialMotionValues) {\n      var value = initialMotionValues[key];\n\n      if (latestValues[key] !== undefined && isMotionValue(value)) {\n        value.set(latestValues[key], false);\n      }\n    }\n    /**\n     * Determine what role this visual element should take in the variant tree.\n     */\n\n\n    var isControllingVariants = checkIfControllingVariants(props);\n    var isVariantNode = checkIfVariantNode(props);\n\n    var element = __assign(__assign({\n      treeType: treeType,\n\n      /**\n       * This is a mirror of the internal instance prop, which keeps\n       * VisualElement type-compatible with React's RefObject.\n       */\n      current: null,\n\n      /**\n       * The depth of this visual element within the visual element tree.\n       */\n      depth: parent ? parent.depth + 1 : 0,\n      parent: parent,\n      children: new Set(),\n\n      /**\n       *\n       */\n      presenceId: presenceId,\n\n      /**\n       * If this component is part of the variant tree, it should track\n       * any children that are also part of the tree. This is essentially\n       * a shadow tree to simplify logic around how to stagger over children.\n       */\n      variantChildren: isVariantNode ? new Set() : undefined,\n\n      /**\n       * Whether this instance is visible. This can be changed imperatively\n       * by the projection tree, is analogous to CSS's visibility in that\n       * hidden elements should take up layout, and needs enacting by the configured\n       * render function.\n       */\n      isVisible: undefined,\n\n      /**\n       * Normally, if a component is controlled by a parent's variants, it can\n       * rely on that ancestor to trigger animations further down the tree.\n       * However, if a component is created after its parent is mounted, the parent\n       * won't trigger that mount animation so the child needs to.\n       *\n       * TODO: This might be better replaced with a method isParentMounted\n       */\n      manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()),\n\n      /**\n       * This can be set by AnimatePresence to force components that mount\n       * at the same time as it to mount as if they have initial={false} set.\n       */\n      blockInitialAnimation: blockInitialAnimation,\n\n      /**\n       * Determine whether this component has mounted yet. This is mostly used\n       * by variant children to determine whether they need to trigger their\n       * own animations on mount.\n       */\n      isMounted: function isMounted() {\n        return Boolean(instance);\n      },\n      mount: function mount(newInstance) {\n        isMounted = true;\n        instance = element.current = newInstance;\n\n        if (element.projection) {\n          element.projection.mount(newInstance);\n        }\n\n        if (isVariantNode && parent && !isControllingVariants) {\n          removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n        }\n\n        parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n        element.setProps(props);\n      },\n\n      /**\n       *\n       */\n      unmount: function unmount() {\n        var _a;\n\n        (_a = element.projection) === null || _a === void 0 ? void 0 : _a.unmount();\n        cancelSync.update(update);\n        cancelSync.render(render);\n        valueSubscriptions.forEach(function (remove) {\n          return remove();\n        });\n        removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n        parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n        lifecycles.clearAllListeners();\n        instance = undefined;\n        isMounted = false;\n      },\n\n      /**\n       * Add a child visual element to our set of children.\n       */\n      addVariantChild: function addVariantChild(child) {\n        var _a;\n\n        var closestVariantNode = element.getClosestVariantNode();\n\n        if (closestVariantNode) {\n          (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n          return function () {\n            return closestVariantNode.variantChildren.delete(child);\n          };\n        }\n      },\n      sortNodePosition: function sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!_sortNodePosition || treeType !== other.treeType) return 0;\n        return _sortNodePosition(element.getInstance(), other.getInstance());\n      },\n\n      /**\n       * Returns the closest variant node in the tree starting from\n       * this visual element.\n       */\n      getClosestVariantNode: function getClosestVariantNode() {\n        return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n      },\n\n      /**\n       * Expose the latest layoutId prop.\n       */\n      getLayoutId: function getLayoutId() {\n        return props.layoutId;\n      },\n\n      /**\n       * Returns the current instance.\n       */\n      getInstance: function getInstance() {\n        return instance;\n      },\n\n      /**\n       * Get/set the latest static values.\n       */\n      getStaticValue: function getStaticValue(key) {\n        return latestValues[key];\n      },\n      setStaticValue: function setStaticValue(key, value) {\n        return latestValues[key] = value;\n      },\n\n      /**\n       * Returns the latest motion value state. Currently only used to take\n       * a snapshot of the visual element - perhaps this can return the whole\n       * visual state\n       */\n      getLatestValues: function getLatestValues() {\n        return latestValues;\n      },\n\n      /**\n       * Set the visiblity of the visual element. If it's changed, schedule\n       * a render to reflect these changes.\n       */\n      setVisibility: function setVisibility(visibility) {\n        if (element.isVisible === visibility) return;\n        element.isVisible = visibility;\n        element.scheduleRender();\n      },\n\n      /**\n       * Make a target animatable by Popmotion. For instance, if we're\n       * trying to animate width from 100px to 100vw we need to measure 100vw\n       * in pixels to determine what we really need to animate to. This is also\n       * pluggable to support Framer's custom value types like Color,\n       * and CSS variables.\n       */\n      makeTargetAnimatable: function makeTargetAnimatable(target, canMutate) {\n        if (canMutate === void 0) {\n          canMutate = true;\n        }\n\n        return _makeTargetAnimatable(element, target, props, canMutate);\n      },\n\n      /**\n       * Measure the current viewport box with or without transforms.\n       * Only measures axis-aligned boxes, rotate and skew must be manually\n       * removed with a re-render to work.\n       */\n      measureViewportBox: function measureViewportBox() {\n        return _measureViewportBox(instance, props);\n      },\n      // Motion values ========================\n\n      /**\n       * Add a motion value and bind it to this visual element.\n       */\n      addValue: function addValue(key, value) {\n        // Remove existing value if it exists\n        if (element.hasValue(key)) element.removeValue(key);\n        values.set(key, value);\n        latestValues[key] = value.get();\n        bindToMotionValue(key, value);\n      },\n\n      /**\n       * Remove a motion value and unbind any active subscriptions.\n       */\n      removeValue: function removeValue(key) {\n        var _a;\n\n        values.delete(key);\n        (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n        valueSubscriptions.delete(key);\n        delete latestValues[key];\n        removeValueFromRenderState(key, renderState);\n      },\n\n      /**\n       * Check whether we have a motion value for this key\n       */\n      hasValue: function hasValue(key) {\n        return values.has(key);\n      },\n\n      /**\n       * Get a motion value for this key. If called with a default\n       * value, we'll create one if none exists.\n       */\n      getValue: function getValue(key, defaultValue) {\n        var value = values.get(key);\n\n        if (value === undefined && defaultValue !== undefined) {\n          value = motionValue(defaultValue);\n          element.addValue(key, value);\n        }\n\n        return value;\n      },\n\n      /**\n       * Iterate over our motion values.\n       */\n      forEachValue: function forEachValue(callback) {\n        return values.forEach(callback);\n      },\n\n      /**\n       * If we're trying to animate to a previously unencountered value,\n       * we need to check for it in our state and as a last resort read it\n       * directly from the instance (which might have performance implications).\n       */\n      readValue: function readValue(key) {\n        var _a;\n\n        return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options);\n      },\n\n      /**\n       * Set the base target to later animate back to. This is currently\n       * only hydrated on creation and when we first read a value.\n       */\n      setBaseTarget: function setBaseTarget(key, value) {\n        baseTarget[key] = value;\n      },\n\n      /**\n       * Find the base target for a value thats been removed from all animation\n       * props.\n       */\n      getBaseTarget: function getBaseTarget(key) {\n        if (_getBaseTarget) {\n          var target = _getBaseTarget(props, key);\n\n          if (target !== undefined && !isMotionValue(target)) return target;\n        }\n\n        return baseTarget[key];\n      }\n    }, lifecycles), {\n      /**\n       * Build the renderer state based on the latest visual state.\n       */\n      build: function build() {\n        triggerBuild();\n        return renderState;\n      },\n\n      /**\n       * Schedule a render on the next animation frame.\n       */\n      scheduleRender: function scheduleRender() {\n        sync.render(render, false, true);\n      },\n\n      /**\n       * Synchronously fire render. It's prefered that we batch renders but\n       * in many circumstances, like layout measurement, we need to run this\n       * synchronously. However in those instances other measures should be taken\n       * to batch reads/writes.\n       */\n      syncRender: render,\n\n      /**\n       * Update the provided props. Ensure any newly-added motion values are\n       * added to our map, old ones removed, and listeners updated.\n       */\n      setProps: function setProps(newProps) {\n        if (newProps.transformTemplate || props.transformTemplate) {\n          element.scheduleRender();\n        }\n\n        props = newProps;\n        lifecycles.updatePropListeners(newProps);\n        prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n      },\n      getProps: function getProps() {\n        return props;\n      },\n      // Variants ==============================\n\n      /**\n       * Returns the variant definition with a given name.\n       */\n      getVariant: function getVariant(name) {\n        var _a;\n\n        return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name];\n      },\n\n      /**\n       * Returns the defined default transition on this component.\n       */\n      getDefaultTransition: function getDefaultTransition() {\n        return props.transition;\n      },\n      getTransformPagePoint: function getTransformPagePoint() {\n        return props.transformPagePoint;\n      },\n\n      /**\n       * Used by child variant nodes to get the closest ancestor variant props.\n       */\n      getVariantContext: function getVariantContext(startAtParent) {\n        if (startAtParent === void 0) {\n          startAtParent = false;\n        }\n\n        if (startAtParent) return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n\n        if (!isControllingVariants) {\n          var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n\n          if (props.initial !== undefined) {\n            context_1.initial = props.initial;\n          }\n\n          return context_1;\n        }\n\n        var context = {};\n\n        for (var i = 0; i < numVariantProps; i++) {\n          var name_1 = variantProps[i];\n          var prop = props[name_1];\n\n          if (isVariantLabel(prop) || prop === false) {\n            context[name_1] = prop;\n          }\n        }\n\n        return context;\n      }\n    });\n\n    return element;\n  };\n};\n\nvar variantProps = __spreadArray([\"initial\"], __read(variantPriorityOrder), false);\n\nvar numVariantProps = variantProps.length;\nexport { visualElement };","import { motionValue } from '../../value/index.mjs';\nimport { isMotionValue } from '../../value/utils/is-motion-value.mjs';\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n  var _a;\n\n  for (var key in next) {\n    var nextValue = next[key];\n    var prevValue = prev[key];\n\n    if (isMotionValue(nextValue)) {\n      /**\n       * If this is a motion value found in props or style, we want to add it\n       * to our visual element's motion value map.\n       */\n      element.addValue(key, nextValue);\n    } else if (isMotionValue(prevValue)) {\n      /**\n       * If we're swapping to a new motion value, create a new motion value\n       * from that\n       */\n      element.addValue(key, motionValue(nextValue));\n    } else if (prevValue !== nextValue) {\n      /**\n       * If this is a flat value that has changed, update the motion value\n       * or create one if it doesn't exist. We only want to do this if we're\n       * not handling the value with our animation state.\n       */\n      if (element.hasValue(key)) {\n        var existingValue = element.getValue(key); // TODO: Only update values that aren't being animated or even looked at\n\n        !existingValue.hasAnimated && existingValue.set(nextValue);\n      } else {\n        element.addValue(key, motionValue((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n      }\n    }\n  } // Handle removed values\n\n\n  for (var key in prev) {\n    if (next[key] === undefined) element.removeValue(key);\n  }\n\n  return next;\n}\n\nexport { updateMotionValuesFromProps };","import { __rest, __assign, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\n\nfunction isCSSVariable(value) {\n  return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\n\n\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\n\nfunction parseCSSVariable(current) {\n  var match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n\n  var _a = __read(match, 3),\n      token = _a[1],\n      fallback = _a[2];\n\n  return [token, fallback];\n}\n\nvar maxDepth = 4;\n\nfunction getVariableValue(current, element, depth) {\n  if (depth === void 0) {\n    depth = 1;\n  }\n\n  invariant(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\".concat(current, \"\\\". This may indicate a circular fallback dependency.\"));\n\n  var _a = __read(parseCSSVariable(current), 2),\n      token = _a[0],\n      fallback = _a[1]; // No CSS variable detected\n\n\n  if (!token) return; // Attempt to read this CSS variable off the element\n\n  var resolved = window.getComputedStyle(element).getPropertyValue(token);\n\n  if (resolved) {\n    return resolved.trim();\n  } else if (isCSSVariable(fallback)) {\n    // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n    return getVariableValue(fallback, element, depth + 1);\n  } else {\n    return fallback;\n  }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\n\n\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n  var _b;\n\n  var target = __rest(_a, []);\n\n  var element = visualElement.getInstance();\n  if (!(element instanceof Element)) return {\n    target: target,\n    transitionEnd: transitionEnd\n  }; // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n  // only if they change but I think this reads clearer and this isn't a performance-critical path.\n\n  if (transitionEnd) {\n    transitionEnd = __assign({}, transitionEnd);\n  } // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n\n\n  visualElement.forEachValue(function (value) {\n    var current = value.get();\n    if (!isCSSVariable(current)) return;\n    var resolved = getVariableValue(current, element);\n    if (resolved) value.set(resolved);\n  }); // Cycle through every target property and resolve CSS variables. Currently\n  // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n\n  for (var key in target) {\n    var current = target[key];\n    if (!isCSSVariable(current)) continue;\n    var resolved = getVariableValue(current, element);\n    if (!resolved) continue; // Clone target if it hasn't already been\n\n    target[key] = resolved; // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n    // CSS variable. This will ensure that after the animation the component will reflect\n    // changes in the value of the CSS variable.\n\n    if (transitionEnd) (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : transitionEnd[key] = current;\n  }\n\n  return {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\nexport { cssVariableRegex, parseCSSVariable, resolveCSSVariables };","import { __assign, __read } from 'tslib';\nimport { number, px } from 'style-value-types';\nimport { isKeyframesTarget } from '../../../animation/utils/is-keyframes-target.mjs';\nimport { invariant } from 'hey-listen';\nimport { transformProps } from '../../html/utils/transform.mjs';\nimport { findDimensionValueType } from '../value-types/dimensions.mjs';\nvar positionalKeys = new Set([\"width\", \"height\", \"top\", \"left\", \"right\", \"bottom\", \"x\", \"y\"]);\n\nvar isPositionalKey = function isPositionalKey(key) {\n  return positionalKeys.has(key);\n};\n\nvar hasPositionalKey = function hasPositionalKey(target) {\n  return Object.keys(target).some(isPositionalKey);\n};\n\nvar setAndResetVelocity = function setAndResetVelocity(value, to) {\n  // Looks odd but setting it twice doesn't render, it'll just\n  // set both prev and current to the latest value\n  value.set(to, false);\n  value.set(to);\n};\n\nvar isNumOrPxType = function isNumOrPxType(v) {\n  return v === number || v === px;\n};\n\nvar BoundingBoxDimension;\n\n(function (BoundingBoxDimension) {\n  BoundingBoxDimension[\"width\"] = \"width\";\n  BoundingBoxDimension[\"height\"] = \"height\";\n  BoundingBoxDimension[\"left\"] = \"left\";\n  BoundingBoxDimension[\"right\"] = \"right\";\n  BoundingBoxDimension[\"top\"] = \"top\";\n  BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\n\nvar getPosFromMatrix = function getPosFromMatrix(matrix, pos) {\n  return parseFloat(matrix.split(\", \")[pos]);\n};\n\nvar getTranslateFromMatrix = function getTranslateFromMatrix(pos2, pos3) {\n  return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform) return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n\n    if (matrix3d) {\n      return getPosFromMatrix(matrix3d[1], pos3);\n    } else {\n      var matrix = transform.match(/^matrix\\((.+)\\)$/);\n\n      if (matrix) {\n        return getPosFromMatrix(matrix[1], pos2);\n      } else {\n        return 0;\n      }\n    }\n  };\n};\n\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transformProps.filter(function (key) {\n  return !transformKeys.has(key);\n});\n\nfunction removeNonTranslationalTransform(visualElement) {\n  var removedTransforms = [];\n  nonTranslationalTransformKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n\n    if (value !== undefined) {\n      removedTransforms.push([key, value.get()]);\n      value.set(key.startsWith(\"scale\") ? 1 : 0);\n    }\n  }); // Apply changes to element before measurement\n\n  if (removedTransforms.length) visualElement.syncRender();\n  return removedTransforms;\n}\n\nvar positionalValues = {\n  // Dimensions\n  width: function width(_a, _b) {\n    var x = _a.x;\n    var _c = _b.paddingLeft,\n        paddingLeft = _c === void 0 ? \"0\" : _c,\n        _d = _b.paddingRight,\n        paddingRight = _d === void 0 ? \"0\" : _d;\n    return x.max - x.min - parseFloat(paddingLeft) - parseFloat(paddingRight);\n  },\n  height: function height(_a, _b) {\n    var y = _a.y;\n    var _c = _b.paddingTop,\n        paddingTop = _c === void 0 ? \"0\" : _c,\n        _d = _b.paddingBottom,\n        paddingBottom = _d === void 0 ? \"0\" : _d;\n    return y.max - y.min - parseFloat(paddingTop) - parseFloat(paddingBottom);\n  },\n  top: function top(_bbox, _a) {\n    var top = _a.top;\n    return parseFloat(top);\n  },\n  left: function left(_bbox, _a) {\n    var left = _a.left;\n    return parseFloat(left);\n  },\n  bottom: function bottom(_a, _b) {\n    var y = _a.y;\n    var top = _b.top;\n    return parseFloat(top) + (y.max - y.min);\n  },\n  right: function right(_a, _b) {\n    var x = _a.x;\n    var left = _b.left;\n    return parseFloat(left) + (x.max - x.min);\n  },\n  // Transform\n  x: getTranslateFromMatrix(4, 13),\n  y: getTranslateFromMatrix(5, 14)\n};\n\nvar convertChangedValueTypes = function convertChangedValueTypes(target, visualElement, changedKeys) {\n  var originBbox = visualElement.measureViewportBox();\n  var element = visualElement.getInstance();\n  var elementComputedStyle = getComputedStyle(element);\n  var display = elementComputedStyle.display;\n  var origin = {}; // If the element is currently set to display: \"none\", make it visible before\n  // measuring the target bounding box\n\n  if (display === \"none\") {\n    visualElement.setStaticValue(\"display\", target.display || \"block\");\n  }\n  /**\n   * Record origins before we render and update styles\n   */\n\n\n  changedKeys.forEach(function (key) {\n    origin[key] = positionalValues[key](originBbox, elementComputedStyle);\n  }); // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n\n  visualElement.syncRender();\n  var targetBbox = visualElement.measureViewportBox();\n  changedKeys.forEach(function (key) {\n    // Restore styles to their **calculated computed style**, not their actual\n    // originally set style. This allows us to animate between equivalent pixel units.\n    var value = visualElement.getValue(key);\n    setAndResetVelocity(value, origin[key]);\n    target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n  });\n  return target;\n};\n\nvar checkAndConvertChangedValueTypes = function checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) {\n  if (origin === void 0) {\n    origin = {};\n  }\n\n  if (transitionEnd === void 0) {\n    transitionEnd = {};\n  }\n\n  target = __assign({}, target);\n  transitionEnd = __assign({}, transitionEnd);\n  var targetPositionalKeys = Object.keys(target).filter(isPositionalKey); // We want to remove any transform values that could affect the element's bounding box before\n  // it's measured. We'll reapply these later.\n\n  var removedTransformValues = [];\n  var hasAttemptedToRemoveTransformValues = false;\n  var changedValueTypeKeys = [];\n  targetPositionalKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n    if (!visualElement.hasValue(key)) return;\n    var from = origin[key];\n    var fromType = findDimensionValueType(from);\n    var to = target[key];\n    var toType; // TODO: The current implementation of this basically throws an error\n    // if you try and do value conversion via keyframes. There's probably\n    // a way of doing this but the performance implications would need greater scrutiny,\n    // as it'd be doing multiple resize-remeasure operations.\n\n    if (isKeyframesTarget(to)) {\n      var numKeyframes = to.length;\n      var fromIndex = to[0] === null ? 1 : 0;\n      from = to[fromIndex];\n      fromType = findDimensionValueType(from);\n\n      for (var i = fromIndex; i < numKeyframes; i++) {\n        if (!toType) {\n          toType = findDimensionValueType(to[i]);\n          invariant(toType === fromType || isNumOrPxType(fromType) && isNumOrPxType(toType), \"Keyframes must be of the same dimension as the current value\");\n        } else {\n          invariant(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n        }\n      }\n    } else {\n      toType = findDimensionValueType(to);\n    }\n\n    if (fromType !== toType) {\n      // If they're both just number or px, convert them both to numbers rather than\n      // relying on resize/remeasure to convert (which is wasteful in this situation)\n      if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n        var current = value.get();\n\n        if (typeof current === \"string\") {\n          value.set(parseFloat(current));\n        }\n\n        if (typeof to === \"string\") {\n          target[key] = parseFloat(to);\n        } else if (Array.isArray(to) && toType === px) {\n          target[key] = to.map(parseFloat);\n        }\n      } else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) && (toType === null || toType === void 0 ? void 0 : toType.transform) && (from === 0 || to === 0)) {\n        // If one or the other value is 0, it's safe to coerce it to the\n        // type of the other without measurement\n        if (from === 0) {\n          value.set(toType.transform(from));\n        } else {\n          target[key] = fromType.transform(to);\n        }\n      } else {\n        // If we're going to do value conversion via DOM measurements, we first\n        // need to remove non-positional transform values that could affect the bbox measurements.\n        if (!hasAttemptedToRemoveTransformValues) {\n          removedTransformValues = removeNonTranslationalTransform(visualElement);\n          hasAttemptedToRemoveTransformValues = true;\n        }\n\n        changedValueTypeKeys.push(key);\n        transitionEnd[key] = transitionEnd[key] !== undefined ? transitionEnd[key] : target[key];\n        setAndResetVelocity(value, to);\n      }\n    }\n  });\n\n  if (changedValueTypeKeys.length) {\n    var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys); // If we removed transform values, reapply them before the next render\n\n    if (removedTransformValues.length) {\n      removedTransformValues.forEach(function (_a) {\n        var _b = __read(_a, 2),\n            key = _b[0],\n            value = _b[1];\n\n        visualElement.getValue(key).set(value);\n      });\n    } // Reapply original values\n\n\n    visualElement.syncRender();\n    return {\n      target: convertedTarget,\n      transitionEnd: transitionEnd\n    };\n  } else {\n    return {\n      target: target,\n      transitionEnd: transitionEnd\n    };\n  }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\n\n\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n  return hasPositionalKey(target) ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) : {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\nexport { BoundingBoxDimension, positionalValues, unitConversion };","import { resolveCSSVariables } from './css-variables-conversion.mjs';\nimport { unitConversion } from './unit-conversion.mjs';\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\n\nvar parseDomVariant = function parseDomVariant(visualElement, target, origin, transitionEnd) {\n  var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n  target = resolved.target;\n  transitionEnd = resolved.transitionEnd;\n  return unitConversion(visualElement, target, origin, transitionEnd);\n};\n\nexport { parseDomVariant };","import { __rest, __assign } from 'tslib';\nimport { visualElement } from '../index.mjs';\nimport { getOrigin, checkTargetForNewValues } from '../utils/setters.mjs';\nimport { buildHTMLStyles } from './utils/build-styles.mjs';\nimport { isCSSVariable } from '../dom/utils/is-css-variable.mjs';\nimport { parseDomVariant } from '../dom/utils/parse-dom-variant.mjs';\nimport { isTransformProp } from './utils/transform.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { renderHTML } from './utils/render.mjs';\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\nimport { measureViewportBox as _measureViewportBox } from '../../projection/utils/measure.mjs';\n\nfunction getComputedStyle(element) {\n  return window.getComputedStyle(element);\n}\n\nvar htmlConfig = {\n  treeType: \"dom\",\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    if (isTransformProp(key)) {\n      var defaultType = getDefaultValueType(key);\n      return defaultType ? defaultType.default || 0 : 0;\n    } else {\n      var computedStyle = getComputedStyle(domElement);\n      return (isCSSVariable(key) ? computedStyle.getPropertyValue(key) : computedStyle[key]) || 0;\n    }\n  },\n  sortNodePosition: function sortNodePosition(a, b) {\n    /**\n     * compareDocumentPosition returns a bitmask, by using the bitwise &\n     * we're returning true if 2 in that bitmask is set to true. 2 is set\n     * to true if b preceeds a.\n     */\n    return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n  },\n  getBaseTarget: function getBaseTarget(props, key) {\n    var _a;\n\n    return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n  },\n  measureViewportBox: function measureViewportBox(element, _a) {\n    var transformPagePoint = _a.transformPagePoint;\n    return _measureViewportBox(element, transformPagePoint);\n  },\n\n  /**\n   * Reset the transform on the current Element. This is called as part\n   * of a batched process across the entire layout tree. To remove this write\n   * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n   * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n   * works\n   */\n  resetTransform: function resetTransform(element, domElement, props) {\n    var transformTemplate = props.transformTemplate;\n    domElement.style.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\"; // Ensure that whatever happens next, we restore our transform on the next frame\n\n    element.scheduleRender();\n  },\n  restoreTransform: function restoreTransform(instance, mutableState) {\n    instance.style.transform = mutableState.style.transform;\n  },\n  removeValueFromRenderState: function removeValueFromRenderState(key, _a) {\n    var vars = _a.vars,\n        style = _a.style;\n    delete vars[key];\n    delete style[key];\n  },\n\n  /**\n   * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n   * can be animated by Motion.\n   */\n  makeTargetAnimatable: function makeTargetAnimatable(element, _a, _b, isMounted) {\n    var transformValues = _b.transformValues;\n\n    if (isMounted === void 0) {\n      isMounted = true;\n    }\n\n    var transition = _a.transition,\n        transitionEnd = _a.transitionEnd,\n        target = __rest(_a, [\"transition\", \"transitionEnd\"]);\n\n    var origin = getOrigin(target, transition || {}, element);\n    /**\n     * If Framer has provided a function to convert `Color` etc value types, convert them\n     */\n\n    if (transformValues) {\n      if (transitionEnd) transitionEnd = transformValues(transitionEnd);\n      if (target) target = transformValues(target);\n      if (origin) origin = transformValues(origin);\n    }\n\n    if (isMounted) {\n      checkTargetForNewValues(element, target, origin);\n      var parsed = parseDomVariant(element, target, origin, transitionEnd);\n      transitionEnd = parsed.transitionEnd;\n      target = parsed.target;\n    }\n\n    return __assign({\n      transition: transition,\n      transitionEnd: transitionEnd\n    }, target);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(element, renderState, latestValues, options, props) {\n    if (element.isVisible !== undefined) {\n      renderState.style.visibility = element.isVisible ? \"visible\" : \"hidden\";\n    }\n\n    buildHTMLStyles(renderState, latestValues, options, props.transformTemplate);\n  },\n  render: renderHTML\n};\nvar htmlVisualElement = visualElement(htmlConfig);\nexport { getComputedStyle, htmlConfig, htmlVisualElement };","import { __assign } from 'tslib';\nimport { visualElement } from '../index.mjs';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.mjs';\nimport { htmlConfig } from '../html/visual-element.mjs';\nimport { buildSVGAttrs } from './utils/build-attrs.mjs';\nimport { camelToDash } from '../dom/utils/camel-to-dash.mjs';\nimport { camelCaseAttributes } from './utils/camel-case-attrs.mjs';\nimport { isTransformProp } from '../html/utils/transform.mjs';\nimport { renderSVG } from './utils/render.mjs';\nimport { getDefaultValueType } from '../dom/value-types/defaults.mjs';\nvar svgVisualElement = visualElement(__assign(__assign({}, htmlConfig), {\n  getBaseTarget: function getBaseTarget(props, key) {\n    return props[key];\n  },\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    var _a;\n\n    if (isTransformProp(key)) {\n      return ((_a = getDefaultValueType(key)) === null || _a === void 0 ? void 0 : _a.default) || 0;\n    }\n\n    key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n    return domElement.getAttribute(key);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(_element, renderState, latestValues, options, props) {\n    buildSVGAttrs(renderState, latestValues, options, props.transformTemplate);\n  },\n  render: renderSVG\n}));\nexport { svgVisualElement };","import { htmlVisualElement } from '../html/visual-element.mjs';\nimport { svgVisualElement } from '../svg/visual-element.mjs';\nimport { isSVGComponent } from './utils/is-svg-component.mjs';\n\nvar createDomVisualElement = function createDomVisualElement(Component, options) {\n  return isSVGComponent(Component) ? svgVisualElement(options, {\n    enableHardwareAcceleration: false\n  }) : htmlVisualElement(options, {\n    enableHardwareAcceleration: true\n  });\n};\n\nexport { createDomVisualElement };","import { px } from 'style-value-types';\n\nfunction pixelsToPercent(pixels, axis) {\n  if (axis.max === axis.min) return 0;\n  return pixels / (axis.max - axis.min) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\n\n\nvar correctBorderRadius = {\n  correct: function correct(latest, node) {\n    if (!node.target) return latest;\n    /**\n     * If latest is a string, if it's a percentage we can return immediately as it's\n     * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n     */\n\n    if (typeof latest === \"string\") {\n      if (px.test(latest)) {\n        latest = parseFloat(latest);\n      } else {\n        return latest;\n      }\n    }\n    /**\n     * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n     * pixel value as a percentage of each axis\n     */\n\n\n    var x = pixelsToPercent(latest, node.target.x);\n    var y = pixelsToPercent(latest, node.target.y);\n    return \"\".concat(x, \"% \").concat(y, \"%\");\n  }\n};\nexport { correctBorderRadius, pixelsToPercent };","import { mix } from 'popmotion';\nimport { complex } from 'style-value-types';\nimport { cssVariableRegex } from '../../render/dom/utils/css-variables-conversion.mjs';\nvar varToken = \"_$css\";\nvar correctBoxShadow = {\n  correct: function correct(latest, _a) {\n    var treeScale = _a.treeScale,\n        projectionDelta = _a.projectionDelta;\n    var original = latest;\n    /**\n     * We need to first strip and store CSS variables from the string.\n     */\n\n    var containsCSSVariables = latest.includes(\"var(\");\n    var cssVariables = [];\n\n    if (containsCSSVariables) {\n      latest = latest.replace(cssVariableRegex, function (match) {\n        cssVariables.push(match);\n        return varToken;\n      });\n    }\n\n    var shadow = complex.parse(latest); // TODO: Doesn't support multiple shadows\n\n    if (shadow.length > 5) return original;\n    var template = complex.createTransformer(latest);\n    var offset = typeof shadow[0] !== \"number\" ? 1 : 0; // Calculate the overall context scale\n\n    var xScale = projectionDelta.x.scale * treeScale.x;\n    var yScale = projectionDelta.y.scale * treeScale.y;\n    shadow[0 + offset] /= xScale;\n    shadow[1 + offset] /= yScale;\n    /**\n     * Ideally we'd correct x and y scales individually, but because blur and\n     * spread apply to both we have to take a scale average and apply that instead.\n     * We could potentially improve the outcome of this by incorporating the ratio between\n     * the two scales.\n     */\n\n    var averageScale = mix(xScale, yScale, 0.5); // Blur\n\n    if (typeof shadow[2 + offset] === \"number\") shadow[2 + offset] /= averageScale; // Spread\n\n    if (typeof shadow[3 + offset] === \"number\") shadow[3 + offset] /= averageScale;\n    var output = template(shadow);\n\n    if (containsCSSVariables) {\n      var i_1 = 0;\n      output = output.replace(varToken, function () {\n        var cssVariable = cssVariables[i_1];\n        i_1++;\n        return cssVariable;\n      });\n    }\n\n    return output;\n  }\n};\nexport { correctBoxShadow };","import { __extends, __assign, __read } from 'tslib';\nimport sync from 'framesync';\nimport React__default, { useContext } from 'react';\nimport { usePresence } from '../../../components/AnimatePresence/use-presence.mjs';\nimport { LayoutGroupContext } from '../../../context/LayoutGroupContext.mjs';\nimport { SwitchLayoutGroupContext } from '../../../context/SwitchLayoutGroupContext.mjs';\nimport { globalProjectionState } from '../../../projection/node/create-projection-node.mjs';\nimport { correctBorderRadius } from '../../../projection/styles/scale-border-radius.mjs';\nimport { correctBoxShadow } from '../../../projection/styles/scale-box-shadow.mjs';\nimport { addScaleCorrector } from '../../../projection/styles/scale-correction.mjs';\n\nvar MeasureLayoutWithContext =\n/** @class */\nfunction (_super) {\n  __extends(MeasureLayoutWithContext, _super);\n\n  function MeasureLayoutWithContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * This only mounts projection nodes for components that\n   * need measuring, we might want to do it for all components\n   * in order to incorporate transforms\n   */\n\n\n  MeasureLayoutWithContext.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var _a = this.props,\n        visualElement = _a.visualElement,\n        layoutGroup = _a.layoutGroup,\n        switchLayoutGroup = _a.switchLayoutGroup,\n        layoutId = _a.layoutId;\n    var projection = visualElement.projection;\n    addScaleCorrector(defaultScaleCorrectors);\n\n    if (projection) {\n      if (layoutGroup === null || layoutGroup === void 0 ? void 0 : layoutGroup.group) layoutGroup.group.add(projection);\n\n      if ((switchLayoutGroup === null || switchLayoutGroup === void 0 ? void 0 : switchLayoutGroup.register) && layoutId) {\n        switchLayoutGroup.register(projection);\n      }\n\n      projection.root.didUpdate();\n      projection.addEventListener(\"animationComplete\", function () {\n        _this.safeToRemove();\n      });\n      projection.setOptions(__assign(__assign({}, projection.options), {\n        onExitComplete: function onExitComplete() {\n          return _this.safeToRemove();\n        }\n      }));\n    }\n\n    globalProjectionState.hasEverUpdated = true;\n  };\n\n  MeasureLayoutWithContext.prototype.getSnapshotBeforeUpdate = function (prevProps) {\n    var _this = this;\n\n    var _a = this.props,\n        layoutDependency = _a.layoutDependency,\n        visualElement = _a.visualElement,\n        drag = _a.drag,\n        isPresent = _a.isPresent;\n    var projection = visualElement.projection;\n    if (!projection) return null;\n    /**\n     * TODO: We use this data in relegate to determine whether to\n     * promote a previous element. There's no guarantee its presence data\n     * will have updated by this point - if a bug like this arises it will\n     * have to be that we markForRelegation and then find a new lead some other way,\n     * perhaps in didUpdate\n     */\n\n    projection.isPresent = isPresent;\n\n    if (drag || prevProps.layoutDependency !== layoutDependency || layoutDependency === undefined) {\n      projection.willUpdate();\n    } else {\n      this.safeToRemove();\n    }\n\n    if (prevProps.isPresent !== isPresent) {\n      if (isPresent) {\n        projection.promote();\n      } else if (!projection.relegate()) {\n        /**\n         * If there's another stack member taking over from this one,\n         * it's in charge of the exit animation and therefore should\n         * be in charge of the safe to remove. Otherwise we call it here.\n         */\n        sync.postRender(function () {\n          var _a;\n\n          if (!((_a = projection.getStack()) === null || _a === void 0 ? void 0 : _a.members.length)) {\n            _this.safeToRemove();\n          }\n        });\n      }\n    }\n\n    return null;\n  };\n\n  MeasureLayoutWithContext.prototype.componentDidUpdate = function () {\n    var projection = this.props.visualElement.projection;\n\n    if (projection) {\n      projection.root.didUpdate();\n\n      if (!projection.currentAnimation && projection.isLead()) {\n        this.safeToRemove();\n      }\n    }\n  };\n\n  MeasureLayoutWithContext.prototype.componentWillUnmount = function () {\n    var _a = this.props,\n        visualElement = _a.visualElement,\n        layoutGroup = _a.layoutGroup,\n        promoteContext = _a.switchLayoutGroup;\n    var projection = visualElement.projection;\n\n    if (projection) {\n      projection.scheduleCheckAfterUnmount();\n      if (layoutGroup === null || layoutGroup === void 0 ? void 0 : layoutGroup.group) layoutGroup.group.remove(projection);\n      if (promoteContext === null || promoteContext === void 0 ? void 0 : promoteContext.deregister) promoteContext.deregister(projection);\n    }\n  };\n\n  MeasureLayoutWithContext.prototype.safeToRemove = function () {\n    var safeToRemove = this.props.safeToRemove;\n    safeToRemove === null || safeToRemove === void 0 ? void 0 : safeToRemove();\n  };\n\n  MeasureLayoutWithContext.prototype.render = function () {\n    return null;\n  };\n\n  return MeasureLayoutWithContext;\n}(React__default.Component);\n\nfunction MeasureLayout(props) {\n  var _a = __read(usePresence(), 2),\n      isPresent = _a[0],\n      safeToRemove = _a[1];\n\n  var layoutGroup = useContext(LayoutGroupContext);\n  return React__default.createElement(MeasureLayoutWithContext, __assign({}, props, {\n    layoutGroup: layoutGroup,\n    switchLayoutGroup: useContext(SwitchLayoutGroupContext),\n    isPresent: isPresent,\n    safeToRemove: safeToRemove\n  }));\n}\n\nvar defaultScaleCorrectors = {\n  borderRadius: __assign(__assign({}, correctBorderRadius), {\n    applyTo: [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomLeftRadius\", \"borderBottomRightRadius\"]\n  }),\n  borderTopLeftRadius: correctBorderRadius,\n  borderTopRightRadius: correctBorderRadius,\n  borderBottomLeftRadius: correctBorderRadius,\n  borderBottomRightRadius: correctBorderRadius,\n  boxShadow: correctBoxShadow\n};\nexport { MeasureLayout };","import { MeasureLayout } from './MeasureLayout.mjs';\nvar layoutFeatures = {\n  measureLayout: MeasureLayout\n};\nexport { layoutFeatures };","import { createProjectionNode } from './create-projection-node.mjs';\nvar DocumentProjectionNode = createProjectionNode({\n  attachResizeListener: function attachResizeListener(ref, notify) {\n    ref.addEventListener(\"resize\", notify, {\n      passive: true\n    });\n    return function () {\n      return ref.removeEventListener(\"resize\", notify);\n    };\n  },\n  measureScroll: function measureScroll() {\n    return {\n      x: document.documentElement.scrollLeft || document.body.scrollLeft,\n      y: document.documentElement.scrollTop || document.body.scrollTop\n    };\n  }\n});\nexport { DocumentProjectionNode };","import { createProjectionNode } from './create-projection-node.mjs';\nimport { DocumentProjectionNode } from './DocumentProjectionNode.mjs';\nvar rootProjectionNode = {\n  current: undefined\n};\nvar HTMLProjectionNode = createProjectionNode({\n  measureScroll: function measureScroll(instance) {\n    return {\n      x: instance.scrollLeft,\n      y: instance.scrollTop\n    };\n  },\n  defaultParent: function defaultParent() {\n    if (!rootProjectionNode.current) {\n      var documentNode = new DocumentProjectionNode(0, {});\n      documentNode.mount(window);\n      documentNode.setOptions({\n        layoutScroll: true\n      });\n      rootProjectionNode.current = documentNode;\n    }\n\n    return rootProjectionNode.current;\n  },\n  resetTransform: function resetTransform(instance, value) {\n    instance.style.transform = value !== null && value !== void 0 ? value : \"none\";\n  }\n});\nexport { HTMLProjectionNode, rootProjectionNode };","import { __assign } from 'tslib';\nimport { createMotionComponent } from '../../motion/index.mjs';\nimport { createMotionProxy } from './motion-proxy.mjs';\nimport { createDomMotionConfig } from './utils/create-config.mjs';\nimport { gestureAnimations } from '../../motion/features/gestures.mjs';\nimport { animations } from '../../motion/features/animations.mjs';\nimport { drag } from '../../motion/features/drag.mjs';\nimport { createDomVisualElement } from './create-visual-element.mjs';\nimport { layoutFeatures } from '../../motion/features/layout/index.mjs';\nimport { HTMLProjectionNode } from '../../projection/node/HTMLProjectionNode.mjs';\n\nvar featureBundle = __assign(__assign(__assign(__assign({}, animations), gestureAnimations), drag), layoutFeatures);\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\n\n\nvar motion = /*@__PURE__*/createMotionProxy(function (Component, config) {\n  return createDomMotionConfig(Component, config, featureBundle, createDomVisualElement, HTMLProjectionNode);\n});\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\n\nfunction createDomMotionComponent(key) {\n  return createMotionComponent(createDomMotionConfig(key, {\n    forwardMotionProps: false\n  }, featureBundle, createDomVisualElement, HTMLProjectionNode));\n}\n\nexport { createDomMotionComponent, motion };","import { __assign } from 'tslib';\nimport { isSVGComponent } from './is-svg-component.mjs';\nimport { createUseRender } from '../use-render.mjs';\nimport { svgMotionConfig } from '../../svg/config-motion.mjs';\nimport { htmlMotionConfig } from '../../html/config-motion.mjs';\n\nfunction createDomMotionConfig(Component, _a, preloadedFeatures, createVisualElement, projectionNodeConstructor) {\n  var _b = _a.forwardMotionProps,\n      forwardMotionProps = _b === void 0 ? false : _b;\n  var baseConfig = isSVGComponent(Component) ? svgMotionConfig : htmlMotionConfig;\n  return __assign(__assign({}, baseConfig), {\n    preloadedFeatures: preloadedFeatures,\n    useRender: createUseRender(forwardMotionProps),\n    createVisualElement: createVisualElement,\n    projectionNodeConstructor: projectionNodeConstructor,\n    Component: Component\n  });\n}\n\nexport { createDomMotionConfig };","import {\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuProps,\n  Portal,\n  PortalProps,\n  useEventListener\n} from '@chakra-ui/react'\nimport * as React from 'react'\nimport {MutableRefObject, useCallback, useEffect, useRef, useState} from 'react'\n\ninterface SimpleMenuProps extends Omit<MenuProps, 'children'> {}\n\nexport interface ContextMenuProps<T extends HTMLElement> {\n  renderMenu: () => JSX.Element | null\n  children: (ref: MutableRefObject<T | null>) => JSX.Element | null\n  menuProps?: SimpleMenuProps\n  portalProps?: PortalProps\n  menuButtonProps?: MenuButtonProps\n}\n\nexport function ContextMenu<T extends HTMLElement = HTMLElement>(\n  props: ContextMenuProps<T>\n) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [isRendered, setIsRendered] = useState(false)\n  const [isDeferredOpen, setIsDeferredOpen] = useState(false)\n  const [position, setPosition] = useState<[number, number]>([0, 0])\n  const targetRef = useRef<T>(null)\n\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(() => {\n        setIsRendered(true)\n        setTimeout(() => {\n          setIsDeferredOpen(true)\n        })\n      })\n    } else {\n      setIsDeferredOpen(false)\n      const timeout = setTimeout(() => {\n        setIsRendered(isOpen)\n      }, 1000)\n      return () => clearTimeout(timeout)\n    }\n  }, [isOpen])\n\n  useEventListener('contextmenu', e => {\n    if (\n      targetRef.current?.contains(e.target as any) ||\n      e.target === targetRef.current\n    ) {\n      e.preventDefault()\n      setIsOpen(true)\n      setPosition([e.pageX, e.pageY])\n    } else {\n      setIsOpen(false)\n    }\n  })\n\n  const onCloseHandler = useCallback(() => {\n    props.menuProps?.onClose?.()\n    setIsOpen(false)\n  }, [props.menuProps?.onClose, setIsOpen])\n\n  const onContextMenuHandler = useCallback((e: React.MouseEvent) => {\n    e.preventDefault()\n  }, [])\n\n  return (\n    <>\n      {props.children(targetRef)}\n      {isRendered && (\n        <Portal {...props.portalProps} appendToParentPortal={true}>\n          <div onContextMenu={onContextMenuHandler}>\n            <Menu\n              isOpen={isDeferredOpen}\n              gutter={0}\n              {...props.menuProps}\n              onClose={onCloseHandler}>\n              <MenuButton\n                aria-hidden={true}\n                w={1}\n                h={1}\n                style={{\n                  position: 'absolute',\n                  left: position[0],\n                  top: position[1],\n                  cursor: 'default'\n                }}\n                {...props.menuButtonProps}\n              />\n              {props.renderMenu()}\n            </Menu>\n          </div>\n        </Portal>\n      )}\n    </>\n  )\n}\n","import {\n  Button,\n  FormControl,\n  FormErrorMessage,\n  FormHelperText,\n  FormLabel,\n  Input,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n  useToast\n} from '@chakra-ui/react'\nimport * as React from 'react'\nimport {Controller, useForm} from 'react-hook-form'\nimport {IFormProps, IJaenTemplate} from '../../../../../types'\n\ntype TemplateSelectorProps = {\n  selectedTemplate: string\n  templates: Omit<IJaenTemplate, 'children'>[]\n  onSelect: (templateName: string) => void\n}\n\nconst TemplateSelector = ({\n  selectedTemplate,\n  templates,\n  onSelect\n}: TemplateSelectorProps) => {\n  // const [selectedTemplate, setSelectedTemplate] = React.useState<string>(\n  //   props.selectedTemplate\n  // )\n\n  const handleSelect = (templateName: string) => {\n    let newSelectedTemplate = templateName\n\n    // Clear selection if the same template is selected\n    if (newSelectedTemplate === selectedTemplate) {\n      newSelectedTemplate = ''\n    }\n\n    // setSelectedTemplate(newSelectedTemplate)\n    onSelect(newSelectedTemplate)\n  }\n\n  return (\n    <>\n      {templates.map(({name, displayName}, key) => (\n        <Button\n          key={key}\n          variant=\"outline\"\n          colorScheme={\n            selectedTemplate && selectedTemplate === name ? 'blue' : 'gray'\n          }\n          mr={2}\n          onClick={() => handleSelect(name)}>\n          {displayName}\n        </Button>\n      ))}\n    </>\n  )\n}\n\nexport type CreateValues = {\n  slug: string\n  title: string\n  template: Omit<IJaenTemplate, 'children'>\n}\n\nexport interface PageCreatorProps extends IFormProps<CreateValues> {\n  templates: TemplateSelectorProps['templates']\n  finalFocusRef: React.RefObject<any>\n  isOpen: boolean\n  onClose: () => void\n}\n\n/**\n * Modal to create a new page.\n * Renders a list of templates to choose from.\n */\nexport const PageCreator = ({\n  templates,\n  finalFocusRef,\n  isOpen,\n  onClose,\n  ...form\n}: PageCreatorProps) => {\n  const initialFocusRef = React.useRef<any>()\n\n  const toast = useToast()\n\n  const {\n    register,\n    reset,\n    handleSubmit,\n    control,\n    formState: {errors, isSubmitting, isDirty, isValid}\n  } = useForm<CreateValues>({\n    defaultValues: form.values\n  })\n\n  const onSubmit = (values: CreateValues) => {\n    // update template displayName\n    values.template = templates.find(\n      e => e.name === values.template.name\n    ) as IJaenTemplate\n\n    form.onSubmit(values)\n\n    reset()\n\n    toast({\n      title: 'Page created',\n      description: `Page \"${values.title}\" created`,\n      status: 'success'\n    })\n  }\n\n  const onCancel = () => {\n    reset()\n    onClose()\n  }\n\n  return (\n    <Modal\n      initialFocusRef={initialFocusRef}\n      finalFocusRef={finalFocusRef}\n      isOpen={isOpen}\n      onClose={onClose}>\n      <ModalOverlay />\n      <ModalContent>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <ModalHeader>Create a page</ModalHeader>\n          <ModalCloseButton />\n          <ModalBody pb={6}>\n            <FormControl isInvalid={!!errors.title}>\n              <FormLabel>Title</FormLabel>\n              <Input\n                placeholder=\"Title\"\n                {...register('title', {\n                  required: 'This is required',\n                  minLength: {\n                    value: 4,\n                    message: 'Minimum length should be 4'\n                  }\n                })}\n              />\n              <FormErrorMessage>{errors.title?.message}</FormErrorMessage>\n            </FormControl>\n\n            <FormControl mt={4} isInvalid={!!errors.slug}>\n              <FormLabel>Slug</FormLabel>\n              <Input\n                // id=\"slug\"\n                placeholder=\"the-slug\"\n                {...register('slug', {\n                  required: 'This is required',\n                  minLength: {\n                    value: 4,\n                    message: 'Minimum length should be 4'\n                  },\n                  pattern: {\n                    value: /^[a-z0-9-]+$/,\n                    message:\n                      'Only lowercase letters, numbers and hyphens are allowed'\n                  },\n                  validate: (value: string) => {\n                    const {externalValidation} = form\n\n                    if (externalValidation) {\n                      const validation = externalValidation('slug', value)\n\n                      if (validation) {\n                        return validation\n                      }\n                    }\n                  }\n                })}\n              />\n              {!errors.slug && (\n                <FormHelperText>\n                  Make sure the slug is unique between siblings.\n                </FormHelperText>\n              )}\n              <FormErrorMessage>{errors.slug?.message}</FormErrorMessage>\n            </FormControl>\n            <FormControl mt={4} isInvalid={!!errors.template?.name}>\n              <FormLabel>Template</FormLabel>\n              <Controller\n                control={control}\n                name=\"template.name\"\n                rules={{required: 'Please select a template'}}\n                render={({field: {value, onChange}}) => (\n                  <TemplateSelector\n                    selectedTemplate={value}\n                    templates={templates}\n                    onSelect={templateName => {\n                      onChange(templateName)\n                    }}\n                  />\n                )}\n              />\n              {!errors.template?.name && (\n                <FormHelperText>\n                  Select the template to use for this page.\n                </FormHelperText>\n              )}\n              <FormErrorMessage>\n                {errors.template?.name?.message}\n              </FormErrorMessage>\n            </FormControl>\n          </ModalBody>\n\n          <ModalFooter>\n            <Button\n              colorScheme=\"blue\"\n              mr={3}\n              isLoading={isSubmitting}\n              disabled={!isDirty}\n              type=\"submit\">\n              Create\n            </Button>\n            <Button onClick={onCancel}>Cancel</Button>\n          </ModalFooter>\n        </form>\n      </ModalContent>\n    </Modal>\n  )\n}\n","import {TreeData, TreeItem} from '@atlaskit/tree'\n\nimport type {Items} from './index'\n\nexport const TreeConverter = (items: Items): TreeData => {\n  const rootName = 'SitePage'\n  const tree: TreeData = {\n    rootId: rootName,\n    items: {\n      [rootName]: {\n        id: rootName,\n        children: []\n      }\n    }\n  }\n\n  function nth<T>(iter: Iterable<T>, n: number) {\n    for (const v of iter) if (--n < 0) return v\n  }\n\n  function* genItemParent(\n    allItems: Items,\n    rootItemId: string\n  ): Generator<string> {\n    let parent = allItems[rootItemId].parent\n\n    while (parent) {\n      yield parent\n\n      parent = allItems[parent].parent\n    }\n  }\n\n  function* genTreeItems(tree: TreeData, items: Items): Generator<TreeItem> {\n    for (const [id, item] of Object.entries(items)) {\n      if (item.parent === null) {\n        tree.items[rootName].children.push(id)\n      }\n\n      const parentIter = genItemParent(items, id)\n      const isExpanded = !nth(parentIter, 3)\n\n      if (item.parent) {\n        if (items[item.parent].data.deleted) {\n          item.data.deleted = true\n        }\n      }\n\n      yield {\n        ...item,\n        id,\n        hasChildren: !!item.children.length,\n        isExpanded,\n        isChildrenLoading: false\n      }\n    }\n  }\n\n  for (const item of genTreeItems(tree, items)) {\n    tree.items[item.id] = item\n  }\n\n  return tree\n}\n","import Tree, {\n  ItemId,\n  moveItemOnTree,\n  mutateTree,\n  RenderItemParams,\n  TreeDestinationPosition,\n  TreeItem,\n  TreeSourcePosition\n} from '@atlaskit/tree'\nimport {AddIcon, DeleteIcon, LockIcon} from '@chakra-ui/icons'\nimport {\n  Badge,\n  Box,\n  Flex,\n  HStack,\n  MenuGroup,\n  MenuItem,\n  MenuList,\n  useColorModeValue,\n  useDisclosure\n} from '@chakra-ui/react'\nimport styled from '@emotion/styled'\nimport {motion} from 'framer-motion'\nimport * as React from 'react'\nimport {FaFile, FaFolderMinus, FaFolderPlus} from 'react-icons/fa'\nimport {IJaenTemplate} from '../../../../../types'\nimport {ContextMenu} from '../../../ContextMenu'\nimport {CreateValues, PageCreator} from '../PageCreator'\nimport {TreeConverter} from './treeconverter'\n\nexport type Items = {\n  [id: string]: {\n    data: {\n      title: string\n      slug: string\n      template: Omit<IJaenTemplate, 'children'> | null\n      deleted?: true\n    }\n    isRootItem?: true\n    children: string[]\n    parent: string | null\n  }\n}\n\nexport type PageTreeProps = {\n  items: Items\n  defaultSelection?: string\n  templates: IJaenTemplate[]\n  creatorFallbackTemplates: IJaenTemplate['children']\n  onItemSelect: (id: string | null) => void\n  onItemDoubleClick: (id: string) => void\n  onItemCreate: (parentId: string | null, values: CreateValues) => void\n  onItemDelete: (id: string) => void\n  onItemMove: (\n    id: string,\n    oldParentId: string | null,\n    newParentId: string | null\n  ) => void\n}\n\nconst PADDING_PER_LEVEL = 16\nconst PreTextIcon = styled.span`\n  display: inline-block;\n  width: 16px;\n  justify-content: center;\n  cursor: pointer;\n  margin-right: 5px;\n`\n\nconst PageTree: React.FC<PageTreeProps> = ({\n  items,\n  templates,\n  creatorFallbackTemplates,\n  ...props\n}) => {\n  const greyOverlay = useColorModeValue('gray.50', 'gray.700')\n  const orange = useColorModeValue('orange', 'orange.500')\n\n  const textColor = useColorModeValue('gray.700', 'gray.300')\n\n  // convert items to a set\n  const [tree, setTree] = React.useState(TreeConverter(items))\n\n  const defaultSelection = React.useMemo(() => {\n    if (props.defaultSelection && tree.items[props.defaultSelection]) {\n      return props.defaultSelection\n    }\n\n    return tree.rootId.toString()\n  }, [tree.rootId, props.defaultSelection])\n\n  const [selectedItem, setSelectedItem] = React.useState<string>(\n    defaultSelection\n  )\n\n  const creatorTemplates = React.useMemo(() => {\n    return (\n      templates.find(\n        template => template.name === tree.items[selectedItem]?.data?.template\n      )?.children || creatorFallbackTemplates\n    )\n  }, [\n    templates,\n    creatorFallbackTemplates,\n    tree.items[selectedItem]?.data?.template\n  ])\n\n  const rootTemplates = React.useMemo(() => {\n    return templates.filter(t => t.isRootTemplate)\n  }, [templates])\n\n  const pageCreatorDisclosure = useDisclosure()\n\n  const handleItemCreate = (values: CreateValues) => {\n    // Check if the slug is already taken of a sibling\n    const {title, slug, template} = values\n\n    const parentId = selectedItem !== tree.rootId ? selectedItem : null\n\n    props.onItemCreate(parentId, values)\n\n    // Close the modal\n    pageCreatorDisclosure.onClose()\n\n    //Add the new item to the tree\n    const newItemId = `${selectedItem}/${slug}`\n\n    const newItem = {\n      id: newItemId,\n      data: {\n        title,\n        slug,\n        template: template.name\n      },\n      children: [],\n      parent: selectedItem\n    }\n\n    const newTree = {...tree}\n\n    newTree.items[newItemId] = newItem\n\n    //Update parent children\n    newTree.items[selectedItem].isExpanded = true\n    newTree.items[selectedItem].children.push(newItemId)\n\n    //setTree(newTree)\n    //handleSelectItem(newItemId)\n  }\n\n  const handleItemDelete = (id: string) => {\n    props.onItemDelete(id)\n\n    // Remove the item from the tree\n    const item = tree.items[id]\n\n    if (item) {\n      const parentId: string = (item as any).parent || tree.rootId\n\n      // Remove the item from the parent children\n      tree.items[parentId].children = tree.items[parentId].children.filter(\n        childId => childId !== id\n      )\n\n      // Remove the item from the tree\n      delete tree.items[id]\n\n      handleSelectItem(parentId)\n\n      setTree(tree)\n    }\n  }\n\n  React.useEffect(() => {\n    setTree(TreeConverter(items))\n  }, [items])\n\n  const handleSelectItem = (id?: string | null) => {\n    setSelectedItem(id || defaultSelection)\n    props.onItemSelect(id || null)\n  }\n\n  const handleContainerClick = (event: React.MouseEvent) => {\n    event.preventDefault()\n\n    if (event.target === event.currentTarget) {\n      handleClick(event, null)\n    }\n  }\n\n  const handleClick = (event: React.MouseEvent, id: string | null) => {\n    //event.stopPropagation()\n\n    handleSelectItem(id)\n\n    // switch (event.detail) {\n    //   case 1:\n    //     handleSelectItem(id)\n    //   case 2:\n    //     if (id) {\n    //       alert('ad')\n    //       props.onItemDoubleClick(id)\n    //     }\n    // }\n  }\n\n  const getIcon = (\n    item: TreeItem,\n    onExpand: (itemId: ItemId) => void,\n    onCollapse: (itemId: ItemId) => void\n  ) => {\n    const hasChildren = item.children.some(\n      childId => tree.items[childId] && !tree.items[childId].data.deleted\n    )\n\n    if (hasChildren) {\n      return item.isExpanded ? (\n        <PreTextIcon onClick={() => onCollapse(item.id)}>\n          <FaFolderMinus />\n        </PreTextIcon>\n      ) : (\n        <PreTextIcon onClick={() => onExpand(item.id)}>\n          <FaFolderPlus />\n        </PreTextIcon>\n      )\n    }\n    return (\n      <PreTextIcon>\n        <FaFile />\n      </PreTextIcon>\n    )\n  }\n\n  const renderItem = ({\n    item,\n    onExpand,\n    onCollapse,\n    provided\n  }: RenderItemParams) => {\n    const id = item.id.toString()\n    const isSelected = id === selectedItem\n\n    // Emotion box wrapper with props for the item\n    // If selectedItem === item.id change background color and backdrop shadow\n    // Use custom type\n    const ItemBox = styled(Box)`\n      border-bottom: 1px solid\n        ${\n          item.isExpanded && item.children && item.children.length > 0\n            ? '#eaeaea'\n            : 'transparent'\n        };\n      }\n    `\n\n    const handleItemBoxClick = (event: React.MouseEvent) => {\n      handleClick(event, id)\n    }\n\n    //> ItemInfo and call\n    const GenerateItemBadges = () => {\n      const isLocked = !item.data.template\n      const hasChanges = item.data.hasChanges\n\n      return (\n        <HStack align=\"center\" justify=\"space-between\">\n          {isLocked && <LockIcon />}\n          {hasChanges && (\n            <Badge\n              bg={orange}\n              color={textColor}\n              fontSize=\"xs\"\n              fontWeight=\"semibold\"\n              ml={2}>\n              Changes\n            </Badge>\n          )}\n        </HStack>\n      )\n    }\n\n    const MotionBox = motion(ItemBox)\n\n    const renderedItem = (\n      <MotionBox\n        bg={isSelected ? greyOverlay : 'transparent'}\n        whileHover={{scale: 1.005}}\n        p={2}\n        onClick={handleItemBoxClick}\n        onDoubleClick={() => props.onItemDoubleClick(id)}\n        onContextMenu={handleItemBoxClick}>\n        <Flex>\n          <Box flex={1}>\n            {getIcon(item, onExpand, onCollapse)}\n            {item.data ? item.data.title : ''}\n          </Box>\n\n          {GenerateItemBadges()}\n        </Flex>\n      </MotionBox>\n    )\n\n    // Framer Motion wrapper for the item\n\n    return (\n      <div\n        ref={provided.innerRef}\n        {...provided.draggableProps}\n        {...provided.dragHandleProps}\n        style={{\n          ...provided.draggableProps.style,\n          top: 'auto !important',\n          left: 'auto !important'\n        }}>\n        {!(item.data as any).deleted && renderedItem}\n      </div>\n    )\n  }\n\n  const onExpand = (itemId: ItemId) => {\n    setTree(mutateTree(tree, itemId, {isExpanded: true}))\n  }\n\n  const onCollapse = (itemId: ItemId) => {\n    setTree(mutateTree(tree, itemId, {isExpanded: false}))\n  }\n\n  const onDragEnd = (\n    source: TreeSourcePosition,\n    destination?: TreeDestinationPosition\n  ) => {\n    if (!destination) {\n      return\n    }\n\n    const movedItemId = tree.items[source.parentId].children[\n      source.index\n    ].toString()\n\n    const dstId = destination.parentId.toString()\n\n    const newSlug = tree.items[movedItemId].data.slug\n\n    const validSlug = !tree.items[dstId].children.some(childId => {\n      const {slug, deleted} = tree.items[childId].data\n\n      if (slug === newSlug && !deleted) {\n        return true\n      }\n    })\n\n    const dstTemplate = tree.items[dstId]?.data?.template\n    const movedTemplate = tree.items[movedItemId]?.data?.template\n\n    // Check movedItemId template is in dstId template children\n    const childTemplates = templates.find(\n      template => template.name === dstTemplate\n    )?.children\n\n    if (childTemplates && childTemplates.some(e => e.name === movedTemplate)) {\n      if (validSlug) {\n        const newTree = moveItemOnTree(tree, source, destination)\n\n        // @ts-ignore\n        //newTree.items[movedItemId].parent = destination.parentId\n\n        setTree(mutateTree(tree, destination.parentId, {isExpanded: true}))\n        handleSelectItem(movedItemId)\n\n        props.onItemMove(\n          movedItemId,\n          // @ts-ignore\n          tree.items[movedItemId].parent === tree.rootId.toString()\n            ? null\n            : // @ts-ignore\n              tree.items[movedItemId].parent,\n          dstId === tree.rootId.toString() ? null : dstId\n        )\n      }\n    }\n  }\n\n  return (\n    <>\n      <ContextMenu<HTMLDivElement>\n        renderMenu={() => (\n          <MenuList zIndex=\"popover\">\n            <MenuGroup title=\"Page\">\n              <MenuItem\n                icon={<AddIcon />}\n                onClick={() => pageCreatorDisclosure.onOpen()}>\n                Add\n              </MenuItem>\n              {tree.items[selectedItem]?.data?.template && (\n                <>\n                  <MenuItem\n                    icon={<DeleteIcon />}\n                    onClick={() => handleItemDelete(selectedItem)}>\n                    Delete\n                  </MenuItem>\n                </>\n              )}\n            </MenuGroup>\n          </MenuList>\n        )}>\n        {ref => (\n          <Box\n            ref={ref}\n            h=\"75vh\"\n            overflowY={'scroll'}\n            overflowX=\"hidden\"\n            onClick={handleContainerClick}\n            onContextMenu={handleContainerClick}>\n            <Tree\n              tree={tree}\n              renderItem={renderItem}\n              onExpand={onExpand}\n              onCollapse={onCollapse}\n              onDragEnd={onDragEnd}\n              offsetPerLevel={PADDING_PER_LEVEL}\n              isDragEnabled\n              isNestingEnabled\n            />\n          </Box>\n        )}\n      </ContextMenu>\n      <PageCreator\n        finalFocusRef={null as any}\n        values={{\n          title: '',\n          slug: '',\n          template: {\n            name: '',\n            displayName: ''\n          }\n        }}\n        templates={\n          selectedItem === 'SitePage' ? rootTemplates : creatorTemplates\n        }\n        isOpen={pageCreatorDisclosure.isOpen}\n        onClose={pageCreatorDisclosure.onClose}\n        onSubmit={handleItemCreate}\n        externalValidation={(name, value) => {\n          if (name === 'slug') {\n            const siblings = tree.items[selectedItem].children\n\n            const slugTaken = siblings.some(\n              siblingId => tree.items[siblingId]?.data?.slug === value\n            )\n\n            if (slugTaken) {\n              return 'Slug is already taken'\n            }\n          }\n        }}\n      />\n    </>\n  )\n}\n\nexport default PageTree\n","import {AddIcon, DeleteIcon, ViewIcon} from '@chakra-ui/icons'\nimport {Box, Divider, Flex} from '@chakra-ui/layout'\nimport {ButtonGroup, IconButton} from '@chakra-ui/react'\nimport {ITreeJaenPage} from '../../../../types'\nimport * as React from 'react'\nimport {ContentValues, PageContent} from './PageContent'\nimport PageTree, {PageTreeProps} from './PageTree'\n\nexport interface PagesTabProps extends PageTreeProps {\n  getPage: (id: string) => ITreeJaenPage | null\n  onPageUpdate: (id: string, values: ContentValues) => void\n}\n\n/**\n * PagesTab is a component for displaying the page tree with content in the dashboard.\n * Display PageTree and PageContent next to each other.\n */\nconst PagesTab = (props: PagesTabProps) => {\n  const [selection, setSelection] = React.useState<ITreeJaenPage | null>(null)\n\n  const onSelect = (id: string | null) => {\n    if (id !== null) {\n      const page = props.getPage(id)\n      setSelection(page)\n    } else {\n      setSelection(null)\n    }\n  }\n\n  const handlePageUpdate = React.useCallback(\n    (values: ContentValues) => {\n      alert(`Page updated: ${JSON.stringify(values)}`)\n      selection && props.onPageUpdate(selection.id, values)\n    },\n    [selection]\n  )\n\n  const handleItemDelete = React.useCallback(() => {\n    const id = selection && selection.id\n\n    setSelection(null)\n\n    id && props.onItemDelete(id)\n  }, [selection])\n\n  const selectedTemplate = React.useMemo(\n    () => props.templates.find(t => t.name === selection?.template) || null,\n    [props.templates, selection?.template]\n  )\n\n  return (\n    <div>\n      <Flex>\n        <Box w={selection ? '30%' : '100%'}>\n          <>\n            <ButtonGroup size=\"sm\" pb=\"4\">\n              <IconButton\n                aria-label=\"Add a subpage to the selected page\"\n                icon={<AddIcon />}\n                disabled\n              />\n              <IconButton\n                aria-label=\"Delete the selected page\"\n                icon={<DeleteIcon />}\n                onClick={handleItemDelete}\n                disabled={!selection?.template}\n              />\n              <IconButton\n                aria-label=\"Navigate to the page\"\n                icon={<ViewIcon />}\n                onClick={() => props.onItemDoubleClick(selection?.id!)}\n                disabled={!selection}\n              />\n            </ButtonGroup>\n            <PageTree\n              items={props.items}\n              templates={props.templates}\n              creatorFallbackTemplates={props.creatorFallbackTemplates}\n              onItemSelect={onSelect}\n              onItemDoubleClick={props.onItemDoubleClick}\n              onItemCreate={props.onItemCreate}\n              onItemDelete={handleItemDelete}\n              onItemMove={props.onItemMove}\n            />\n          </>\n        </Box>\n        <Divider orientation=\"vertical\" />\n\n        <Box flex={1}>\n          {selection && (\n            <PageContent\n              key={selection.id}\n              template={selectedTemplate}\n              values={{\n                title: selection.jaenPageMetadata.title,\n                slug: selection.slug,\n                description: selection.jaenPageMetadata.description,\n                image: selection.jaenPageMetadata.image,\n                excludedFromIndex: selection.excludedFromIndex\n              }}\n              onSubmit={handlePageUpdate}\n            />\n          )}\n        </Box>\n      </Flex>\n    </div>\n  )\n}\n\nexport default PagesTab\n","import {\n  store,\n  useAppDispatch,\n  useAppSelector,\n  withRedux\n} from '../../internal/redux'\nimport {internalActions} from '../../internal/redux/slices'\nimport {generateOriginPath} from '../../internal/services/path'\nimport {useJaenPageTree, useJaenTemplates} from '../../internal/services/site'\nimport {navigate} from 'gatsby'\nimport * as React from 'react'\nimport PagesTab from '../components/tabs/Pages'\nimport {ContentValues} from '../components/tabs/Pages/PageContent'\nimport {CreateValues} from '../components/tabs/Pages/PageCreator'\n\nexport const PagesContainer = withRedux(() => {\n  const dispatch = useAppDispatch()\n  const pageTree = useJaenPageTree()\n  const jaenTemplates = useJaenTemplates()\n\n  const latestAddedPageId = useAppSelector(\n    state => state.internal.pages.lastAddedNodeId\n  )\n\n  let [shouldUpdateDpathsFor, setShouldUpdateDpathsFor] = React.useState<{\n    pageId: string\n    create: boolean\n  } | null>(null)\n\n  React.useEffect(() => {\n    if (shouldUpdateDpathsFor) {\n      const {pageId, create} = shouldUpdateDpathsFor\n\n      dispatch(\n        internalActions.updateDynamicPaths({\n          jaenPageTree: pageTree,\n          pageId,\n          create\n        })\n      )\n\n      setShouldUpdateDpathsFor(null)\n    }\n  }, [pageTree])\n\n  React.useEffect(() => {\n    if (latestAddedPageId) {\n      dispatch(\n        internalActions.updateDynamicPaths({\n          jaenPageTree: pageTree,\n          pageId: latestAddedPageId,\n          create: true\n        })\n      )\n    }\n  }, [latestAddedPageId])\n\n  const handlePageGet = React.useCallback(\n    id => {\n      let jaenPage = pageTree.find(p => p.id === id)\n\n      // TODO: Remove workaround\n      if (!jaenPage) {\n        jaenPage = pageTree.find(p => p.id === latestAddedPageId)\n      }\n\n      if (!jaenPage) {\n        return null\n      }\n\n      return jaenPage\n    },\n    [pageTree]\n  )\n\n  const handlePageCreate = React.useCallback(\n    (parentId: string | null, values: CreateValues) =>\n      dispatch(\n        internalActions.page_updateOrCreate({\n          parent: parentId ? {id: parentId} : null,\n          slug: values.slug,\n          jaenPageMetadata: {\n            title: values.title\n          },\n          template: values.template.name\n        })\n      ),\n    []\n  )\n\n  const handlePageDelete = React.useCallback((id: string) => {\n    // shouldUpdateDpathsFor = {pageId: id, create: false}\n    setShouldUpdateDpathsFor({pageId: id, create: false})\n\n    dispatch(internalActions.page_markForDeletion(id))\n  }, [])\n\n  const handlePageMove = React.useCallback(\n    (id: string, oldParentId: string | null, newParentId: string | null) => {\n      setShouldUpdateDpathsFor({pageId: id, create: true})\n      dispatch(\n        internalActions.page_updateOrCreate({\n          id,\n          parent: newParentId ? {id: newParentId} : null,\n          fromId: oldParentId || undefined\n        })\n      )\n    },\n    []\n  )\n\n  const handlePageUpdate = React.useCallback(\n    (id: string, values: ContentValues) => {\n      //setShouldUpdateDpathsFor({pageId: id, create: true})\n      dispatch(\n        internalActions.page_updateOrCreate({\n          id,\n          slug: values.slug,\n          jaenPageMetadata: {\n            title: values.title,\n            description: values.description,\n            image: values.image\n          },\n          excludedFromIndex: values.excludedFromIndex\n        })\n      )\n    },\n    []\n  )\n\n  const handlePageNavigate = React.useCallback(\n    (id: string) => {\n      // Check if the page is a dynamic or static page.\n      // Navigate to /_/:path if dynamic, else to /:path\n      let node = pageTree.find(p => p.id === id)\n\n      if (!node) {\n        node = pageTree.find(p => p.id === latestAddedPageId)!\n      }\n\n      let path = generateOriginPath(pageTree, node)\n\n      // if (path === '/') {\n      //   path += node.slug\n      // } else {\n      //   path += '/' + node.slug\n      // }\n\n      const dynamicPaths = store.getState()?.internal.routing.dynamicPaths\n\n      if (path) {\n        if (dynamicPaths && path in dynamicPaths) {\n          path = `/_#${path}`\n        }\n\n        navigate(path)\n      }\n    },\n    [pageTree]\n  )\n\n  const treeItems = React.useMemo(\n    () =>\n      pageTree.reduce(\n        (a, v) => ({\n          ...a,\n          [v.id]: {\n            id: v.id,\n            children: v.children.map(child => child.id),\n            data: {\n              title: v.jaenPageMetadata.title,\n              slug: v.slug,\n              template: v.template,\n              hasChanges: false,\n              deleted: v.deleted\n            },\n            parent: v.parent?.id || null\n          }\n        }),\n        {}\n      ),\n    [pageTree]\n  )\n\n  return (\n    <PagesTab\n      items={treeItems}\n      templates={jaenTemplates}\n      creatorFallbackTemplates={jaenTemplates}\n      getPage={handlePageGet}\n      onItemCreate={handlePageCreate}\n      onItemDelete={handlePageDelete}\n      onItemMove={handlePageMove}\n      onPageUpdate={handlePageUpdate}\n      onItemSelect={id => null}\n      onItemDoubleClick={handlePageNavigate}\n    />\n  )\n})\n\nexport default PagesContainer\n"],"names":["module","exports","_extends","target","i","arguments","length","source","key","Object","prototype","hasOwnProperty","call","apply","this","_setPrototypeOf","o","p","__proto__","_inheritsLoose","subClass","superClass","constructor","GenIcon","props","safeIsNaN","Number","isNaN","value","areInputsEqual","newInputs","lastInputs","first","second","resultFn","isEqual","lastThis","lastResult","lastArgs","calledOnce","newArgs","_i","fn","frameId","wrapperFn","_len","args","Array","_key","requestAnimationFrame","cancel","cancelAnimationFrame","useMemoOne","getResult","inputs","initial","useState","result","isFirstRun","useRef","committed","cache","current","Boolean","useEffect","useMemo","useCallback","callback","$Object","P","D","create","it","TypeError","isObject","toIObject","toLength","toAbsoluteIndex","IS_INCLUDES","$this","el","fromIndex","O","index","toString","slice","core","version","__e","aFunction","that","undefined","a","b","c","defineProperty","get","document","is","createElement","split","global","ctx","hide","has","$export","type","name","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","B","IS_WRAP","W","expProto","C","Function","virtual","R","U","exec","e","window","Math","self","__g","dP","createDesc","object","f","documentElement","cof","propertyIsEnumerable","floor","isFinite","DESCRIPTORS","getKeys","gOPS","pIE","toObject","IObject","$assign","assign","A","Symbol","K","forEach","k","keys","join","T","aLen","getSymbols","isEnum","concat","j","anObject","dPs","enumBugKeys","IE_PROTO","Empty","createDict","iframeDocument","iframe","style","display","src","contentWindow","open","write","lt","close","Properties","IE8_DOM_DEFINE","toPrimitive","Attributes","defineProperties","gOPD","getOwnPropertyDescriptor","getOwnPropertySymbols","arrayIndexOf","names","push","$keys","fails","KEY","exp","isEntries","bitmap","enumerable","configurable","writable","check","proto","set","setPrototypeOf","test","buggy","shared","uid","SHARED","store","mode","copyright","toInteger","max","min","ceil","defined","val","valueOf","id","px","random","now","Date","getTime","isInteger","$values","values","PageContent","toast","useToast","React","defaultValues","setDefaultValues","useForm","register","reset","handleSubmit","setValue","control","formState","errors","isSubmitting","isDirty","finder","isValid","useSnekFinder","onAction","action","image","payload","item","shouldDirty","handleImageUpload","toggleSelector","handleImageRemove","finderElement","Flex","flexDirection","Heading","as","size","mb","template","Badge","displayName","onSubmit","vs","title","description","status","duration","Box","h","overflowY","defaultIndex","flex","textAlign","pb","isInvalid","placeholder","required","minLength","message","mt","slug","disabled","pattern","validate","externalValidation","validation","render","field","Stack","direction","spacing","align","width","HStack","leftIcon","HiCloudUpload","onClick","variant","colorScheme","Text","fontSize","color","Spacer","isDisabled","mr","isLoading","isSamePath","every","v","hasSameParent","getParentPath","child","isParentOf","parent","getIndexAmongSiblings","path","getPathOnLevel","level","moveAfterPath","after","from","newPath","isLowerSibling","other","_createForOfIteratorHelper","allowArrayLike","iterator","isArray","minLen","_arrayLikeToArray","n","_unsupportedIterableToArray","s","done","_e","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","ownKeys","enumerableOnly","symbols","filter","sym","_objectSpread","getOwnPropertyDescriptors","flattenTree","tree","items","rootId","children","reduce","accum","itemId","currentPath","currentItem","createFlattenedItem","flattenChildren","isExpanded","mutateTree","mutation","itemToChange","getParent","_step","cursor","_iterator","getItem","getTreePosition","parentId","moveItemOnTree","to","_removeItemFromTree","position","sourceParent","newSourceChildren","itemRemoved","splice","hasChildren","removeItemFromTree","destinationParent","newDestinationChildren","hasLoadedChildren","isLeafItem","addItemToTree","noop","between","number","getSourcePath","flattenedTree","sourceIndex","getDestinationPath","destinationIndex","belowPath","abovePath","down","sourcePath","sameIndex","upperPath","lowerPath","minLevel","maxLevel","finalLevel","previousPathOnTheFinalLevel","_finalLevel","calculateFinalLevel","_previousPathOnTheFinalLevel","upperLevel","lowerLevel","sourceLevel","getItemById","find","getIndexById","findIndex","calculateFinalDropPositions","dragState","destination","combine","horizontalLevel","sourcePosition","destinationPosition","draggableId","destinationPath","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","TreeItem","_Component","_super","_this","draggableProps","snapshot","_this$props","offsetPerLevel","transitions","transition","dropAnimation","curve","paddingLeft","nextProps","oldProps","newProps","provided","dragHandleProps","_this$props2","_onExpand","onExpand","_onCollapse","onCollapse","renderItem","itemRef","finalProvided","patchDraggableProps","innerRef","depth","Component","DelayedFunction","delay","stop","timeoutId","setTimeout","clearTimeout","Tree","draggedItemId","onDragStart","setState","update","state","expandTimer","isExpandable","start","onDragEnd","finalDragState","_calculateFinalDropPo","getDroppedLevel","flatItem","_this$state","_this$dragState","isDropAnimating","containerElement","containerLeft","contentBox","left","itemElement","itemsElement","currentLeft","relativeLeft","map","isDragEnabled","renderTreeItem","isDragging","isDragDisabled","renderDraggableItem","calculateEffectivePath","onDropAnimating","_ref","setItemRef","_this2","isNestingEnabled","renderedItems","renderItems","onDragUpdate","droppableId","isCombineEnabled","ignoreContainerClipping","patchDroppableProvided","ref","pointerEvents","onTouchMove","onPointerMove","onMouseMove","droppableProps","finalTree","closeParentIfNeeded","createDefinition","propNames","isEnabled","some","featureDefinitions","measureLayout","animation","exit","drag","focus","hover","tap","pan","inView","LazyContext","createContext","strict","featureNames","numFeatures","MotionConfigContext","transformPagePoint","isStatic","MotionContext","isBrowser","useIsomorphicLayoutEffect","useLayoutEffect","useVisualElement","visualState","createVisualElement","lazyContext","useContext","visualElement","presenceContext","visualElementRef","renderer","presenceId","blockInitialAnimation","syncRender","_a","animationState","animateChanges","notifyUnmount","isRefObject","isVariantLabels","isVariantLabel","resolveVariantFromProps","definition","custom","currentValues","currentVelocity","variants","resolveVariant","getProps","forEachValue","getCurrent","velocity","getVelocity","checkIfControllingVariants","animate","whileHover","whileDrag","whileTap","whileFocus","checkIfVariantNode","useCreateMotionContext","context","inherit","getCurrentTreeVariants","variantLabelsAsDependency","prop","useConstant","init","defaultTimestep","getCurrentTime","performance","onNextFrame","useDefaultElapsed","runNextFrame","isProcessing","delta","timestamp","stepsOrder","steps","acc","toRun","toRunNextFrame","numToRun","flushNextFrame","toKeepAlive","WeakSet","schedule","addToCurrentFrame","buffer","add","indexOf","delete","process","frameData","createRenderStep","sync","keepAlive","immediate","startLoop","cancelSync","flushSync","processStep","stepId","processFrame","getFrameData","addUniqueItem","removeItem","SubscriptionManager","subscriptions","handler","notify","numSubscriptions","getSize","clear","MotionValue","timeDelta","lastUpdated","updateSubscribers","velocityUpdateSubscribers","renderSubscribers","canTrackVelocity","updateAndNotify","prev","scheduleVelocityCheck","velocityCheck","hasAnimated","parseFloat","onChange","subscription","clearListeners","onRenderRequest","attach","passiveEffect","getPrevious","Promise","resolve","stopAnimation","then","clearAnimation","isAnimating","destroy","motionValue","isMotionValue","secondsToMilliseconds","seconds","easingLookup","linear","easeIn","easeInOut","easeOut","circIn","circInOut","circOut","backIn","backInOut","backOut","anticipate","bounceIn","bounceInOut","bounceOut","easingDefinitionToFunction","x1","y1","x2","y2","isAnimatable","complex","startsWith","isKeyframesTarget","underDampedSpring","stiffness","damping","restSpeed","criticallyDampedSpring","sqrt","linearTween","ease","keyframes","defaultTransitions","x","y","z","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scale","opacity","backgroundColor","default","transform","round","numberValueTypes","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","maxWidth","height","maxHeight","top","right","bottom","padding","paddingTop","paddingRight","paddingBottom","margin","marginTop","marginRight","marginBottom","marginLeft","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","perspective","transformPerspective","originX","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","defaultValueTypes","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","WebkitFilter","getDefaultValueType","getAnimatableNone","defaultValueType","instantAnimationState","resolveFinalValueInKeyframes","legacyRepeatWarning","convertTransitionToAnimationOptions","times","yoyo","flip","loop","options","repeatDelay","isEasingArray","repeatType","repeat","getPopmotionAnimationOptions","valueKey","transitionFactory","hydrateKeyframes","when","delayChildren","staggerChildren","staggerDirection","isTransitionDefined","isZero","getZeroUnit","potentialUnitType","getValueTransition","startAnimation","onComplete","delayTimer","controls","valueTransition","origin","isTargetAnimatable","isOriginAnimatable","onUpdate","inertia","_b","finalTarget","getAnimation","getDelayFromTransition","borders","numBorders","asNumber","isPx","getRadius","radiusName","easeCrossfadeIn","compress","easeCrossfadeOut","easing","progress","copyAxisInto","axis","originAxis","copyBoxInto","box","originBox","isIdentityScale","hasScale","hasTransform","hasTranslate","scalePoint","point","originPoint","applyPointDelta","translate","boxScale","applyAxisDelta","applyBoxDelta","translateAxis","transformAxis","transforms","scaleKey","originKey","axisOrigin","mix","xKeys","yKeys","transformBox","calcLength","isNear","maxDistance","calcAxisDelta","calcBoxDelta","calcRelativeAxis","relative","calcRelativeAxisPosition","layout","calcRelativePosition","removePointDelta","removeAxisTransforms","sourceAxis","removeAxisDelta","removeBoxTransforms","sourceBox","isAxisDeltaZero","isDeltaZero","boxEquals","NodeStack","members","node","scheduleRender","remove","prevLead","lead","promote","relegate","indexOfNode","member","isPresent","preserveFollowOpacity","show","instance","resumeFrom","preserveOpacity","latestValues","animationValues","isShared","root","isUpdating","isLayoutDirty","crossfade","exitAnimationComplete","_c","_d","onExitComplete","resumingFrom","removeLeadSnapshot","scaleCorrectors","buildProjectionTransform","treeScale","latestTransform","xTranslate","yTranslate","eachAxis","transformAxes","transformProps","sortTransformProps","operationKey","axesKey","transformPropSet","Set","isTransformProp","transformOriginProps","isTransformOriginProp","compareByDepth","FlatTree","sort","resolveMotionValue","unwrappedValue","toValue","globalProjectionState","hasAnimatedSinceResize","hasEverUpdated","createProjectionNode","attachResizeListener","defaultParent","measureScroll","resetTransform","ProjectionNode","isTreeAnimating","isAnimationBlocked","updateManuallyBlocked","updateBlockedByResize","isSVG","needsReset","shouldResetTransform","eventHandlers","Map","potentialNodes","checkUpdateFailed","clearAllSnapshots","updateProjection","nodes","resolveTargetDelta","calcProjection","hasProjected","isVisible","animationProgress","sharedNodes","registerPotentialNode","addEventListener","notifyListeners","subscriptionManager","hasListeners","mount","SVGElement","tagName","layoutId","getInstance","unblockTimeout_1","resizeUnblockUpdate_1","finishAnimation","registerSharedNode","_f","hasLayoutChanged","hasRelativeTargetChanged","newLayout","isTreeAnimationBlocked","relativeTarget","layoutTransition","getDefaultTransition","defaultLayoutTransition","onLayoutAnimationComplete","targetChanged","targetLayout","hasOnlyRelativeTargetChanged","currentAnimation","setAnimationOrigin","isLead","unmount","willUpdate","getStack","preRender","blockUpdate","unblockUpdate","isUpdateBlocked","startUpdate","resetRotation","shouldNotifyListeners","updateScroll","transformTemplate","prevTransformTemplateValue","updateSnapshot","didUpdate","clearMeasurements","mountNodeEarly","resetTransformStyle","updateLayout","notifyLayoutUpdate","clearSnapshot","removeLeadSnapshots","scheduleUpdateProjection","scheduleCheckAfterUnmount","measured","measure","removeTransform","removeElementScroll","roundBox","alwaysMeasureLayout","prevLayout","actual","layoutCorrected","projectionDelta","notifyLayoutMeasure","layoutScroll","scroll","isResetRequested","hasProjection","transformTemplateValue","transformTemplateHasChanged","measureViewportBox","boxWithoutScroll","scroll_1","applyTransform","transformOnly","withTransforms","boxWithoutTransform","setTargetDelta","targetDelta","setOptions","relativeParent","getClosestProjectingParent","relativeTargetOrigin","targetWithTransforms","attemptToResolveRelativeTarget","pendingAnimation","getLead","treePath","isSharedTransition","treeLength","applyTreeDeltas","projectionDeltaWithTransform","prevTreeScaleX","prevTreeScaleY","prevProjectionTransform","projectionTransform","notifyAll","snapshotLatestValues","mixedValues","relativeLayout","isSharedLayoutAnimation","isOnlyMember","shouldCrossfadeOpacity","hasOpacityCrossfade","mixTargetDelta","latest","output","mixAxisDelta","mixAxis","follow","opacityExit","borderLabel","followRadius","leadRadius","mixValues","completeAnimation","applyTransformsToTarget","initialPromotionConfig","shouldPreserveFollowOpacity","stack","getPrevLead","hasRotate","resetValues","getStaticValue","setStaticValue","getProjectionStyles","styleProp","styles","visibility","emptyStyles","valuesToRender","_g","transformOrigin","_h","correct","applyTo","corrected","num","resetTree","layout_1","measuredLayout","animationType","axisSnapshot","layoutDelta","visualDelta","parentSnapshot","parentLayout","relativeSnapshot","searchNode","element","querySelector","roundAxis","LayoutGroupContext","SwitchLayoutGroupContext","VisualElementHandler","getSnapshotBeforeUpdate","updateProps","componentDidUpdate","setProps","preloadedFeatures","projectionNodeConstructor","useRender","useVisualState","features","loadFeatures","forwardRef","externalRef","layoutGroupId","useLayoutId","config","projectionId","ProjectionNodeConstructor","dragConstraints","projection","getLatestValues","useProjection","name_1","useFeatures","Provider","useMotionRef","createMotionProxy","createConfig","customMotionComponentConfig","componentCache","_target","lowercaseSVGElements","isSVGComponent","includes","isForcedMotionValue","translateAlias","isCSSVariable","getValueAsType","buildHTMLStyles","vars","transformKeys","hasTransformOrigin","transformIsNone","valueType","valueAsType","transformIsDefault","enableHardwareAcceleration","allowTransformNone","transformString","transformHasZ","numTransformKeys","trim","buildTransform","buildTransformOrigin","createHtmlRenderState","copyRawValuesOnly","useStyle","useInitialMotionValues","transformValues","useHTMLProps","htmlProps","dragListener","draggable","userSelect","WebkitUserSelect","WebkitTouchCallout","touchAction","validMotionProps","isValidMotionProp","isValidProp","shouldForward","calcOrigin","offset","dashKeys","array","camelKeys","buildSVGAttrs","attrX","attrY","pathLength","pathSpacing","pathOffset","attrs","dimensions","pxOriginX","pxOriginY","calcSVGTransformOrigin","useDashCase","buildSVGPath","createSvgRenderState","useSVGProps","visualProps","rawStyles","createUseRender","forwardMotionProps","filteredProps","isDom","filterProps","elementProps","CAMEL_CASE_PATTERN","camelToDash","str","replace","toLowerCase","renderHTML","setProperty","camelCaseAttributes","renderSVG","renderState","setAttribute","scrapeMotionValuesFromProps","newValues","toUpperCase","isAnimationControls","makeState","createRenderState","onMount","makeLatestValues","makeUseVisualState","scrapeMotionValues","motionValues","isControllingVariants","isVariantNode","initialAnimationIsBlocked","variantToSet","resolved","transitionEnd","valueTarget","AnimationType","svgMotionConfig","getBBox","getBoundingClientRect","htmlMotionConfig","addDomEvent","eventName","removeEventListener","useDomEvent","isMouseEvent","event","PointerEvent","pointerType","MouseEvent","isTouchEvent","touches","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","changedTouches","pointFromMouse","extractEventInfo","wrapHandler","shouldFilterPrimaryPointer","eventHandler","listener","button","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","onpointerdown","ontouchstart","onmousedown","addPointerEvent","usePointerEvent","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","createHoverEvent","isActive","info","setActive","Hover","isNodeOrChild","parentElement","useUnmountEffect","observerCallbacks","WeakMap","observers","fireObserverCallback","entry","fireAllObserverCallbacks","entries","observeIntersection","rootInteresectionObserver","lookupRoot","rootObservers","JSON","stringify","IntersectionObserver","initIntersectionObserver","observe","unobserve","thresholdNames","all","useIntersectionObserver","shouldObserve","rootMargin","amount","once","threshold","isIntersecting","isInView","hasEnteredView","InView","onViewportEnter","onViewportLeave","useMissingIntersectionObserver","makeRenderlessComponent","hook","gestureAnimations","whileInView","viewport","onTap","onTapStart","onTapCancel","hasPressListeners","isPressing","cancelPointerEndListeners","removePointerEndListener","checkPointerEnd","Tap","onPointerUp","onPointerCancel","pipe","Focus","onHoverStart","onHoverEnd","usePresence","useUniqueId","counter","incrementId","shallowCompare","prevLength","isZeroValueString","testValueType","dimensionValueTypes","vw","vh","parse","findDimensionValueType","valueTypes","findValueType","setMotionValue","hasValue","getValue","addValue","setTarget","makeTargetAnimatable","getOriginFromTransition","animateVariant","transitionOverride","animateTarget","getChildAnimations","variantChildren","forwardDelay","animations","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","notifyAnimationComplete","animateChildren","last","animationTypeState","getState","shouldBlockAnimation","sortNodePosition","protectedKeys","needsAnimating","shouldBlock","variantPriorityOrder","Animate","Drag","Exit","reversePriorityOrder","reverse","numAnimationTypes","animateList","notifyAnimationStart","resolvedDefinition","animateVisualElement","createAnimationState","createTypeState","allAnimatedKeys","isInitialRender","buildResolvedTypeValues","changedActiveType","getVariantContext","removedKeys","encounteredKeys","removedVariantIndex","Infinity","_loop_1","typeState","propIsVariant","activeDelta","isInherited","manuallyAnimateOnMount","prevProp","variantDidChange","checkVariantsDidChange","shouldAnimateType","definitionList","resolvedValues","prevResolvedValues","allKeys","markToAnimate","fallbackAnimation_1","fallbackTarget","getBaseTarget","shouldAnimate","isAnimated","setAnimateFunction","makeAnimator","subscribe","safeToRemove","PanSession","handlers","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","getPanInfo","history","isPanStarted","isDistancePastThreshold","onStart","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","end","onEnd","onSessionEnd","panInfo","initialInfo","onSessionStart","removeListeners","updateHandlers","subtractPoint","lastDevicePoint","startDevicePoint","timestampedPoint","lastPoint","time","calcRelativeAxisConstraints","calcViewportAxisConstraints","layoutAxis","constraintsAxis","defaultElastic","resolveAxisElastic","dragElastic","minLabel","maxLabel","resolvePointElastic","label","convertBoundingBoxToBox","topLeft","bottomRight","transformBoxPoints","elementDragControls","VisualElementDragControls","openGlobalLock","currentDirection","constraints","hasMutatedConstraints","elastic","originEvent","snapToCursor","panSession","dragPropagation","resolveConstraints","getAxisMotionValue","measuredAxis","dragDirectionLock","onDirectionLock","onDrag","lockThreshold","abs","getCurrentDirection","updateAxis","getTransformPagePoint","_point","shouldDrag","axisValue","prevConstraints","resolveRefConstraints","layoutBox","calcRelativeConstraints","resolveDragElastic","relativeConstraints","rebaseAxisConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","rootProjectionNode","viewportBox","measurePageBox","measuredConstraints","calcViewportConstraints","userConstraints","convertBoxToBoundingBox","dragMomentum","dragTransition","dragSnapToOrigin","onDragTransitionEnd","momentumAnimations","bounceStiffness","bounceDamping","timeConstant","restDelta","startAxisValueAnimation","dragKey","externalMotionValue","scalePositionWithinConstraints","boxProgress","sourceLength","targetLength","clamp","addListeners","stopPointerListener","measureDragConstraints","stopMeasureLayoutListener","stopResizeListener","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","groupDragControls","dragControls","treeType","build","_getBaseTarget","_makeTargetAnimatable","_measureViewportBox","renderInstance","readValueFromInstance","removeValueFromRenderState","_sortNodePosition","removeFromVariantTree","isMounted","lifecycles","managers","propSubscriptions","clearAllListeners","manager","updatePropListeners","on","propListener","createLifecycles","valueSubscriptions","prevMotionValues","baseTarget","triggerBuild","notifyUpdate","initialMotionValues","newInstance","addVariantChild","closestVariantNode","getClosestVariantNode","getLayoutId","setVisibility","canMutate","removeValue","removeOnChange","latestValue","removeOnRenderRequest","bindToMotionValue","defaultValue","readValue","setBaseTarget","nextValue","prevValue","existingValue","updateMotionValuesFromProps","getVariant","startAtParent","context_1","numVariantProps","variantProps","cssVariableRegex","getVariableValue","match","parseCSSVariable","token","fallback","getComputedStyle","getPropertyValue","BoundingBoxDimension","positionalKeys","isPositionalKey","setAndResetVelocity","isNumOrPxType","getPosFromMatrix","matrix","pos","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","nonTranslationalTransformKeys","positionalValues","checkAndConvertChangedValueTypes","targetPositionalKeys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","toType","fromType","numKeyframes","removedTransforms","removeNonTranslationalTransform","convertedTarget","changedKeys","originBbox","elementComputedStyle","targetBbox","convertChangedValueTypes","unitConversion","hasPositionalKey","parseDomVariant","Element","resolveCSSVariables","htmlConfig","domElement","defaultType","computedStyle","compareDocumentPosition","restoreTransform","mutableState","getOrigin","newValueKeys","numNewValues","targetValue","checkTargetForNewValues","parsed","htmlVisualElement","svgVisualElement","getAttribute","_element","pixelsToPercent","pixels","correctBorderRadius","varToken","correctBoxShadow","original","containsCSSVariables","cssVariables","shadow","xScale","yScale","averageScale","i_1","cssVariable","MeasureLayoutWithContext","componentDidMount","correctors","layoutGroup","switchLayoutGroup","defaultScaleCorrectors","group","prevProps","layoutDependency","componentWillUnmount","promoteContext","deregister","boxShadow","layoutFeatures","DocumentProjectionNode","passive","scrollLeft","body","scrollTop","documentNode","featureBundle","motion","baseConfig","ContextMenu","isOpen","setIsOpen","isRendered","setIsRendered","isDeferredOpen","setIsDeferredOpen","setPosition","targetRef","timeout","useEventListener","contains","preventDefault","onCloseHandler","menuProps","onClose","onContextMenuHandler","portalProps","appendToParentPortal","onContextMenu","gutter","w","menuButtonProps","renderMenu","TemplateSelector","selectedTemplate","templates","onSelect","newSelectedTemplate","PageCreator","finalFocusRef","form","initialFocusRef","rules","templateName","TreeConverter","genItemParent","genTreeItems","rootName","nth","iter","allItems","rootItemId","parentIter","data","deleted","isChildrenLoading","PreTextIcon","creatorFallbackTemplates","greyOverlay","useColorModeValue","orange","textColor","setTree","defaultSelection","selectedItem","setSelectedItem","creatorTemplates","rootTemplates","t","isRootTemplate","pageCreatorDisclosure","useDisclosure","handleSelectItem","onItemSelect","handleContainerClick","currentTarget","handleClick","getIcon","childId","isLocked","hasChanges","isSelected","ItemBox","handleItemBoxClick","MotionBox","renderedItem","bg","onDoubleClick","onItemDoubleClick","justify","LockIcon","fontWeight","ml","movedItemId","dstId","newSlug","validSlug","dstTemplate","movedTemplate","childTemplates","onItemMove","icon","AddIcon","onOpen","DeleteIcon","onItemDelete","handleItemDelete","overflowX","onItemCreate","newItemId","newItem","newTree","siblingId","selection","setSelection","handlePageUpdate","alert","onPageUpdate","ViewIcon","page","getPage","Divider","orientation","jaenPageMetadata","excludedFromIndex","PagesContainer","withRedux","dispatch","useAppDispatch","pageTree","useJaenPageTree","jaenTemplates","useJaenTemplates","latestAddedPageId","useAppSelector","internal","pages","lastAddedNodeId","shouldUpdateDpathsFor","setShouldUpdateDpathsFor","pageId","internalActions","jaenPageTree","handlePageGet","jaenPage","handlePageCreate","handlePageDelete","handlePageMove","oldParentId","newParentId","fromId","handlePageNavigate","generateOriginPath","dynamicPaths","routing","navigate","treeItems","Pages"],"sourceRoot":""}